!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=12)}([function(e,t,n){"use strict";e.exports=n(11)},function(e,t,n){"use strict";e.exports=n(7)},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(8)},,function(e,t,n){"use strict";var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))l.call(n,a)&&(o[a]=n[a]);if(u){r=u(n);for(var s=0;s<r.length;s++)c.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o}},,,function(e,t,n){"use strict";var c=n(4),d=60103,p=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var r=60109,o=60110,i=60112;t.Suspense=60113;var a=60115,s=60116;"function"==typeof Symbol&&Symbol.for&&(d=(y=Symbol.for)("react.element"),p=y("react.portal"),t.Fragment=y("react.fragment"),t.StrictMode=y("react.strict_mode"),t.Profiler=y("react.profiler"),r=y("react.provider"),o=y("react.context"),i=y("react.forward_ref"),t.Suspense=y("react.suspense"),a=y("react.memo"),s=y("react.lazy"));var h="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l={};function f(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||u}function v(){}function g(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||u}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=f.prototype;var y=g.prototype=new v;y.constructor=g,c(y,f.prototype),y.isPureReactComponent=!0;var b={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:d,type:e,key:i,ref:a,props:o,_owner:b.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var C=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(e=""+e.key,n={"=":"=0",":":"=2"},"$"+e.replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var n}function O(e,t,n){if(null==e)return e;var r=[],o=0;return function e(t,n,r,o,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var s,u,l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case d:case p:l=!0}}if(l)return i=i(l=t),t=""===o?"."+E(l,0):o,Array.isArray(i)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),e(i,n,r,"",function(e){return e})):null!=i&&(D(i)&&(s=r+(!(u=i).key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+t,i={$$typeof:d,type:u.type,key:s,ref:u.ref,props:u.props,_owner:u._owner}),n.push(i)),1;if(l=0,o=""===o?".":o+":",Array.isArray(t))for(var c=0;c<t.length;c++){var f=o+E(a=t[c],c);l+=e(a,n,r,f,i)}else if("function"==typeof(f=null!==(u=t)&&"object"==typeof u&&"function"==typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(t=f.call(t),c=0;!(a=t.next()).done;)l+=e(a=a.value,n,r,f=o+E(a,c++),i);else if("object"===a)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n));return l}(e,r,"","",function(e){return t.call(n,e,o++)}),r}function S(t){var e;if(-1===t._status&&(e=(e=t._result)(),t._status=0,(t._result=e).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)})),1===t._status)return t._result;throw t._result}var A={current:null};function j(){var e=A.current;if(null===e)throw Error(m(321));return e}y={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:c};t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!D(e))throw Error(m(143));return e}},t.Component=f,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y,t.cloneElement=function(e,t,n){if(null==e)throw Error(m(267,e));var r,o=c({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t)for(u in void 0!==t.ref&&(a=t.ref,s=b.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps&&(r=e.type.defaultProps),t)k.call(t,u)&&!w.hasOwnProperty(u)&&(o[u]=(void 0===t[u]&&void 0!==r?r:t)[u]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){r=Array(u);for(var l=0;l<u;l++)r[l]=arguments[l+2];o.children=r}return{$$typeof:d,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:i,render:e}},t.isValidElement=D,t.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:S}},t.memo=function(e,t){return{$$typeof:a,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var o=n(1),m=n(4),i=n(9);function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(E(227));var r=new Set,c={};function a(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(c[e]=t,e=0;e<t.length;e++)r.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,d={},p={};function h(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,n,t,r){var o,i=v.hasOwnProperty(n)?v[n]:null;(null!==i?0!==i.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(r,e,t){if(null==r||function(e,t,n){if(null===t||0!==t.type)switch(typeof r){case"function":case"symbol":return 1;case"boolean":return!n&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return}}(n,e,t))return 1;if(!t&&null!==e)switch(e.type){case 3:return!r;case 4:return!1===r;case 5:return isNaN(r);case 6:return isNaN(r)||r<1}}(t,i,r)&&(t=null),r||null===i?(o=n,(f.call(p,o)||!f.call(d,o)&&(l.test(o)?p[o]=!0:(d[o]=!0,0)))&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t))):i.mustUseProperty?e[i.propertyName]=null===t?3!==i.type&&"":t:(n=i.attributeName,r=i.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(i=i.type)||4===i&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);v[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);v[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);v[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,x=60106,D=60107,C=60108,O=60114,S=60109,A=60110,j=60112,M=60113,N=60120,T=60115,F=60116,P=60121,R=60128,B=60129,I=60130,L=60131;"function"==typeof Symbol&&Symbol.for&&(w=(cn=Symbol.for)("react.element"),x=cn("react.portal"),D=cn("react.fragment"),C=cn("react.strict_mode"),O=cn("react.profiler"),S=cn("react.provider"),A=cn("react.context"),j=cn("react.forward_ref"),M=cn("react.suspense"),N=cn("react.suspense_list"),T=cn("react.memo"),F=cn("react.lazy"),P=cn("react.block"),cn("react.scope"),R=cn("react.opaque.id"),B=cn("react.debug_trace_mode"),I=cn("react.offscreen"),L=cn("react.legacy_hidden"));var z,_="function"==typeof Symbol&&Symbol.iterator;function V(e){return null!==e&&"object"==typeof e&&"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}function $(e){if(void 0===z)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var H=!1;function U(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,--s<0||o[a]!==i[s])return"\n"+o[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case D:return"Fragment";case x:return"Portal";case O:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case j:var t=(t=e.render).displayName||t.name||"";return e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case T:return W(e.type);case P:return W(e._render);case F:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(e){var t=e._valueTracker;if(!t)return 1;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),1)}}function G(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(e,t){var n=t.checked;return m({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked,n=q(null!=t.value?t.value:n);e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ee(e,t){Z(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return e.removeAttribute("value"),0;t.hasOwnProperty("value")?ne(e,t.type,n):t.hasOwnProperty("defaultValue")&&ne(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ne(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function re(e,t){return e=m({children:void 0},t),n=t.children,r="",o.Children.forEach(n,function(e){null!=e&&(r+=e)}),(t=r)&&(e.children=t),e;var n,r}function oe(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,r&&(e[o].defaultSelected=!0),0;null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(E(91));return m({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(E(92));if(Array.isArray(n)){if(!(n.length<=1))throw Error(E(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var le="http://www.w3.org/1999/xhtml";function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ce(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,pe,he=(pe=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return pe(e,t)})}:pe);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return n.nodeValue=t,0}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t){var r,o;t.hasOwnProperty(n)&&(r=0===n.indexOf("--"),o=ye(n,t[n],r),"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o)}}Object.keys(ve).forEach(function(t){ge.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ve[e]=ve[t]})});var ke=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(E(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(E(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(E(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function De(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ee=null,Oe=null;function Se(e){if(e=Hr(e)){if("function"!=typeof Ce)throw Error(E(280));var t=e.stateNode;t&&(t=Wr(t),Ce(e.stateNode,e.type,t))}}function Ae(e){Ee?Oe?Oe.push(e):Oe=[e]:Ee=e}function je(){if(Ee){var e=Ee,t=Oe;if(Oe=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Me(e,t){return e(t)}function Ne(e,t,n,r,o){return e(t,n,r,o)}function Te(){}var Fe=Me,Pe=!1,Re=!1;function Be(){null===Ee&&null===Oe||(Te(),je())}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=Wr(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(E(231,t,typeof n));return n}var Le=!1;if(u)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Le=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(pe){Le=!1}var _e=!1,Ve=null,$e=!1,He=null,Ue={onError:function(e){_e=!0,Ve=e}};function We(e,t,n,r,o,i,a,s,u){_e=!1,Ve=null,function(e,t,n,r,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).flags)&&(n=t.return),e=t.return,e;);return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(E(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null!==i){if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ke(o),e;if(i===r)return Ke(o),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}else{if(null===(r=o.return))break;n=r}}if(3!==n.tag)throw Error(E(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ge(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return 1;t=t.return}}var Ye,Xe,Ze,et,tt=!1,nt=[],rt=null,ot=null,it=null,at=new Map,st=new Map,ut=[],lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ct(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":rt=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":it=null;break;case"pointerover":case"pointerout":at.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":st.delete(t.pointerId)}}function dt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=ct(t,n,r,o,i),null!==t&&null!==(t=Hr(t))&&Xe(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o)),e}function pt(e){if(null===e.blockedOn){for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Hr(n))&&Xe(t),e.blockedOn=n,0;t.shift()}return 1}}function ht(e,t,n){pt(e)&&n.delete(t)}function mt(){for(tt=!1;0<nt.length;){var e=nt[0];if(null!==e.blockedOn){null!==(e=Hr(e.blockedOn))&&Ye(e);break}for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&nt.shift()}null!==rt&&pt(rt)&&(rt=null),null!==ot&&pt(ot)&&(ot=null),null!==it&&pt(it)&&(it=null),at.forEach(ht),st.forEach(ht)}function vt(e,t){e.blockedOn===t&&(e.blockedOn=null,tt||(tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,mt)))}function gt(t){function e(e){return vt(e,t)}if(0<nt.length){vt(nt[0],t);for(var n=1;n<nt.length;n++){var r=nt[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==rt&&vt(rt,t),null!==ot&&vt(ot,t),null!==it&&vt(it,t),at.forEach(e),st.forEach(e),n=0;n<ut.length;n++)(r=ut[n]).blockedOn===t&&(r.blockedOn=null);for(;0<ut.length&&null===(n=ut[0]).blockedOn;)(function(e){var t=$r(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,et(e.lanePriority,function(){i.unstable_runWithPriority(e.priority,function(){Ze(n)})})}else if(3===t&&n.stateNode.hydrate)return e.blockedOn=3===n.tag?n.stateNode.containerInfo:null}e.blockedOn=null})(n),null===n.blockedOn&&ut.shift()}function yt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bt={animationend:yt("Animation","AnimationEnd"),animationiteration:yt("Animation","AnimationIteration"),animationstart:yt("Animation","AnimationStart"),transitionend:yt("Transition","TransitionEnd")},kt={},wt={};function xt(e){if(kt[e])return kt[e];if(!bt[e])return e;var t,n=bt[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return kt[e]=n[t];return e}u&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete bt.animationend.animation,delete bt.animationiteration.animation,delete bt.animationstart.animation),"TransitionEvent"in window||delete bt.transitionend.transition);var Dt=xt("animationend"),Ct=xt("animationiteration"),Et=xt("animationstart"),Ot=xt("transitionend"),St=new Map,At=new Map,jt=["abort","abort",Dt,"animationEnd",Ct,"animationIteration",Et,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o="on"+((o=e[n+1])[0].toUpperCase()+o.slice(1));At.set(r,t),St.set(r,o),a(o,[r])}}(0,i.unstable_now)();var Nt=8;function Tt(e){if(0!=(1&e))return Nt=15,1;if(0!=(2&e))return Nt=14,2;if(0!=(4&e))return Nt=13,4;var t=24&e;return 0!==t?(Nt=12,t):0!=(32&e)?(Nt=11,32):0!=(t=192&e)?(Nt=10,t):0!=(256&e)?(Nt=9,256):0!=(t=3584&e)?(Nt=8,t):0!=(4096&e)?(Nt=7,4096):0!=(t=4186112&e)?(Nt=6,t):0!=(t=62914560&e)?(Nt=5,t):67108864&e?(Nt=4,67108864):0!=(134217728&e)?(Nt=3,134217728):0!=(t=805306368&e)?(Nt=2,t):0!=(1073741824&e)?(Nt=1,1073741824):(Nt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Nt=0;var r,o=0,i=0,a=e.expiredLanes,s=e.suspendedLanes,u=e.pingedLanes;if(0!==a?(o=a,i=Nt=15):0!=(a=134217727&n)?0!=(r=a&~s)?(o=Tt(r),i=Nt):0!=(u&=a)&&(o=Tt(u),i=Nt):0!=(a=n&~s)?(o=Tt(a),i=Nt):0!==u&&(o=Tt(u),i=Nt),0===o)return 0;if(o=n&(((o=31-zt(o))<0?0:1<<o)<<1)-1,0!==t&&t!==o&&0==(t&s)){if(Tt(t),i<=Nt)return t;Nt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)i=1<<(n=31-zt(t)),o|=e[n],t&=~i;return o}function Pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Rt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Rt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Rt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&0===(e=Bt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(E(358,e))}function Bt(e){return e&-e}function It(e){for(var t=[],n=0;n<31;n++)t.push(e);return t}function Lt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32||function(e){return 0===e?32:31-(_t(e)/Vt|0)|0},_t=Math.log,Vt=Math.LN2,$t=i.unstable_UserBlockingPriority,Ht=i.unstable_runWithPriority,Ut=!0;function Wt(e,t,n,r){Pe||Te();var o=Jt,i=Pe;Pe=!0;try{Ne(o,e,t,n,r)}finally{(Pe=i)||Be()}}function qt(e,t,n,r){Ht($t,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var o;if(Ut)if((o=0==(4&t))&&0<nt.length&&-1<lt.indexOf(e))e=ct(null,e,t,n,r),nt.push(e);else{var i=Kt(e,t,n,r);if(null===i)o&&ft(e,r);else{if(o){if(-1<lt.indexOf(e))return e=ct(i,e,t,n,r),void nt.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return rt=dt(rt,e,t,n,r,o),1;case"dragenter":return ot=dt(ot,e,t,n,r,o),1;case"mouseover":return it=dt(it,e,t,n,r,o),1;case"pointerover":var i=o.pointerId;return at.set(i,dt(at.get(i)||null,e,t,n,r,o)),1;case"gotpointercapture":return i=o.pointerId,st.set(i,dt(st.get(i)||null,e,t,n,r,o)),1}}(i,e,t,n,r))return;ft(e,r)}xr(e,t,r,null,n)}}}function Kt(e,t,n,r){var o=De(r);if(null!==(o=$r(o))){var i=qe(o);if(null===i)o=null;else{var a=i.tag;if(13===a){if(null!==(o=Je(i)))return o;o=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return xr(e,t,r,o,n),null}var Qt=null,Gt=null,Yt=null;function Xt(){if(Yt)return Yt;for(var e=Gt,t=e.length,n=("value"in Qt?Qt.value:Qt.textContent),r=n.length,o=0;o<t&&e[o]===n[o];o++);for(var i=t-o,a=1;a<=i&&e[t-a]===n[r-a];a++);return Yt=n.slice(o,1<a?1-a:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(a){function e(e,t,n,r,o){for(var i in this._reactName=e,this._targetInst=n,this.type=t,this.nativeEvent=r,this.target=o,this.currentTarget=null,a)a.hasOwnProperty(i)&&(e=a[i],this[i]=e?e(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?en:tn,this.isPropagationStopped=tn,this}return m(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),e}var rn,on,an,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=nn(sn),n=m({},sn,{view:0,detail:0}),ln=nn(n),cn=m({},n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(on=an&&"mousemove"===e.type?(rn=e.screenX-an.screenX,e.screenY-an.screenY):rn=0,an=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=nn(cn),dn=nn(m({},cn,{dataTransfer:0})),pn=nn(m({},n,{relatedTarget:0})),hn=nn(m({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=nn(m({},sn,{clipboardData:function(e){return("clipboardData"in e?e:window).clipboardData}})),vn=nn(m({},sn,{data:0})),gn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function wn(){return kn}var xn=nn(m({},n,{key:function(e){if(e.key){var t=gn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Dn=nn(m({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=nn(m({},n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),En=nn(m({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=nn(m({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=[9,13,27,32],An=u&&"CompositionEvent"in window,cn=null;u&&"documentMode"in document&&(cn=document.documentMode);var jn=u&&"TextEvent"in window&&!cn,Mn=u&&(!An||cn&&8<cn&&cn<=11),Nn=String.fromCharCode(32),Tn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return 1;default:return}}function Pn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?Bn[e.type]:"textarea"===t}function Ln(e,t,n,r){Ae(r),0<(t=Cr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,_n=null;function Vn(e){vr(e,0)}function $n(e){if(Q(Ur(e)))return e}function Hn(e,t){if("change"===e)return t}var Un,Wn=!1;function qn(){zn&&(zn.detachEvent("onpropertychange",Jn),_n=zn=null)}function Jn(e){if("value"===e.propertyName&&$n(_n)){var t=[];if(Ln(t,_n,e,De(e)),e=Vn,Pe)e(t);else{Pe=!0;try{Me(e,t)}finally{Pe=!1,Be()}}}}function Kn(e,t,n){"focusin"===e?(qn(),_n=n,(zn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&qn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(_n)}function Gn(e,t){if("click"===e)return $n(t)}function Yn(e,t){if("input"===e||"change"===e)return $n(t)}u&&(Un=u&&((Un="oninput"in document)||((cn=document.createElement("div")).setAttribute("oninput","return;"),Un="function"==typeof cn.oninput),Un),Wn=Un&&(!document.documentMode||9<document.documentMode));var Xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Zn=Object.prototype.hasOwnProperty;function er(e,t){if(Xn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zn.call(t,n[r])||!Xn(e[n[r]],t[n[r]]))return!1;return!0}function tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nr(e,t){var n,r=tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tr(r)}}function rr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=u&&"documentMode"in document&&document.documentMode<=11,ar=null,sr=null,ur=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==G(r)||(r="selectionStart"in(r=ar)&&or(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ur&&er(ur,r)||(ur=r,0<(r=Cr(sr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(jt,2);for(var fr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),dr=0;dr<fr.length;dr++)At.set(fr[dr],0);s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hr=new Set("cancel close invalid load scroll toggle".split(" ").concat(pr));function mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(){if(We.apply(this,arguments),_e){if(!_e)throw Error(E(198));var e=Ve;_e=!1,Ve=null,$e||($e=!0,He=e)}}(r,t,void 0,e),e.currentTarget=null}function vr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=(o=e[n]).event,o=o.listeners;e:{var i=void 0;if(t)for(var a=o.length-1;0<=a;a--){var s=(l=o[a]).instance,u=l.currentTarget,l=l.listener;if(s!==i&&r.isPropagationStopped())break e;mr(r,l,u),i=s}else for(a=0;a<o.length;a++){if(s=(l=o[a]).instance,u=l.currentTarget,l=l.listener,s!==i&&r.isPropagationStopped())break e;mr(r,l,u),i=s}}}if($e)throw e=He,$e=!1,He=null,e}function gr(e,t){var n=qr(t),r=e+"__bubble";n.has(r)||(wr(t,e,2,!1),n.add(r))}var yr="_reactListening"+Math.random().toString(36).slice(2);function br(t){t[yr]||(t[yr]=!0,r.forEach(function(e){hr.has(e)||kr(e,!1,t,null),kr(e,!0,t,null)}))}function kr(e,t,n,r,o){var i=4<arguments.length&&void 0!==o?o:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&hr.has(e)){if("scroll"!==e)return;i|=2,o=r}n=qr(o),r=e+"__"+(t?"capture":"bubble");n.has(r)||(t&&(i|=4),wr(o,e,i,t),n.add(r))}function wr(e,t,n,r){var o=At.get(t);switch(void 0===o?2:o){case 0:o=Wt;break;case 1:o=qt;break;default:o=Jt}n=o.bind(null,t,n,e),o=!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t?void 0:!0,r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function xr(v,g,y,e,t){var b=e;if(0==(1&g)&&0==(2&g)&&null!==e)e:for(;;){if(null===e)return;var n=e.tag;if(3===n||4===n){var r=e.stateNode.containerInfo;if(r===t||8===r.nodeType&&r.parentNode===t)break;if(4===n)for(n=e.return;null!==n;){var o=n.tag;if((3===o||4===o)&&((o=n.stateNode.containerInfo)===t||8===o.nodeType&&o.parentNode===t))return;n=n.return}for(;null!==r;){if(null===(n=$r(r)))return;if(5===(o=n.tag)||6===o){e=b=n;continue e}r=r.parentNode}}e=e.return}!function(e){if(Re)return e();Re=!0;try{Fe(e,void 0,void 0)}finally{Re=!1,Be()}}(function(){var e,t,n,r=b,o=De(y),i=[];e:{var a=St.get(v);if(void 0!==a){var s=un,u=v;switch(v){case"keypress":if(0===Zt(y))break e;case"keydown":case"keyup":s=xn;break;case"focusin":u="focus",s=pn;break;case"focusout":u="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===y.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Dt:case Ct:case Et:s=hn;break;case Ot:s=En;break;case"scroll":s=ln;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}for(var l,c=!(d=0!=(4&g))&&"scroll"===v,f=d?null!==a?a+"Capture":null:a,d=[],p=r;null!==p;){var h=(l=p).stateNode;if(5===l.tag&&null!==h&&(l=h,null!==f&&null!=(h=Ie(p,f))&&d.push(Dr(p,h,l))),c)break;p=p.return}0<d.length&&(a=new s(a,u,null,y,o),i.push({event:a,listeners:d}))}}if(0==(7&g)){if(s="mouseout"===v||"pointerout"===v,(!(a="mouseover"===v||"pointerover"===v)||0!=(16&g)||!(u=y.relatedTarget||y.fromElement)||!$r(u)&&!u[_r])&&(s||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,s?(s=r,null!==(u=(u=y.relatedTarget||y.toElement)?$r(u):null)&&(u!==(c=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(s=null,u=r),s!==u)){if(d=fn,h="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==v&&"pointerover"!==v||(d=Dn,h="onPointerLeave",f="onPointerEnter",p="pointer"),c=null==s?a:Ur(s),l=null==u?a:Ur(u),(a=new d(h,p+"leave",s,y,o)).target=c,a.relatedTarget=l,h=null,$r(o)===r&&((d=new d(f,p+"enter",u,y,o)).target=l,d.relatedTarget=c,h=d),c=h,s&&u)e:{for(f=u,p=0,l=d=s;l;l=Er(l))p++;for(l=0,h=f;h;h=Er(h))l++;for(;0<p-l;)d=Er(d),p--;for(;0<l-p;)f=Er(f),l--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Er(d),f=Er(f)}d=null}else d=null;null!==s&&Or(i,a,s,d,!1),null!==u&&null!==c&&Or(i,c,u,d,!0)}switch("select"===(s=(a=r?Ur(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===s&&"file"===a.type?e=Hn:In(a)?Wn?e=Yn:(e=Qn,t=Kn):!(s=a.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type||(e=Gn),(e=e&&e(v,r))?Ln(i,e,y,o):(t&&t(v,a,r),"focusout"===v&&(t=a._wrapperState)&&t.controlled&&"number"===a.type&&ne(a,"number",a.value)),t=r?Ur(r):window,v){case"focusin":!In(t)&&"true"!==t.contentEditable||(ar=t,sr=r,ur=null);break;case"focusout":ur=sr=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(i,y,o);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":cr(i,y,o)}if(An)e:{switch(v){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Rn?Fn(v,y)&&(m="onCompositionEnd"):"keydown"===v&&229===y.keyCode&&(m="onCompositionStart");m&&(Mn&&"ko"!==y.locale&&(Rn||"onCompositionStart"!==m?"onCompositionEnd"===m&&Rn&&(n=Xt()):(Gt="value"in(Qt=o)?Qt.value:Qt.textContent,Rn=!0)),0<(t=Cr(r,m)).length&&(m=new vn(m,v,null,y,o),i.push({event:m,listeners:t}),!n&&null===(n=Pn(y))||(m.data=n))),(n=(jn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(Tn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Tn?null:e;default:return null}}:function(e,t){if(Rn)return"compositionend"===e||!An&&Fn(e,t)?(e=Xt(),Yt=Gt=Qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}})(v,y))&&0<(r=Cr(r,"onBeforeInput")).length&&(o=new vn("onBeforeInput","beforeinput",null,y,o),i.push({event:o,listeners:r}),o.data=n)}vr(i,g)})}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ie(e,n))&&r.unshift(Dr(e,i,o)),null!=(i=Ie(e,t))&&r.push(Dr(e,i,o))),e=e.return}return r}function Er(e){if(null===e)return null;for(;e=e.return,e&&5!==e.tag;);return e||null}function Or(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(u=Ie(n,i))&&a.unshift(Dr(n,u,s)):o||null!=(u=Ie(n,i))&&a.push(Dr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Sr(){}var Ar=null,jr=null;function Mr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Nr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tr="function"==typeof setTimeout?setTimeout:void 0,Fr="function"==typeof clearTimeout?clearTimeout:void 0;function Pr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Rr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Br(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ir=0,u=Math.random().toString(36).slice(2),Lr="__reactFiber$"+u,zr="__reactProps$"+u,_r="__reactContainer$"+u,Vr="__reactEvents$"+u;function $r(e){var t=e[Lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_r]||n[Lr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Br(e);null!==e;){if(n=e[Lr])return n;e=Br(e)}return t}n=(e=n).parentNode}return null}function Hr(e){return!(e=e[Lr]||e[_r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ur(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(E(33))}function Wr(e){return e[zr]||null}function qr(e){var t=e[Vr];return void 0===t&&(t=e[Vr]=new Set),t}var Jr=[],Kr=-1;function Qr(e){return{current:e}}function Gr(e){Kr<0||(e.current=Jr[Kr],Jr[Kr]=null,Kr--)}function Yr(e,t){Jr[++Kr]=e.current,e.current=t}var Xr={},Zr=Qr(Xr),eo=Qr(!1),to=Xr;function no(e,t){var n=e.type.contextTypes;if(!n)return Xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ro(e){return null!==(e=e.childContextTypes)&&void 0!==e}function oo(){Gr(eo),Gr(Zr)}function io(e,t,n){if(Zr.current!==Xr)throw Error(E(168));Yr(Zr,t),Yr(eo,n)}function ao(e,t,n){var r,o=e.stateNode;if(e=t.childContextTypes,"function"!=typeof o.getChildContext)return n;for(r in o=o.getChildContext())if(!(r in e))throw Error(E(108,W(t)||"Unknown",r));return m({},n,o)}function so(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,to=Zr.current,Yr(Zr,e),Yr(eo,eo.current),1}function uo(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=ao(e,t,to),r.__reactInternalMemoizedMergedChildContext=e,Gr(eo),Gr(Zr),Yr(Zr,e)):Gr(eo),Yr(eo,n)}var lo=null,co=null,fo=i.unstable_runWithPriority,po=i.unstable_scheduleCallback,ho=i.unstable_cancelCallback,mo=i.unstable_shouldYield,jt=i.unstable_requestPaint,vo=i.unstable_now,go=i.unstable_getCurrentPriorityLevel,yo=i.unstable_ImmediatePriority,bo=i.unstable_UserBlockingPriority,ko=i.unstable_NormalPriority,wo=i.unstable_LowPriority,xo=i.unstable_IdlePriority,Do={},Co=void 0!==jt?jt:function(){},Eo=null,Oo=null,So=!1,Ao=vo(),jo=Ao<1e4?vo:function(){return vo()-Ao};function Mo(){switch(go()){case yo:return 99;case bo:return 98;case ko:return 97;case wo:return 96;case xo:return 95;default:throw Error(E(332))}}function No(e){switch(e){case 99:return yo;case 98:return bo;case 97:return ko;case 96:return wo;case 95:return xo;default:throw Error(E(332))}}function To(e,t){return e=No(e),fo(e,t)}function Fo(e,t,n){return e=No(e),po(e,t,n)}function Po(){var e;null!==Oo&&(e=Oo,Oo=null,ho(e)),Ro()}function Ro(){if(!So&&null!==Eo){So=!0;var t=0;try{var n=Eo;To(99,function(){for(;t<n.length;t++)for(var e=n[t];e=e(!0),null!==e;);}),Eo=null}catch(e){throw null!==Eo&&(Eo=Eo.slice(t+1)),po(yo,Po),e}finally{So=!1}}}var Bo=k.ReactCurrentBatchConfig;function Io(e,t){if(e&&e.defaultProps){for(var n in t=m({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Lo=Qr(null),zo=null,_o=null,Vo=null;function $o(){Vo=_o=zo=null}function Ho(e){var t=Lo.current;Gr(Lo),e.type._context._currentValue=t}function Uo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Wo(e,t){(Vo=_o=null)!==(e=(zo=e).dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(wa=!0),e.firstContext=null)}function qo(e,t){if(Vo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Vo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===_o){if(null===zo)throw Error(E(308));_o=t,zo.dependencies={lanes:0,firstContext:t,responders:null}}else _o=_o.next=t;return e._currentValue}var Jo=!1;function Ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Qo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Go(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yo(e,t){var n;null!==(e=e.updateQueue)&&(null===(n=(e=e.shared).pending)?t.next=t:(t.next=n.next,n.next=t),e.pending=t)}function Xo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null}}while(null===i?o=i=a:i=i.next=a,null!==(n=n.next));null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n,0}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zo(e,t,n,r){var o=e.updateQueue;Jo=!1;var i,a,s,u,l=o.firstBaseUpdate,c=o.lastBaseUpdate;if(null!==(h=o.shared.pending)&&(o.shared.pending=null,a=(i=h).next,(i.next=null)===c?l=a:c.next=a,c=i,null===(s=e.alternate)||(u=(s=s.updateQueue).lastBaseUpdate)!==c&&(null===u?s.firstBaseUpdate=a:u.next=a,s.lastBaseUpdate=i)),null!==l){for(u=o.baseState,c=0,s=a=i=null;;){h=l.lane;var f=l.eventTime;if((r&h)===h){null!==s&&(s=s.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var d=e,p=l,h=t,f=n;switch(p.tag){case 1:if("function"==typeof(d=p.payload)){u=d.call(f,u,h);break e}u=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(h="function"==typeof(d=p.payload)?d.call(f,u,h):d)||void 0===h)break e;u=m({},u,h);break e;case 2:Jo=!0}}null!==l.callback&&(e.flags|=32,null===(h=o.effects)?o.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===s?(a=s=f,i=u):s=s.next=f,c|=h;if(null===(l=l.next)){if(null===(h=o.shared.pending))break;l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}null===s&&(i=u),o.baseState=i,o.firstBaseUpdate=a,o.lastBaseUpdate=s,gs|=c,e.lanes=c,e.memoizedState=u}}function ei(e,t,n){if(e=t.effects,(t.effects=null)!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(E(191,o));o.call(r)}}}var ti=(new o.Component).refs;function ni(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:m({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ri={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),o=Hs(e),i=Go(r,o);i.payload=t,null!=n&&(i.callback=n),Yo(e,i),Us(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),o=Hs(e),i=Go(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),Yo(e,i),Us(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=Hs(e),o=Go(n,r);o.tag=2,null!=t&&(o.callback=t),Yo(e,o),Us(e,r,n)}};function oi(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!(t.prototype&&t.prototype.isPureReactComponent&&er(n,r)&&er(o,i))}function ii(e,t,n){var r=!1,o=Xr,i=t.contextType;return t=new t(n,i="object"==typeof i&&null!==i?qo(i):(o=ro(t)?to:Zr.current,(r=null!==(r=t.contextTypes)&&void 0!==r)?no(e,o):Xr)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ri,(e.stateNode=t)._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ai(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ri.enqueueReplaceState(t,t.state,null)}function si(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=ti,Ko(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=qo(i):(i=ro(t)?to:Zr.current,o.context=no(e,i)),Zo(e,n,o,r),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(ni(e,0,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ri.enqueueReplaceState(o,o.state,null),Zo(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var ui=Array.isArray;function li(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===ti&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function ci(e,t){if("textarea"!==e.type)throw Error(E(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function fi(f){function d(e,t){var n;f&&(null!==(n=e.lastEffect)?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.flags=8)}function p(e,t){if(!f)return null;for(;null!==t;)d(e,t),t=t.sibling;return null}function h(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=vu(e,t)).index=0,e.sibling=null,e}function m(e,t,n){return e.index=n,f?null===(n=e.alternate)||(n=n.index)<t?(e.flags=2,t):n:t}function s(e){return f&&null===e.alternate&&(e.flags=2),e}function i(e,t,n,r){return null===t||6!==t.tag?(t=ku(n,e.mode,r)).return=e:(t=a(t,n)).return=e,t}function u(e,t,n,r){return null!==t&&t.elementType===n.type?(r=a(t,n.props)).ref=li(0,t,n):(r=gu(n.type,n.key,n.props,null,e.mode,r)).ref=li(0,t,n),r.return=e,r}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=wu(n,e.mode,r)).return=e:(t=a(t,n.children||[])).return=e,t}function c(e,t,n,r,o){return null===t||7!==t.tag?(t=yu(n,e.mode,r,o)).return=e:(t=a(t,n)).return=e,t}function v(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ku(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=gu(t.type,t.key,t.props,null,e.mode,n)).ref=li(0,null,t),n.return=e,n;case x:return(t=wu(t,e.mode,n)).return=e,t}if(ui(t)||V(t))return(t=yu(t,e.mode,n,null)).return=e,t;ci(e,t)}return null}function g(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:i(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?n.type===D?c(e,t,n.props.children,r,o):u(e,t,n,r):null;case x:return n.key===o?l(e,t,n,r):null}if(ui(n)||V(n))return null!==o?null:c(e,t,n,r,null);ci(e,n)}return null}function y(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return i(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===D?c(t,e,r.props.children,o,r.key):u(t,e,r,o);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(ui(r)||V(r))return c(t,e=e.get(n)||null,r,o,null);ci(t,r)}return null}return function(e,t,n,r){var o="object"==typeof n&&null!==n&&n.type===D&&null===n.key;o&&(n=n.props.children);var i="object"==typeof n&&null!==n;if(i)switch(n.$$typeof){case w:e:{for(i=n.key,o=t;null!==o;){if(o.key===i){if(7===o.tag){if(n.type===D){p(e,o.sibling),(t=a(o,n.props.children)).return=e,e=t;break e}}else if(o.elementType===n.type){p(e,o.sibling),(t=a(o,n.props)).ref=li(0,o,n),t.return=e,e=t;break e}p(e,o);break}d(e,o),o=o.sibling}e=n.type===D?((t=yu(n.props.children,e.mode,r,n.key)).return=e,t):((r=gu(n.type,n.key,n.props,null,e.mode,r)).ref=li(0,t,n),r.return=e,r)}return s(e);case x:e:{for(o=n.key;null!==t;){if(t.key===o){if(4===t.tag&&t.stateNode.containerInfo===n.containerInfo&&t.stateNode.implementation===n.implementation){p(e,t.sibling),(t=a(t,n.children||[])).return=e,e=t;break e}p(e,t);break}d(e,t),t=t.sibling}(t=wu(n,e.mode,r)).return=e,e=t}return s(e)}if("string"==typeof n||"number"==typeof n)return n=""+n,s(e=(null!==t&&6===t.tag?(p(e,t.sibling),(t=a(t,n)).return=e):(p(e,t),(t=ku(n,e.mode,r)).return=e),t));if(ui(n))return function(t,e,n,r){for(var o=null,i=null,a=e,s=e=0,u=null;null!==a&&s<n.length;s++){a.index>s?(u=a,a=null):u=a.sibling;var l=g(t,a,n[s],r);if(null===l){null===a&&(a=u);break}f&&a&&null===l.alternate&&d(t,a),e=m(l,e,s),null===i?o=l:i.sibling=l,i=l,a=u}if(s===n.length)return p(t,a),o;if(null===a){for(;s<n.length;s++)null!==(a=v(t,n[s],r))&&(e=m(a,e,s),null===i?o=a:i.sibling=a,i=a);return o}for(a=h(t,a);s<n.length;s++)null!==(u=y(a,t,s,n[s],r))&&(f&&null!==u.alternate&&a.delete(null===u.key?s:u.key),e=m(u,e,s),null===i?o=u:i.sibling=u,i=u);return f&&a.forEach(function(e){return d(t,e)}),o}(e,t,n,r);if(V(n))return function(t,e,n,r){var o=V(n);if("function"!=typeof o)throw Error(E(150));if(null==(n=o.call(n)))throw Error(E(151));for(var i=o=null,a=e,s=e=0,u=null,l=n.next();null!==a&&!l.done;s++,l=n.next()){a.index>s?(u=a,a=null):u=a.sibling;var c=g(t,a,l.value,r);if(null===c){null===a&&(a=u);break}f&&a&&null===c.alternate&&d(t,a),e=m(c,e,s),null===i?o=c:i.sibling=c,i=c,a=u}if(l.done)return p(t,a),o;if(null===a){for(;!l.done;s++,l=n.next())null!==(l=v(t,l.value,r))&&(e=m(l,e,s),null===i?o=l:i.sibling=l,i=l);return o}for(a=h(t,a);!l.done;s++,l=n.next())null!==(l=y(a,t,s,l.value,r))&&(f&&null!==l.alternate&&a.delete(null===l.key?s:l.key),e=m(l,e,s),null===i?o=l:i.sibling=l,i=l);return f&&a.forEach(function(e){return d(t,e)}),o}(e,t,n,r);if(i&&ci(e,n),void 0===n&&!o)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(E(152,W(e.type)||"Component"))}return p(e,t)}}var di=fi(!0),pi=fi(!1),hi={},mi=Qr(hi),vi=Qr(hi),gi=Qr(hi);function yi(e){if(e===hi)throw Error(E(174));return e}function bi(e,t){switch(Yr(gi,t),Yr(vi,e),Yr(mi,hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Gr(mi),Yr(mi,t)}function ki(){Gr(mi),Gr(vi),Gr(gi)}function wi(e){yi(gi.current);var t=yi(mi.current),n=fe(t,e.type);t!==n&&(Yr(vi,e),Yr(mi,n))}function xi(e){vi.current===e&&(Gr(mi),Gr(vi))}var Di=Qr(0);function Ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ei=null,Oi=null,Si=!1;function Ai(e,t){var n=hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ji(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,1);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,1);default:return}}function Mi(e){if(Si){var t=Oi;if(t){var n=t;if(!ji(e,t)){if(!(t=Rr(n.nextSibling))||!ji(e,t))return e.flags=-1025&e.flags|2,Ei=e,Si=!1;Ai(Ei,n)}Ei=e,Oi=Rr(t.firstChild)}else e.flags=-1025&e.flags|2,Si=!1,Ei=e}}function Ni(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ei=e}function Ti(e){if(e===Ei){if(!Si)return Ni(e),Si=!0,0;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Nr(t,e.memoizedProps))for(t=Oi;t;)Ai(e,t),t=Rr(t.nextSibling);if(Ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Oi=Rr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Oi=null}}else Oi=Ei?Rr(e.stateNode.nextSibling):null;return 1}}function Fi(){Oi=Ei=null,Si=!1}var Pi=[];function Ri(){for(var e=0;e<Pi.length;e++)Pi[e]._workInProgressVersionPrimary=null;Pi.length=0}var Bi=k.ReactCurrentDispatcher,Ii=k.ReactCurrentBatchConfig,Li=0,zi=null,_i=null,Vi=null,$i=!1,Hi=!1;function Ui(){throw Error(E(321))}function Wi(e,t){if(null!==t){for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return;return 1}}function qi(e,t,n,r,o,i){if(Li=i,(zi=t).memoizedState=null,t.updateQueue=null,t.lanes=0,Bi.current=null===e||null===e.memoizedState?ga:ya,e=n(r,o),Hi){i=0;do{if(Hi=!1,!(i<25))throw Error(E(301))}while(i+=1,Vi=_i=null,t.updateQueue=null,Bi.current=ba,e=n(r,o),Hi)}if(Bi.current=va,t=null!==_i&&null!==_i.next,Li=0,Vi=_i=zi=null,$i=!1,t)throw Error(E(300));return e}function Ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vi?zi.memoizedState=Vi=e:Vi=Vi.next=e,Vi}function Ki(){var e;e=null===_i?null!==(e=zi.alternate)?e.memoizedState:null:_i.next;var t=null===Vi?zi.memoizedState:Vi.next;if(null!==t)Vi=t,_i=e;else{if(null===e)throw Error(E(310));e={memoizedState:(_i=e).memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},null===Vi?zi.memoizedState=Vi=e:Vi=Vi.next=e}return Vi}function Qi(e,t){return"function"==typeof t?t(e):t}function Gi(e){var t=Ki(),n=t.queue;if(null===n)throw Error(E(311));n.lastRenderedReducer=e;var r,o=_i,i=o.baseQueue,a=n.pending;if(null!==a&&(null!==i&&(r=i.next,i.next=a.next,a.next=r),o.baseQueue=i=a,n.pending=null),null!==i){i=i.next,o=o.baseState;var s=r=a=null,u=i;do{var l,c=u.lane}while((Li&c)===c?(null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),o=u.eagerReducer===e?u.eagerState:e(o,u.action)):(l={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null},null===s?(r=s=l,a=o):s=s.next=l,zi.lanes|=c,gs|=c),null!==(u=u.next)&&u!==i);null===s?a=o:s.next=r,Xn(o,t.memoizedState)||(wa=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=s,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function Yi(e){var t=Ki(),n=t.queue;if(null===n)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;for(var a=o=o.next;i=e(i,a.action),a=a.next,a!==o;);Xn(i,t.memoizedState)||(wa=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xi(e,t,n){var r=(r=t._getVersion)(t._source),o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Li&e)===e)&&(t._workInProgressVersionPrimary=r,Pi.push(t))),e)return n(t._source);throw Pi.push(t),Error(E(350))}function Zi(e,i,a,t){var s=ls;if(null===s)throw Error(E(349));var u=i._getVersion,l=u(i._source),n=Bi.current,c=(r=n.useState(function(){return Xi(s,i,a)}))[1],f=r[0],r=Vi,d=(h=e.memoizedState).refs,o=d.getSnapshot,p=h.source,h=h.subscribe,m=zi;return e.memoizedState={refs:d,source:i,subscribe:t},n.useEffect(function(){d.getSnapshot=a,d.setSnapshot=c;var e=u(i._source);if(!Xn(l,e)){e=a(i._source),Xn(f,e)||(c(e),e=Hs(m),s.mutableReadLanes|=e&s.pendingLanes),e=s.mutableReadLanes,s.entangledLanes|=e;for(var t=s.entanglements,n=e;0<n;){var r=31-zt(n),o=1<<r;t[r]|=e,n&=~o}}},[a,i,t]),n.useEffect(function(){return t(i._source,function(){var e=d.getSnapshot,t=d.setSnapshot;try{t(e(i._source));var n=Hs(m);s.mutableReadLanes|=n&s.pendingLanes}catch(e){t(function(){throw e})}})},[i,t]),Xn(o,a)&&Xn(p,i)&&Xn(h,t)||((e={pending:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:f}).dispatch=c=ma.bind(null,zi,e),r.queue=e,r.baseQueue=null,f=Xi(s,i,a),r.memoizedState=r.baseState=f),f}function ea(e,t,n){return Zi(Ki(),e,t,n)}function ta(e){var t=Ji();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e}).dispatch=ma.bind(null,zi,e),[t.memoizedState,e]}function na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=zi.updateQueue)?(t={lastEffect:null},(zi.updateQueue=t).lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,(n.next=e).next=r,t.lastEffect=e),e}function ra(e){return e={current:e},Ji().memoizedState=e}function oa(){return Ki().memoizedState}function ia(e,t,n,r){var o=Ji();zi.flags|=e,o.memoizedState=na(1|t,n,void 0,void 0===r?null:r)}function aa(e,t,n,r){var o=Ki();r=void 0===r?null:r;var i=void 0;if(null!==_i){var a=_i.memoizedState,i=a.destroy;if(null!==r&&Wi(r,a.deps))return void na(t,n,i,r)}zi.flags|=e,o.memoizedState=na(1|t,n,i,r)}function sa(e,t){return ia(516,4,e,t)}function ua(e,t){return aa(516,4,e,t)}function la(e,t){return aa(4,2,e,t)}function ca(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function fa(e,t,n){return n=null!=n?n.concat([e]):null,aa(4,2,ca.bind(null,t,e),n)}function da(){}function pa(e,t){var n=Ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ha(e,t){var n=Ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ma(e,t,n){var r=$s(),o=Hs(e),i={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===zi||null!==a&&a===zi)Hi=$i=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(i.eagerReducer=a,i.eagerState=u,Xn(u,s))return}catch(e){}Us(e,o,r)}}var va={readContext:qo,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useOpaqueIdentifier:Ui,unstable_isNewReconciler:!1},ga={readContext:qo,useCallback:function(e,t){return Ji().memoizedState=[e,void 0===t?null:t],e},useContext:qo,useEffect:sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,2,ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,2,e,t)},useMemo:function(e,t){var n=Ji();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ma.bind(null,zi,e),[r.memoizedState,e]},useRef:ra,useState:ta,useDebugValue:da,useDeferredValue:function(t){var e=ta(t),n=e[0],r=e[1];return sa(function(){var e=Ii.transition;Ii.transition=1;try{r(t)}finally{Ii.transition=e}},[t]),n},useTransition:function(){var e=ta(!1),t=e[0];return ra(e=function(t,n){var e=Mo();To(e<98?98:e,function(){t(!0)}),To(97<e?97:e,function(){var e=Ii.transition;Ii.transition=1;try{t(!1),n()}finally{Ii.transition=e}})}.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Ji();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Zi(r,e,t,n)},useOpaqueIdentifier:function(){if(Si){var e=!1,t={$$typeof:R,toString:t=function(){throw e||(e=!0,n("r:"+(Ir++).toString(36))),Error(E(355))},valueOf:t},n=ta(t)[1];return 0==(2&zi.mode)&&(zi.flags|=516,na(5,function(){n("r:"+(Ir++).toString(36))},void 0,null)),t}var t;return ta(t="r:"+(Ir++).toString(36)),t},unstable_isNewReconciler:!1},ya={readContext:qo,useCallback:pa,useContext:qo,useEffect:ua,useImperativeHandle:fa,useLayoutEffect:la,useMemo:ha,useReducer:Gi,useRef:oa,useState:function(){return Gi(Qi)},useDebugValue:da,useDeferredValue:function(t){var e=Gi(Qi),n=e[0],r=e[1];return ua(function(){var e=Ii.transition;Ii.transition=1;try{r(t)}finally{Ii.transition=e}},[t]),n},useTransition:function(){var e=Gi(Qi)[0];return[oa().current,e]},useMutableSource:ea,useOpaqueIdentifier:function(){return Gi(Qi)[0]},unstable_isNewReconciler:!1},ba={readContext:qo,useCallback:pa,useContext:qo,useEffect:ua,useImperativeHandle:fa,useLayoutEffect:la,useMemo:ha,useReducer:Yi,useRef:oa,useState:function(){return Yi(Qi)},useDebugValue:da,useDeferredValue:function(t){var e=Yi(Qi),n=e[0],r=e[1];return ua(function(){var e=Ii.transition;Ii.transition=1;try{r(t)}finally{Ii.transition=e}},[t]),n},useTransition:function(){var e=Yi(Qi)[0];return[oa().current,e]},useMutableSource:ea,useOpaqueIdentifier:function(){return Yi(Qi)[0]},unstable_isNewReconciler:!1},ka=k.ReactCurrentOwner,wa=!1;function xa(e,t,n,r){t.child=null===e?pi(t,null,n,r):di(t,e.child,n,r)}function Da(e,t,n,r,o){n=n.render;var i=t.ref;return Wo(t,o),r=qi(e,t,n,r,i,o),null===e||wa?(t.flags|=1,xa(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Va(e,t,o))}function Ca(e,t,n,r,o,i){if(null!==e)return a=e.child,0==(o&i)&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:er)(o,r)&&e.ref===t.ref)?Va(e,t,i):(t.flags|=1,(e=vu(a,r)).ref=t.ref,(e.return=t).child=e);var a=n.type;return"function"!=typeof a||mu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=gu(n.type,null,r,t,t.mode,i)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,Ea(e,t,a,r,o,i))}function Ea(e,t,n,r,o,i){if(null!==e&&er(e.memoizedProps,r)&&e.ref===t.ref){if(wa=!1,0==(i&o))return t.lanes=e.lanes,Va(e,t,i);0!=(16384&e.flags)&&(wa=!0)}return Aa(e,t,n,r,i)}function Oa(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Xs(0,n);else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Xs(0,e),null;t.memoizedState={baseLanes:0},Xs(0,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Xs(0,r);return xa(e,t,o,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Aa(e,t,n,r,o){var i=no(t,i=ro(n)?to:Zr.current);return Wo(t,o),n=qi(e,t,n,r,i,o),null===e||wa?(t.flags|=1,xa(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Va(e,t,o))}function ja(e,t,n,r,o){var i,a,s,u,l,c,f,d,p,h;return ro(n)?(i=!0,so(t)):i=!1,Wo(t,o),r=null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ii(t,n,r),si(t,n,r,o),!0):null===e?(a=t.stateNode,s=t.memoizedProps,a.props=s,u=a.context,l="object"==typeof(l=n.contextType)&&null!==l?qo(l):no(t,l=ro(n)?to:Zr.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===l||ai(0,a,r,l),Jo=!1,d=t.memoizedState,a.state=d,Zo(t,r,a,o),u=t.memoizedState,s!==r||d!==u||eo.current||Jo?("function"==typeof c&&(ni(t,0,c,r),u=t.memoizedState),(s=Jo||oi(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,s):("function"==typeof a.componentDidMount&&(t.flags|=4),!1)):(a=t.stateNode,Qo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Io(t.type,s),a.props=l,f=t.pendingProps,d=a.context,u="object"==typeof(u=n.contextType)&&null!==u?qo(u):no(t,u=ro(n)?to:Zr.current),(c="function"==typeof(p=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===f&&d===u||ai(0,a,r,u),Jo=!1,d=t.memoizedState,a.state=d,Zo(t,r,a,o),h=t.memoizedState,s!==f||d!==h||eo.current||Jo?("function"==typeof p&&(ni(t,0,p,r),h=t.memoizedState),(l=Jo||oi(t,n,l,r,d,h,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),!1)),Ma(e,t,n,r,i,o)}function Ma(e,t,n,r,o,i){Sa(e,t);var a=0!=(64&t.flags);if(!r&&!a)return o&&uo(t,n,!1),Va(e,t,i);r=t.stateNode,ka.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=di(t,e.child,null,i),t.child=di(t,null,s,i)):xa(e,t,s,i),t.memoizedState=r.state,o&&uo(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?io(0,t.pendingContext,t.pendingContext!==t.context):t.context&&io(0,t.context,!1),bi(e,t.containerInfo)}var Ta,Fa,Pa,Ra={dehydrated:null,retryLane:0};function Ba(e,t,n){var r,o=t.pendingProps,i=Di.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),Yr(Di,1&i),null===e?(void 0!==o.fallback&&Mi(t),e=o.children,i=o.fallback,a?(e=Ia(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ra,e):"number"==typeof o.unstable_expectedLoadTime?(e=Ia(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ra,t.lanes=33554432,e):((n=bu({mode:"visible",children:e},t.mode,n,null)).return=t).child=n):(e.memoizedState,a?(o=function(e,t,n,r,o){var i=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&i)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,(t.lastEffect=a).nextEffect=null):t.firstEffect=t.lastEffect=null):n=vu(a,s),null!==e?r=vu(e,r):(r=yu(r,i,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,o.children,o.fallback,n),a=t.child,i=e.child.memoizedState,a.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ra,o):(r=e,i=t,a=o.children,e=n,o=r.child,r=o.sibling,a=vu(o,{mode:"visible",children:a}),0==(2&i.mode)&&(a.lanes=e),a.return=i,(a.sibling=null)!==r&&(r.nextEffect=null,r.flags=8,i.firstEffect=i.lastEffect=r),n=i.child=a,t.memoizedState=null,n))}function Ia(e,t,n,r){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=bu(t,o,0,null),n=yu(n,o,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function La(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Uo(e.return,t)}function za(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o,a.lastEffect=i)}function _a(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(xa(e,t,r.children,n),0!=(2&(r=Di.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&La(e,n);else if(19===e.tag)La(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Yr(Di,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ci(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),za(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ci(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}za(t,!0,n,null,i,t.lastEffect);break;case"together":za(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Va(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),gs|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(E(153));if(null!==t.child){for(n=vu(e=t.child,e.pendingProps),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=vu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!Si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e,t){try{for(var n="",r=t;n+=function(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 22:return U(e.type._render,!1);case 1:return U(e.type,!0);default:return""}}(r),r=r.return,r;);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function Ua(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}Ta=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,yi(mi.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"option":o=re(e,o),r=re(e,r),a=[];break;case"select":o=m({},o,{value:void 0}),r=m({},r,{value:void 0}),a=[];break;case"textarea":o=ie(e,o),r=ie(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Sr)}for(l in we(n,r),n=null,o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if("style"===l){var s=o[l];for(i in s)s.hasOwnProperty(i)&&(n=n||{},n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(c.hasOwnProperty(l)?a=a||[]:(a=a||[]).push(l,null));for(l in r){var u=r[l],s=null!=o?o[l]:void 0;if(r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(i in s)!s.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n=n||{},n[i]="");for(i in u)u.hasOwnProperty(i)&&s[i]!==u[i]&&(n=n||{},n[i]=u[i])}else n||(a=a||[]).push(l,n),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(c.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&gr("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===R?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Wa="function"==typeof WeakMap?WeakMap:Map;function qa(e,t,n){(n=Go(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Os||(Os=!0,Ss=r),Ua(0,t)},n}function Ja(e,t,n){(n=Go(-1,n)).tag=3;var r,o=e.type.getDerivedStateFromError;"function"==typeof o&&(r=t.value,n.payload=function(){return Ua(0,t),o(r)});e=e.stateNode;return null!==e&&"function"==typeof e.componentDidCatch&&(n.callback=function(){"function"!=typeof o&&(null===As?As=new Set([this]):As.add(this),Ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Ka="function"==typeof WeakSet?WeakSet:Set;function Qa(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){fu(t,e)}else e.current=null}function Ga(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{}while(3==(3&e.tag)&&(o=e.create,e.destroy=o()),(e=e.next)!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e,o=r.next;0!=(4&(r=r.tag))&&0!=(1&r)&&(uu(n,e),i=n,r=e,Ts.push(r,i),js||(js=!0,Fo(97,function(){return su(),null}))),e=o}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(o=n.elementType===n.type?t.memoizedProps:Io(n.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),null!==(t=n.updateQueue)&&ei(0,t,e),0;case 3:if(null!==(t=n.updateQueue)){if((e=null)!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ei(0,t,e)}return;case 5:return e=n.stateNode,null===t&&4&n.flags&&Mr(n.type,n.memoizedProps)&&e.focus(),0;case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return null===n.memoizedState&&(null!==(n=n.alternate)&&(null!==(n=n.memoizedState)&&(null!==(n=n.dehydrated)&&gt(n)))),0}var i;throw Error(E(163))}function Ya(e,t){for(var n=e;;){if(5===n.tag){var r,o=n.stateNode;t?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=n.stateNode,r=null!=(r=n.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,o.style.display=ye("display",r))}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n=(n.child.return=n).child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Xa(e,t){if(co&&"function"==typeof co.onCommitFiberUnmount)try{co.onCommitFiberUnmount(lo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=(o=n).destroy,o=o.tag;if(void 0!==r)if(0!=(4&o))uu(t,n);else{o=t;try{r()}catch(e){fu(o,e)}}}while((n=n.next)!==e)}break;case 1:if(Qa(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){fu(t,e)}break;case 5:Qa(t);break;case 4:ns(e,t)}}function Za(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function es(e){return 5===e.tag||3===e.tag||4===e.tag}function ts(e){e:{for(var t=e.return;null!==t;){if(es(t))break e;t=t.return}throw Error(E(160))}var n=t,t=n.stateNode;switch(n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(E(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||es(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.flags)){n=n.stateNode;break e}}(r?function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?(8===r.nodeType?r.parentNode:r).insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Sr));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}:function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling})(e,n,t)}function ns(e,t){for(var n,r,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(E(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var a=e,s=o,u=s;;)if(Xa(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=o.stateNode,(8===a.nodeType?a.parentNode:a).removeChild(s)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o=(o.child.return=o).child;continue}}else if(Xa(e,o),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function rs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null))for(var r=n=n.next;3==(3&r.tag)&&(e=r.destroy,(r.destroy=void 0)!==e&&e()),r=r.next,r!==n;);return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if((t.updateQueue=null)!==i){for(n[zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Z(n,r),xe(e,o),t=xe(e,r),o=0;o<i.length;o+=2){var a=i[o],s=i[o+1];"style"===a?be(n,s):"dangerouslySetInnerHTML"===a?he(n,s):"children"===a?me(n,s):b(n,a,s,t)}switch(e){case"input":ee(n,r);break;case"textarea":se(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(E(162));return t.stateNode.nodeValue=t.memoizedProps,0;case 3:return(n=t.stateNode).hydrate&&(n.hydrate=!1,gt(n.containerInfo)),0;case 13:return null!==t.memoizedState&&(ws=jo(),Ya(t.child,!0)),os(t),0;case 19:return os(t),0;case 23:case 24:return Ya(t,null!==t.memoizedState),0}throw Error(E(163))}function os(n){var r,e=n.updateQueue;null!==e&&((n.updateQueue=null)===(r=n.stateNode)&&(r=n.stateNode=new Ka),e.forEach(function(e){var t=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=0,0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Mo()?1:2:(0===Ls&&(Ls=vs),0===(t=Bt(62914560&~Ls))&&(t=4194304)),n=$s(),null!==(e=Ws(e,t))&&(Lt(e,t,n),qs(e,n))}.bind(null,n,e);r.has(e)||(r.add(e),e.then(t,t))}))}var is=Math.ceil,as=k.ReactCurrentDispatcher,ss=k.ReactCurrentOwner,us=0,ls=null,cs=null,fs=0,ds=0,ps=Qr(0),hs=0,ms=null,vs=0,gs=0,ys=0,bs=0,ks=null,ws=0,xs=1/0;function Ds(){xs=jo()+500}var Cs,Es=null,Os=!1,Ss=null,As=null,js=!1,Ms=null,Ns=90,Ts=[],Fs=[],Ps=null,Rs=0,Bs=null,Is=-1,Ls=0,zs=0,_s=null,Vs=!1;function $s(){return 0!=(48&us)?jo():-1!==Is?Is:Is=jo()}function Hs(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Mo()?1:2;if(0===Ls&&(Ls=vs),0===Bo.transition)return e=Mo(),e=Rt(0!=(4&us)&&98===e?12:e=function(){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(),Ls);0!==zs&&(zs=null!==ks?ks.pendingLanes:0),e=Ls;var t=4186112&~zs;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}function Us(e,t,n){if(50<Rs)throw Rs=0,Bs=null,Error(E(185));var r;null!==(e=Ws(e,t))&&(Lt(e,t,n),e===ls&&(ys|=t,4===hs&&Ks(e,fs)),r=Mo(),1===t?0!=(8&us)&&0==(48&us)?Qs(e):(qs(e,n),0===us&&(Ds(),Po())):(0==(4&us)||98!==r&&99!==r||(null===Ps?Ps=new Set([e]):Ps.add(e)),qs(e,n)),ks=e)}function Ws(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),e=(n=e).return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),e=(n=e).return;return 3===n.tag?n.stateNode:null}function qs(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-zt(a),u=1<<s,l=i[s];-1===l?0!=(u&r)&&0==(u&o)||(l=t,Tt(u),i[s]=10<=Nt?l+250:6<=Nt?l+5e3:-1):l<=t&&(e.expiredLanes|=u),a&=~u}if(r=Ft(e,e===ls?fs:0),t=Nt,0===r)null!==n&&(n!==Do&&ho(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Do&&ho(n)}n=15===t?(n=Qs.bind(null,e),null===Eo?(Eo=[n],Oo=po(yo,Ro)):Eo.push(n),Do):14===t?Fo(99,Qs.bind(null,e)):Fo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(E(358,e))}}(t),Js.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Js(t){if(Is=-1,(zs=Ls=0)!=(48&us))throw Error(E(327));var e=t.callbackNode;if(su()&&t.callbackNode!==e)return null;var n=Ft(t,t===ls?fs:0);if(0===n)return null;var r=n,o=us;us|=16;var i=nu();for(ls===t&&fs===r||(Ds(),eu(t,r));;)try{!function(){for(;null!==cs&&!mo();)ou(cs)}();break}catch(e){tu(t,e)}if($o(),as.current=i,us=o,r=null!==cs?0:(ls=null,fs=0,hs),0!=(vs&ys))eu(t,0);else if(0!==r){if(2===r&&(us|=64,t.hydrate&&(t.hydrate=!1,Pr(t.containerInfo)),0!==(n=Pt(t))&&(r=ru(t,n))),1===r)throw e=ms,eu(t,0),Ks(t,n),qs(t,jo()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(E(345));case 2:case 5:au(t);break;case 3:if(Ks(t,n),(62914560&n)===n&&10<(r=ws+500-jo())){if(0!==Ft(t,0))break;if(((o=t.suspendedLanes)&n)!==n){$s(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Tr(au.bind(null,t),r);break}au(t);break;case 4:if(Ks(t,n),(4186112&n)===n)break;for(r=t.eventTimes,o=-1;0<n;){var a=31-zt(n),i=1<<a;(a=r[a])>o&&(o=a),n&=~i}if(n=o,10<(n=((n=jo()-n)<120?120:n<480?480:n<1080?1080:n<1920?1920:n<3e3?3e3:n<4320?4320:1960*is(n/1960))-n)){t.timeoutHandle=Tr(au.bind(null,t),n);break}au(t);break;default:throw Error(E(329))}}return qs(t,jo()),t.callbackNode===e?Js.bind(null,t):null}function Ks(e,t){for(t&=~bs,t&=~ys,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function Qs(e){if(0!=(48&us))throw Error(E(327));var t,n;if(su(),e===ls&&0!=(e.expiredLanes&fs)?(n=ru(e,t=fs),0!=(vs&ys)&&(n=ru(e,t=Ft(e,t)))):n=ru(e,t=Ft(e,0)),0!==e.tag&&2===n&&(us|=64,e.hydrate&&(e.hydrate=!1,Pr(e.containerInfo)),0!==(t=Pt(e))&&(n=ru(e,t))),1===n)throw n=ms,eu(e,0),Ks(e,t),qs(e,jo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,au(e),qs(e,jo()),null}function Gs(e,t){var n=us;us|=1;try{return e(t)}finally{0===(us=n)&&(Ds(),Po())}}function Ys(e,t){var n=us;us&=-2,us|=8;try{return e(t)}finally{0===(us=n)&&(Ds(),Po())}}function Xs(e,t){Yr(ps,ds),ds|=t,vs|=t}function Zs(){ds=ps.current,Gr(ps)}function eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Fr(n)),null!==cs)for(n=cs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&oo();break;case 3:ki(),Gr(eo),Gr(Zr),Ri();break;case 5:xi(r);break;case 4:ki();break;case 13:case 19:Gr(Di);break;case 10:Ho(r);break;case 23:case 24:Zs()}n=n.return}cs=vu((ls=e).current,null),fs=ds=vs=t,ms=null,bs=ys=gs=hs=0}function tu(e,t){for(;;){var n=cs;try{if($o(),Bi.current=va,$i){for(var r=zi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}$i=!1}if(Li=0,Vi=_i=zi=null,Hi=!1,(ss.current=null)===n||null===n.return){hs=1,ms=t,cs=null;break}e:{var i=e,a=n.return,s=n,u=t;if(t=fs,s.flags|=2048,(s.firstEffect=s.lastEffect=null)!==u&&"object"==typeof u&&"function"==typeof u.then){var l,c=u;0==(2&s.mode)&&((l=s.alternate)?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null));var f,d=0!=(1&Di.current),p=a;do{if((h=13===p.tag)&&(h=null!==(f=p.memoizedState)?null!==f.dehydrated:void 0!==(m=p.memoizedProps).fallback&&(!0!==m.unstable_avoidThisFallback||!d)),h){var h,m=p.updateQueue;if(null===m?((h=new Set).add(c),p.updateQueue=h):m.add(c),0==(2&p.mode)){p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag&&(null===s.alternate?s.tag=17:((v=Go(-1,1)).tag=2,Yo(s,v))),s.lanes|=1;break e}u=void 0,s=t;var v=i.pingCache;null===v?(v=i.pingCache=new Wa,u=new Set,v.set(c,u)):void 0===(u=v.get(c))&&(u=new Set,v.set(c,u)),u.has(s)||(u.add(s),v=du.bind(null,i,c,s),c.then(v,v)),p.flags|=4096,p.lanes=t;break e}}while(null!==(p=p.return));u=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==hs&&(hs=2),u=Ha(u,s),p=a;do{switch(p.tag){case 3:i=u,p.flags|=4096,t&=-t,p.lanes|=t,Xo(p,qa(0,i,t));break e;case 1:i=u;var g=p.type,y=p.stateNode;if(0==(64&p.flags)&&("function"==typeof g.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===As||!As.has(y)))){p.flags|=4096,t&=-t,p.lanes|=t,Xo(p,Ja(p,i,t));break e}}}while(null!==(p=p.return))}iu(n)}catch(e){t=e,cs===n&&null!==n&&(cs=n=n.return);continue}break}}function nu(){var e=as.current;return as.current=va,null===e?va:e}function ru(t,e){var n=us;us|=16;var r=nu();for(ls===t&&fs===e||eu(t,e);;)try{!function(){for(;null!==cs;)ou(cs)}();break}catch(e){tu(t,e)}if($o(),us=n,as.current=r,null!==cs)throw Error(E(261));return ls=null,fs=0,hs}function ou(e){var t=Cs(e.alternate,e,ds);e.memoizedProps=e.pendingProps,null===t?iu(e):cs=t,ss.current=null}function iu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ro(t.type)&&oo(),null;case 3:return ki(),Gr(eo),Gr(Zr),Ri(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ti(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:xi(t);var o=yi(gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(E(166));return null}if(e=yi(mi.current),Ti(t)){r=t.stateNode,n=t.type;var i,a=t.memoizedProps;switch(r[Lr]=t,r[zr]=a,n){case"dialog":gr("cancel",r),gr("close",r);break;case"iframe":case"object":case"embed":gr("load",r);break;case"video":case"audio":for(e=0;e<pr.length;e++)gr(pr[e],r);break;case"source":gr("error",r);break;case"img":case"image":case"link":gr("error",r),gr("load",r);break;case"details":gr("toggle",r);break;case"input":X(r,a),gr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},gr("invalid",r);break;case"textarea":ae(r,a),gr("invalid",r)}for(i in we(n,a),e=null,a)a.hasOwnProperty(i)&&(o=a[i],"children"===i?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):c.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&gr("scroll",r));switch(n){case"input":K(r),te(r,a,!0);break;case"textarea":K(r),ue(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Sr)}r=e,null!==(t.updateQueue=r)&&(t.flags|=4)}else{switch(i=9===o.nodeType?o:o.ownerDocument,e===le&&(e=ce(n)),e===le?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Lr]=t,e[zr]=r,Ta(e,t),t.stateNode=e,i=xe(n,r),n){case"dialog":gr("cancel",e),gr("close",e),o=r;break;case"iframe":case"object":case"embed":gr("load",e),o=r;break;case"video":case"audio":for(o=0;o<pr.length;o++)gr(pr[o],e);o=r;break;case"source":gr("error",e),o=r;break;case"img":case"image":case"link":gr("error",e),gr("load",e),o=r;break;case"details":gr("toggle",e),o=r;break;case"input":X(e,r),o=Y(e,r),gr("invalid",e);break;case"option":o=re(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=m({},r,{value:void 0}),gr("invalid",e);break;case"textarea":ae(e,r),o=ie(e,r),gr("invalid",e);break;default:o=r}we(n,o);var s,u=o;for(a in u)u.hasOwnProperty(a)&&(s=u[a],"style"===a?be(e,s):"dangerouslySetInnerHTML"===a?null!=(s=s?s.__html:void 0)&&he(e,s):"children"===a?"string"==typeof s?"textarea"===n&&""===s||me(e,s):"number"==typeof s&&me(e,""+s):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=s&&"onScroll"===a&&gr("scroll",e):null!=s&&b(e,a,s,i)));switch(n){case"input":K(e),te(e,r,!1);break;case"textarea":K(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Sr)}Mr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Pa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(E(166));n=yi(gi.current),yi(mi.current),Ti(t)?(r=t.stateNode,n=t.memoizedProps,r[Lr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Lr]=t).stateNode=r}return null;case 13:return Gr(Di),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ti(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Di.current)?0===hs&&(hs=3):(0!==hs&&3!==hs||(hs=4),null===ls||0==(134217727&gs)&&0==(134217727&ys)||Ks(ls,fs))),(r||n)&&(t.flags|=4),null);case 4:return ki(),null===e&&br(t.stateNode.containerInfo),null;case 10:return Ho(t),null;case 19:if(Gr(Di),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(i=r.rendering))if(a)$a(r,!1);else{if(0!==hs||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(i=Ci(e))){for(t.flags|=64,$a(r,!1),null!==(a=i.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,(a.lastEffect=null)===(i=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Yr(Di,1&Di.current|2),t.child}e=e.sibling}null!==r.tail&&jo()>xs&&(t.flags|=64,$a(r,!(a=!0)),t.lanes=33554432)}else{if(!a)if(null!==(e=Ci(i))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!Si)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*jo()-r.renderingStartTime>xs&&1073741824!==n&&(t.flags|=64,$a(r,!(a=!0)),t.lanes=33554432);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=r.last)?n.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=jo(),n.sibling=null,t=Di.current,Yr(Di,a?1&t|2:1&t),n):null;case 23:case 24:return Zs(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(E(156,t.tag))}(n,t,ds)))return cs=n,0;if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&ds)||0==(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=function(e){switch(e.tag){case 1:ro(e.type)&&oo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(ki(),Gr(eo),Gr(Zr),Ri(),0!=(64&(t=e.flags)))throw Error(E(285));return e.flags=-4097&t|64,e;case 5:return xi(e),null;case 13:return Gr(Di),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Gr(Di),null;case 4:return ki(),null;case 10:return Ho(e),null;case 23:case 24:return Zs(),null;default:return null}}(t)))return n.flags&=2047,cs=n,0;null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return cs=t,0}while(cs=t=e,null!==t);0===hs&&(hs=5)}function au(e){var t=Mo();return To(99,function(e,t){for(;su(),null!==Ms;);if(0!=(48&us))throw Error(E(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a,s=e.eventTimes,u=e.expirationTimes;0<i;){var l=31-zt(i),c=1<<l;o[l]=0,s[l]=-1,u[l]=-1,i&=~c}if(null!==Ps&&0==(24&r)&&Ps.has(e)&&Ps.delete(e),e===ls&&(cs=ls=null,fs=0),r=1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,n.firstEffect):n:n.firstEffect,null!==r){if(o=us,us|=32,ss.current=null,Ar=Ut,or(s=rr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,i=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(e){u=null;break e}var f=0,d=-1,p=-1,h=0,m=0,v=s,g=null;t:for(;;){for(;v!==u||0!==i&&3!==v.nodeType||(d=f+i),v!==l||0!==c&&3!==v.nodeType||(p=f+c),3===v.nodeType&&(f+=v.nodeValue.length),null!==(a=v.firstChild);)g=v,v=a;for(;;){if(v===s)break t;if(g===u&&++h===i&&(d=f),g===l&&++m===c&&(p=f),null!==(a=v.nextSibling))break;g=(v=g).parentNode}v=a}u=-1===d||-1===p?null:{start:d,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;_s=null,Vs=Ut=!(jr={focusedElem:s,selectionRange:u}),Es=r;do{try{!function(){for(;null!==Es;){var e=Es.alternate;Vs||null===_s||(0!=(8&Es.flags)?Ge(Es,_s)&&(Vs=!0):13===Es.tag&&function(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}(e,Es)&&Ge(Es,_s)&&(Vs=!0));var t=Es.flags;0!=(256&t)&&function(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:var n,r;return 256&t.flags&&null!==e&&(n=e.memoizedProps,r=e.memoizedState,t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Io(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t);case 3:return 256&t.flags&&Pr(t.stateNode.containerInfo)}throw Error(E(163))}(e,Es),0==(512&t)||js||(js=!0,Fo(97,function(){return su(),null})),Es=Es.nextEffect}}()}catch(e){if(null===Es)throw Error(E(330));fu(Es,e),Es=Es.nextEffect}}while(null!==Es);_s=null,Es=r;do{try{for(s=e;null!==Es;){var y,b,k=Es.flags;switch(16&k&&me(Es.stateNode,""),128&k&&(null===(y=Es.alternate)||null!==(b=y.ref)&&("function"==typeof b?b(null):b.current=null)),1038&k){case 2:ts(Es),Es.flags&=-3;break;case 6:ts(Es),Es.flags&=-3,rs(Es.alternate,Es);break;case 1024:Es.flags&=-1025;break;case 1028:Es.flags&=-1025,rs(Es.alternate,Es);break;case 4:rs(Es.alternate,Es);break;case 8:ns(s,u=Es);var w=u.alternate;Za(u),null!==w&&Za(w)}Es=Es.nextEffect}}catch(e){if(null===Es)throw Error(E(330));fu(Es,e),Es=Es.nextEffect}}while(null!==Es);if(b=jr,y=rr(),k=b.focusedElem,s=b.selectionRange,y!==k&&k&&k.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(k.ownerDocument.documentElement,k)){null!==s&&or(k)&&(y=s.start,void 0===(b=s.end)&&(b=y),"selectionStart"in k?(k.selectionStart=y,k.selectionEnd=Math.min(b,k.value.length)):(b=(y=k.ownerDocument||document)&&y.defaultView||window).getSelection&&(b=b.getSelection(),u=k.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!b.extend&&s<w&&(u=s,s=w,w=u),u=nr(k,w),i=nr(k,s),u&&i&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==i.node||b.focusOffset!==i.offset)&&((y=y.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),s<w?(b.addRange(y),b.extend(i.node,i.offset)):(y.setEnd(i.node,i.offset),b.addRange(y))))),y=[];for(b=k;b=b.parentNode;)1===b.nodeType&&y.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof k.focus&&k.focus(),k=0;k<y.length;k++)(b=y[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Ut=!!Ar,jr=Ar=null,e.current=n,Es=r;do{try{for(k=e;null!==Es;){var x,D,C=Es.flags;36&C&&Ga(k,Es.alternate,Es),128&C&&(y=void 0,null!==(x=Es.ref)&&(D=Es.stateNode,Es.tag,y=D,"function"==typeof x?x(y):x.current=y)),Es=Es.nextEffect}}catch(e){if(null===Es)throw Error(E(330));fu(Es,e),Es=Es.nextEffect}}while(null!==Es);Es=null,Co(),us=o}else e.current=n;if(js)js=!1,Ms=e,Ns=t;else for(Es=r;null!==Es;)t=Es.nextEffect,Es.nextEffect=null,8&Es.flags&&((C=Es).sibling=null,C.stateNode=null),Es=t;if(0===(r=e.pendingLanes)&&(As=null),1===r?e===Bs?Rs++:(Rs=0,Bs=e):Rs=0,n=n.stateNode,co&&"function"==typeof co.onCommitFiberRoot)try{co.onCommitFiberRoot(lo,n,void 0,64==(64&n.current.flags))}catch(e){}if(qs(e,jo()),Os)throw Os=!1,e=Ss,Ss=null,e;return 0!=(8&us)||Po(),null}.bind(null,e,t)),null}function su(){if(90===Ns)return!1;var e=97<Ns?97:Ns;return Ns=90,To(e,lu)}function uu(e,t){Fs.push(t,e),js||(js=!0,Fo(97,function(){return su(),null}))}function lu(){if(null===Ms)return!1;var e=Ms;if(Ms=null,0!=(48&us))throw Error(E(331));var t=us;us|=32;var n=Fs;Fs=[];for(var r=0;r<n.length;r+=2){var o=n[r],i=n[r+1],a=o.destroy;if(o.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===i)throw Error(E(330));fu(i,e)}}for(n=Ts,Ts=[],r=0;r<n.length;r+=2){o=n[r],i=n[r+1];try{var s=o.create;o.destroy=s()}catch(e){if(null===i)throw Error(E(330));fu(i,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return us=t,Po(),!0}function cu(e,t,n){Yo(e,t=qa(0,t=Ha(n,t),1)),t=$s(),null!==(e=Ws(e,1))&&(Lt(e,1,t),qs(e,t))}function fu(e,t){if(3===e.tag)cu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){cu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===As||!As.has(r))){var o=Ja(n,e=Ha(t,e),1);if(Yo(n,o),o=$s(),null!==(n=Ws(n,1)))Lt(n,1,o),qs(n,o);else if("function"==typeof r.componentDidCatch&&(null===As||!As.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,ls===e&&(fs&n)===n&&(4===hs||3===hs&&(62914560&fs)===fs&&jo()-ws<500?eu(e,0):bs|=n),qs(e,t)}function pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function hu(e,t,n,r){return new pu(e,t,n,r)}function mu(e){return(e=e.prototype)&&e.isReactComponent}function vu(e,t){var n=e.alternate;return null===n?((n=hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gu(e,t,n,r,o,i){var a=2;if("function"==typeof(r=e))mu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case D:return yu(n.children,o,i,t);case B:a=8,o|=16;break;case C:a=8,o|=1;break;case O:return(e=hu(12,n,t,8|o)).elementType=O,e.type=O,e.lanes=i,e;case M:return(e=hu(13,n,t,o)).type=M,e.elementType=M,e.lanes=i,e;case N:return(e=hu(19,n,t,o)).elementType=N,e.lanes=i,e;case I:return bu(n,o,i,t);case L:return(e=hu(24,n,t,o)).elementType=L,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case S:a=10;break e;case A:a=9;break e;case j:a=11;break e;case T:a=14;break e;case F:a=16,r=null;break e;case P:a=22;break e}throw Error(E(130,null==e?e:typeof e,""))}return(t=hu(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function yu(e,t,n,r){return(e=hu(7,e,r,t)).lanes=n,e}function bu(e,t,n,r){return(e=hu(23,e,r,t)).elementType=I,e.lanes=n,e}function ku(e,t,n){return(e=hu(6,e,null,t)).lanes=n,e}function wu(e,t,n){return(t=hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=It(0),this.expirationTimes=It(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.mutableSourceEagerHydrationData=null}function Du(e,t,n,r){var o=t.current,i=$s(),a=Hs(o);e:if(n){t:{if(qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(E(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ro(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}}while(null!==(s=s.return));throw Error(E(171))}if(1===n.tag){var u=n.type;if(ro(u)){n=ao(n,u,s);break e}}n=s}else n=Xr;return null===t.context?t.context=n:t.pendingContext=n,(t=Go(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Yo(o,t),Us(o,a,i),a}function Cu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Eu(e,t){var n;null!==(e=e.memoizedState)&&null!==e.dehydrated&&(n=e.retryLane,e.retryLane=0!==n&&n<t?n:t)}function Ou(e,t){Eu(e,t),(e=e.alternate)&&Eu(e,t)}function Su(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new xu(e,t,null!=n&&!0===n.hydrate),t=hu(3,null,null,2===t?7:1===t?3:0),(n.current=t).stateNode=n,Ko(t),e[_r]=n.current,br(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(o=(t=r[e])._getVersion)(t._source);null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function Au(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType||8===e.nodeType&&" react-mount-point-unstable "===e.nodeValue)}function ju(e,t,n,r,o){var i,a,s,u=n._reactRootContainer;return u?(s=u._internalRoot,"function"==typeof o&&(i=o,o=function(){var e=Cu(s);i.call(e)}),Du(t,s,e,o)):(s=(u=n._reactRootContainer=function(e,t){if(!(t=t||!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))))for(var n;n=e.lastChild;)e.removeChild(n);return new Su(e,0,t?{hydrate:!0}:void 0)}(n,r))._internalRoot,"function"==typeof o&&(a=o,o=function(){var e=Cu(s);a.call(e)}),Ys(function(){Du(t,s,e,o)})),Cu(s)}function Mu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Au(t))throw Error(E(200));return function(e,t,n,r){return{$$typeof:x,key:null==(r=3<arguments.length&&void 0!==r?r:null)?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Cs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||eo.current)wa=!0;else{if(0==(n&r)){switch(wa=!1,t.tag){case 3:Na(t),Fi();break;case 5:wi(t);break;case 1:ro(t.type)&&so(t);break;case 4:bi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;Yr(Lo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ba(e,t,n):(Yr(Di,1&Di.current),null!==(t=Va(e,t,n))?t.sibling:null);Yr(Di,1&Di.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return _a(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Yr(Di,Di.current),r)break;return null;case 23:case 24:return t.lanes=0,Oa(e,t,n)}return Va(e,t,n)}wa=0!=(16384&e.flags)}else wa=!1;switch(t.lanes=0,t.tag){case 2:var i,a,r=t.type;return null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=no(t,Zr.current),Wo(t,n),o=qi(null,t,r,e,o,n),t.flags|=1,t="object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ro(r)?(i=!0,so(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ko(t),"function"==typeof(a=r.getDerivedStateFromProps)&&ni(t,0,a,e),o.updater=ri,si((t.stateNode=o)._reactInternals=t,r,e,n),Ma(null,t,r,!0,i,n)):(t.tag=0,xa(null,t,o,n),t.child);case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"==typeof e)return mu(e)?1:0;if(null!=e){if((e=e.$$typeof)===j)return 11;if(e===T)return 14}return 2}(o),e=Io(o,e),i){case 0:t=Aa(null,t,o,e,n);break e;case 1:t=ja(null,t,o,e,n);break e;case 11:t=Da(null,t,o,e,n);break e;case 14:t=Ca(null,t,o,Io(o.type,e),r,n);break e}throw Error(E(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Aa(e,t,r,o=t.elementType===r?o:Io(r,o),n);case 1:return r=t.type,o=t.pendingProps,ja(e,t,r,o=t.elementType===r?o:Io(r,o),n);case 3:if(Na(t),r=t.updateQueue,null===e||null===r)throw Error(E(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,Qo(e,t),Zo(t,r,null,n),(r=t.memoizedState.element)===o)Fi(),t=Va(e,t,n);else{if((i=(o=t.stateNode).hydrate)&&(Oi=Rr(t.stateNode.containerInfo.firstChild),Ei=t,i=Si=!0),i){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(i=e[o])._workInProgressVersionPrimary=e[o+1],Pi.push(i);for(n=pi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else xa(e,t,r,n),Fi();t=t.child}return t;case 5:return wi(t),null===e&&Mi(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,Nr(r,o)?a=null:null!==i&&Nr(r,i)&&(t.flags|=16),Sa(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&Mi(t),null;case 13:return Ba(e,t,n);case 4:return bi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=di(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Da(e,t,r,o=t.elementType===r?o:Io(r,o),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var s=t.type._context;if(Yr(Lo,s._currentValue),s._currentValue=i,null!==a)if(s=a.value,0==(i=Xn(s,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,i):1073741823))){if(a.children===o.children&&!eo.current){t=Va(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&i)){1===s.tag&&((l=Go(-1,n&-n)).tag=2,Yo(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Uo(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,Wo(t,n),r=r(o=qo(o,i.unstable_observedBits)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=Io(o=t.type,t.pendingProps),Ca(e,t,o,i=Io(o.type,i),r,n);case 15:return Ea(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Io(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ro(r)?(e=!0,so(t)):e=!1,Wo(t,n),ii(t,r,o),si(t,r,o,n),Ma(null,t,r,!0,e,n);case 19:return _a(e,t,n);case 23:case 24:return Oa(e,t,n)}throw Error(E(156,t.tag))},Su.prototype.render=function(e){Du(e,this._internalRoot,null,null)},Su.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Du(null,e,null,function(){t[_r]=null})},Ye=function(e){13===e.tag&&(Us(e,4,$s()),Ou(e,4))},Xe=function(e){13===e.tag&&(Us(e,67108864,$s()),Ou(e,67108864))},Ze=function(e){var t,n;13===e.tag&&(t=$s(),Us(e,n=Hs(e),t),Ou(e,n))},et=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Wr(r);if(!o)throw Error(E(90));Q(r),ee(r,o)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Me=Gs,Ne=function(e,t,n,r,o){var i=us;us|=4;try{return To(98,e.bind(null,t,n,r,o))}finally{0===(us=i)&&(Ds(),Po())}},Te=function(){var e;0==(49&us)&&(null!==Ps&&(e=Ps,Ps=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,qs(e,jo())})),Po(),su())};var u={Events:[Hr,Ur,Wr,Ae,je,su,{current:!(Fe=function(e,t){var n=us;us|=2;try{return e(t)}finally{0===(us=n)&&(Ds(),Po())}})}]},jt={findFiberByHostInstance:$r,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Nu={bundleType:jt.bundleType,version:jt.version,rendererPackageName:jt.rendererPackageName,rendererConfig:jt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:jt.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{lo=Tu.inject(Nu),co=Tu}catch(pe){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u,t.createPortal=Mu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0!==t)return null===(e=Qe(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(E(188));throw Error(E(268,Object.keys(e)))},t.flushSync=function(e,t){var n=us;if(0!=(48&n))return e(t);us|=1;try{if(e)return To(99,e.bind(null,t))}finally{us=n,Po()}},t.hydrate=function(e,t,n){if(!Au(t))throw Error(E(200));return ju(null,e,t,!0,n)},t.render=function(e,t,n){if(!Au(t))throw Error(E(200));return ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Au(e))throw Error(E(40));return!!e._reactRootContainer&&(Ys(function(){ju(null,null,e,!1,function(){e._reactRootContainer=null,e[_r]=null})}),!0)},t.unstable_batchedUpdates=Gs,t.unstable_createPortal=function(e,t){return Mu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Au(n))throw Error(E(200));if(null==e||void 0===e._reactInternals)throw Error(E(38));return ju(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(10)},function(e,i,t){"use strict";var n,r,o,a,s,u,l,c,f,d,p,h,m,v,g,y,b,k;function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<C(o,t)))break e;e[r]=t,e[n]=o,n=r}}function x(e){return void 0===(e=e[0])?null:e}function D(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,a=e[i],s=1+i,u=e[s];if(void 0!==a&&C(a,n)<0)r=void 0!==u&&C(u,a)<0?(e[r]=u,e[s]=n,s):(e[r]=a,e[i]=n,i);else{if(!(void 0!==u&&C(u,n)<0))break e;e[r]=u,e[s]=n,r=s}}}return t}}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}"object"==typeof performance&&"function"==typeof performance.now?(n=performance,i.unstable_now=function(){return n.now()}):(r=Date,o=r.now(),i.unstable_now=function(){return r.now()-o}),"undefined"==typeof window||"function"!=typeof MessageChannel?(s=a=null,u=function t(){if(null!==a)try{var e=i.unstable_now();a(!0,e),a=null}catch(e){throw setTimeout(t,0),e}},l=function(e){null!==a?setTimeout(l,0,e):(a=e,setTimeout(u,0))},c=function(e,t){s=setTimeout(e,t)},f=function(){clearTimeout(s)},i.unstable_shouldYield=function(){return!1},B=i.unstable_forceFrameRate=function(){}):(d=window.setTimeout,p=window.clearTimeout,"undefined"!=typeof console&&(b=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),h=!1,m=null,v=-1,g=5,y=0,i.unstable_shouldYield=function(){return i.unstable_now()>=y},B=function(){},i.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5},b=new MessageChannel,k=b.port2,b.port1.onmessage=function(){if(null!==m){var e=i.unstable_now();y=e+g;try{m(!0,e)?k.postMessage(null):(h=!1,m=null)}catch(e){throw k.postMessage(null),e}}else h=!1},l=function(e){m=e,h||(h=!0,k.postMessage(null))},c=function(e,t){v=d(function(){e(i.unstable_now())},t)},f=function(){p(v),v=-1});var E=[],O=[],S=1,A=null,j=3,M=!1,N=!1,T=!1;function F(e){for(var t=x(O);null!==t;){if(null===t.callback)D(O);else{if(!(t.startTime<=e))break;D(O),t.sortIndex=t.expirationTime,w(E,t)}t=x(O)}}function P(e){var t;T=!1,F(e),N||(null!==x(E)?(N=!0,l(R)):null!==(t=x(O))&&c(P,t.startTime-e))}function R(e,t){N=!1,T&&(T=!1,f()),M=!0;var n=j;try{for(F(t),A=x(E);null!==A&&(!(A.expirationTime>t)||e&&!i.unstable_shouldYield());){var r=A.callback;"function"==typeof r?(A.callback=null,j=A.priorityLevel,r=r(A.expirationTime<=t),t=i.unstable_now(),"function"==typeof r?A.callback=r:A===x(E)&&D(E),F(t)):D(E),A=x(E)}var o=null!==A||(null!==(o=x(O))&&c(P,o.startTime-t),!1);return o}finally{A=null,j=n,M=!1}}var B=B;i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(e){e.callback=null},i.unstable_continueExecution=function(){N||M||(N=!0,l(R))},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return x(E)},i.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=B,i.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},i.unstable_scheduleCallback=function(e,t,n){var r=i.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:S++,callback:t,priorityLevel:e,startTime:n,expirationTime:o=n+o,sortIndex:-1},r<n?(e.sortIndex=n,w(O,e),null===x(E)&&e===x(O)&&(T?f():T=!0,c(P,n-r))):(e.sortIndex=o,w(E,e),N||M||(N=!0,l(R))),e},i.unstable_wrapCallback=function(t){var n=j;return function(){var e=j;j=n;try{return t.apply(this,arguments)}finally{j=e}}}},function(e,t,n){"use strict";n(4);var r=n(1),s=60103;t.Fragment=60107,"function"==typeof Symbol&&Symbol.for&&(s=(n=Symbol.for)("react.element"),t.Fragment=n("react.fragment"));var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)l.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:u.current}}t.jsx=o,t.jsxs=o},function(e,t,n){"use strict";function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){$(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function H(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}n.r(t);var U=n(1),W=n.n(U),i=n(2),a=n.n(i);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){C=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new k(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;var r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(r){if(r===c)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";r=l(o,i,a);if("normal"===r.type){if(s=a.done?"completed":"suspendedYield",r.arg===c)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s="completed",a.method="throw",a.arg=r.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function d(){}function p(){}var h={};i(h,r,function(){return this});t=Object.getPrototypeOf,t=t&&t(t(w([])));t&&t!==e&&u.call(t,r)&&(h=t);var m=p.prototype=f.prototype=Object.create(h);function v(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function g(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){e=l(a[e],a,n);if("throw"!==e.type){var i=e.arg,n=i.value;return n&&"object"==D(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)})}o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function w(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return e.next=e}}return{next:x}}function x(){return{value:void 0,done:!0}}return i(m,"constructor",d.prototype=p),i(p,"constructor",d),d.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},a.awrap=function(e){return{__await:e}},v(g.prototype),i(g.prototype,n,function(){return this}),a.AsyncIterator=g,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new g(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},v(m),i(m,o,"Generator"),i(m,r,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=w,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,b(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e),0}s.done?t(u):Promise.resolve(u).then(r,o)}function g(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(n){var r=y();return function(){var e,t=v(n);return function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,r?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function k(e){var t=e.children,n=e.onResize,r=e.style,o=e.title,i=Object(U.useContext)(O).stylesUrl,a=q(Object(U.useState)(!i),2),e=a[0],s=a[1],i=Object(S.jsxs)(S.Fragment,{children:[i?Object(S.jsx)("link",{rel:"stylesheet",href:i,onLoad:function(){s(!0)}}):null,Object(S.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        body, html {\n            overflow: hidden;\n        }\n    "}}),Object(S.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0"})]});return Object(S.jsx)(j,{head:i,style:r,onResize:n,title:o,children:e&&t})}function w(e){var t=e.children,n=e.style,r=e.title,n=(e=q(Object(U.useState)(n),2))[0],o=e[1],e=Object(U.useCallback)(function(t){o(function(e){return p(p({},e),{},{height:"".concat(t.scrollHeight,"px")})})},[]);return Object(S.jsx)(k,{style:n,onResize:e,title:r,children:t})}function x(e){return e=e.children,Object(S.jsx)(w,{style:{width:"100%",height:"400px"},title:"comments-frame",children:e})}function E(e){var t=e.children,e=e.title;return Object(S.jsx)(k,{style:{zIndex:"3999999",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden"},title:e,children:t})}var O=n(1).createContext({}),S=n(0),A=["children","head","title","style","onResize"],j=function(){m(n,U.Component);var t=b(n);function n(){var e;return d(this,n),(e=t.call(this)).handleLoad=function(){e.setupFrameBaseStyle()},e.setNode=e.setNode.bind(c(e)),e.node=null,e}return h(n,[{key:"componentDidMount",value:function(){this.node.addEventListener("load",this.handleLoad)}},{key:"componentWillUnmount",value:function(){this.node.removeEventListener("load",this.handleLoad)}},{key:"setupFrameBaseStyle",value:function(){var e,t,n=this;this.node.contentDocument&&(this.iframeHtml=this.node.contentDocument.documentElement,this.iframeHead=this.node.contentDocument.head,this.iframeRoot=this.node.contentDocument.body,this.forceUpdate(),this.props.onResize&&(null===(e=new ResizeObserver(function(e){return n.props.onResize(n.iframeRoot)}))||void 0===e||null===(t=e.observe)||void 0===t||t.call(e,this.iframeRoot)),this.node.contentWindow.addEventListener("keydown",function(e){window.dispatchEvent(new KeyboardEvent("keydown",e))}))}},{key:"setNode",value:function(e){this.node=e}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.head,r=e.title,o=void 0===r?"":r,r=e.style,r=void 0===r?{}:r,e=(e.onResize,H(e,A));return Object(S.jsxs)("iframe",p(p({srcDoc:"<!DOCTYPE html>"},e),{},{ref:this.setNode,title:o,style:r,frameBorder:"0",children:[this.iframeHead&&Object(i.createPortal)(n,this.iframeHead),this.iframeRoot&&Object(i.createPortal)(t,this.iframeRoot)]}))}}]),n}();function M(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){return(N=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,o=1,n.pagination&&n.pagination.page&&(o=n.pagination.page+1),e.next=5,r.comments.browse({page:o,postId:n.postId});case 5:return o=e.sent,e.abrupt("return",{comments:[].concat(M(n.comments),M(o.comments)),pagination:o.meta.pagination});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=g(C().mark(function e(t){var n,r,o,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,i=t.data,o=i.comment,i=i.limit,e.next=3,r.comments.replies({commentId:o.id,afterReplyId:null===(r=o.replies[o.replies.length-1])||void 0===r?void 0:r.id,limit:i});case 3:return a=e.sent,e.abrupt("return",{comments:n.comments.map(function(e){return e.id===o.id?p(p({},o),{},{replies:[].concat(M(o.replies),M(a.comments))}):e})});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.api,r=t.data,e.next=3,o.comments.add({comment:r});case 3:return o=e.sent,r=o.comments[0],e.abrupt("return",{comments:[r].concat(M(n.comments)),commentCount:n.commentCount+1});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=g(C().mark(function e(t){var n,r,o,i,a,s;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,s=t.api,r=t.data,o=r.reply,i=r.parent,(a=o).parent_id=i.id,e.next=5,s.comments.add({comment:a});case 5:return s=e.sent,a=s.comments[0],e.abrupt("return",{comments:n.comments.map(function(e){return e.id===i.id?p(p({},i),{},{replies:[].concat(M(i.replies),[a]),count:p(p({},i.count),{},{replies:i.count.replies+1})}):e}),commentCount:n.commentCount+1});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.adminApi,o=t.data,e.next=3,r.hideComment(o.id);case 3:return e.abrupt("return",{comments:n.comments.map(function(e){var t=e.replies.map(function(e){return e.id===o.id?p(p({},e),{},{status:"hidden"}):e});return e.id===o.id?p(p({},e),{},{status:"hidden",replies:t}):p(p({},e),{},{replies:t})}),commentCount:n.commentCount-1});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=g(C().mark(function e(t){var n,r,o,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,i=t.adminApi,o=t.data,e.next=3,i.showComment(o.id);case 3:return e.next=5,r.comments.read(o.id);case 5:return i=e.sent,a=i.comments[0],e.abrupt("return",{comments:n.comments.map(function(e){var t=e.replies.map(function(e){return e.id===o.id?a:e});return e.id===o.id?a:p(p({},e),{},{replies:t})}),commentCount:n.commentCount+1});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,o=t.data,e.next=3,r.comments.like({comment:o});case 3:return e.abrupt("return",{comments:n.comments.map(function(e){var t=e.replies.map(function(e){return e.id===o.id?p(p({},e),{},{liked:!0,count:p(p({},e.count),{},{likes:e.count.likes+1})}):e});return e.id===o.id?p(p({},e),{},{liked:!0,replies:t,count:p(p({},e.count),{},{likes:e.count.likes+1})}):p(p({},e),{},{replies:t})})});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return(L=g(C().mark(function e(t){var n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.api,r=t.data,e.next=3,n.comments.report({comment:r});case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,o=t.data,e.next=3,r.comments.unlike({comment:o});case 3:return e.abrupt("return",{comments:n.comments.map(function(e){var t=e.replies.map(function(e){return e.id===o.id?p(p({},e),{},{liked:!1,count:p(p({},e.count),{},{likes:e.count.likes-1})}):e});return e.id===o.id?p(p({},e),{},{liked:!1,replies:t,count:p(p({},e.count),{},{likes:e.count.likes-1})}):p(p({},e),{},{replies:t})})});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=g(C().mark(function e(t){var n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.api,o=t.data,e.next=3,r.comments.edit({comment:{id:o.id,status:"deleted"}});case 3:return e.abrupt("return",{comments:n.comments.map(function(e){var t=e.replies.map(function(e){return e.id===o.id?p(p({},e),{},{status:"deleted"}):e});return e.id===o.id?p(p({},e),{},{status:"deleted",replies:t}):p(p({},e),{},{replies:t})}),commentCount:n.commentCount-1});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(){return(V=g(C().mark(function e(t){var n,r,o,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,a=t.api,r=t.data,o=r.comment,i=r.parent,e.next=3,a.comments.edit({comment:o});case 3:return a=e.sent,o=a.comments[0],e.abrupt("return",{comments:n.comments.map(function(e){return i&&i.id===e.id?p(p({},e),{},{replies:e.replies.map(function(e){return e.id===o.id?o:e})}):e.id===o.id?o:e})});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=g(C().mark(function e(t){var n,r,o,i,a,s,u,l,c;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.data,l=t.state,o=t.api,i=u.name,a=u.expertise,s={},u=null==l||null===(n=l.member)||void 0===n?void 0:n.name,i&&u!==i&&(s.name=i),l=null==l||null===(r=l.member)||void 0===r?void 0:r.expertise,void 0!==a&&l!==a&&(s.expertise=a),0<Object.keys(s).length)return e.prev=8,e.next=11,o.member.update(s);e.next=20;break;case 11:if(c=e.sent){e.next=14;break}throw new Error("Failed to update member");case 14:return e.abrupt("return",{member:c,success:!0});case 17:return e.prev=17,e.t0=e.catch(8),e.abrupt("return",{success:!1,error:e.t0});case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}},e,null,[[8,17]])}))).apply(this,arguments)}var K={openPopup:function(e){return{popup:e.data}},closePopup:function(){return{popup:null}},increaseSecundaryFormCount:function(e){return{secundaryFormCount:e.state.secundaryFormCount+1}},decreaseSecundaryFormCount:function(e){return{secundaryFormCount:e.state.secundaryFormCount-1}}},Q={addComment:function(e){return F.apply(this,arguments)},editComment:function(e){return V.apply(this,arguments)},hideComment:function(e){return R.apply(this,arguments)},deleteComment:function(e){return _.apply(this,arguments)},showComment:function(e){return B.apply(this,arguments)},likeComment:function(e){return I.apply(this,arguments)},unlikeComment:function(e){return z.apply(this,arguments)},reportComment:function(e){return L.apply(this,arguments)},addReply:function(e){return P.apply(this,arguments)},loadMoreComments:function(e){return N.apply(this,arguments)},loadMoreReplies:function(e){return T.apply(this,arguments)},updateMember:function(e){return J.apply(this,arguments)}};function G(){return(G=g(C().mark(function e(t){var n,r,o,i,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.action,n=t.data,r=t.state,o=t.api,i=t.adminApi,a=Q[a])return e.next=5,a({data:n,state:r,api:o,adminApi:i});e.next=9;break;case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return e.abrupt("return",e.t0);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function X(e){if(!e)return"";e=e.split(" ");return 0===e.length?"":1===e.length?e[0].substring(0,1).toLocaleUpperCase():e[0].substring(0,1).toLocaleUpperCase()+e[e.length-1].substring(0,1).toLocaleUpperCase()}function Z(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<480}function ee(e){var t=e.offsetHeight,n=function(e){for(var t=0,n=e.ownerDocument.defaultView;n!==window;)for(var r=n.parent,o=0;o<r.frames.length;o++)if(r.frames[o]===n){var i=Y(r.document.getElementsByTagName("iframe"));try{for(i.s();!(a=i.n()).done;){var a=a.value;a.contentWindow===n&&(t+=a.getBoundingClientRect().top+n.pageYOffset)}}catch(e){i.e(e)}finally{i.f()}n=r;break}return e.getBoundingClientRect().top+window.pageYOffset+t}(e),r=n+t,e=window.innerHeight,t=window.scrollY;(n-64<t||t+e<r+64)&&(r=(n+r)/2,window.scrollTo({top:r-e/2,left:0,behavior:"smooth"}))}function te(e){var t=e.siteUrl,r=void 0===t?window.location.origin:t,n=e.apiUrl,o=e.apiKey;function a(e){var t=e.type,n=e.resource,e=e.params,e=void 0===e?"":e;if("members"===t)return"".concat(r.replace(/\/$/,""),"/").concat("members/api","/").concat(n,"/").concat(e)}function s(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,o=e.headers,n=void 0===o?{}:o,o=e.credentials,o=void 0===o?void 0:o,e=e.body;return fetch(t,{method:r,headers:n,credentials:o,body:void 0===e?void 0:e})}var i={};i.site={settings:function(){return s({url:(t=(e={resource:"settings"}).resource,e=void 0===(e=e.params)?"":e,n&&o?"".concat(n.replace(/\/$/,""),"/").concat(t,"/?key=").concat(o,"&limit=all").concat(e):""),method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return e.json();throw new Error("Failed to fetch site data")});var e,t}},i.member={identity:function(){return s({url:a({type:"members",resource:"session"}),credentials:"same-origin"}).then(function(e){return e.ok&&204!==e.status?e.text():null})},sessionData:function(){return s({url:a({type:"members",resource:"member"}),credentials:"same-origin"}).then(function(e){return e.ok&&204!==e.status?e.json():null})},update:function(e){e={name:e.name,expertise:e.expertise};return s({url:a({type:"members",resource:"member"}),method:"PUT",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():null})}};var u=null;return i.comments={count:function(o){return g(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.postId,n=a({type:"members",resource:"comments/counts"}),e.next=4,s({url:n,method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({ids:[t]})});case 4:return r=e.sent,e.next=7,r.json();case 7:return r=e.sent,e.abrupt("return",r[t]);case 9:case"end":return e.stop()}},e)}))()},browse:function(e){var t=e.page,n=e.postId;u=null!==u&&void 0!==u?u:(new Date).toISOString();e=encodeURIComponent("post_id:".concat(n,"+created_at:<=").concat(u)),n=encodeURIComponent("created_at DESC, id DESC");return s({url:a({type:"members",resource:"comments",params:"?limit=5&order=".concat(n,"&filter=").concat(e,"&page=").concat(t)}),method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(function(e){if(e.ok)return e.json();throw new Error("Failed to fetch comments")})},replies:function(i){return g(C().mark(function e(){var t,n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.page,t=i.commentId,r=i.afterReplyId,n=i.limit,o=encodeURIComponent("id:>".concat(r)),r=encodeURIComponent("created_at ASC, id ASC"),o=a({type:"members",resource:"comments/".concat(t,"/replies"),params:"?limit=".concat(null!=n?n:5,"&order=").concat(r,"&filter=").concat(o)}),e.next=6,s({url:o,method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"});case 6:if((o=e.sent).ok)return e.abrupt("return",o.json());e.next=11;break;case 11:throw new Error("Failed to fetch replies");case 12:case"end":return e.stop()}},e)}))()},add:function(e){e={comments:[e.comment]};return s({url:a({type:"members",resource:"comments"}),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw new Error("Impossibile aggiungere il commento")})},edit:function(e){var t=e.comment,e={comments:[t]};return s({url:a({type:"members",resource:"comments/".concat(t.id)}),method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw new Error("Impossibile modificare il commento")})},read:function(e){return s({url:a({type:"members",resource:"comments/".concat(e)}),method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e.json();throw new Error("Impossibile leggere il commento")})},like:function(e){e=e.comment;return s({url:a({type:"members",resource:"comments/".concat(e.id,"/like")}),method:"POST",headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return"Successo";throw new Error("Al momento, non  stato possibile mettere Mi piace")})},unlike:function(e){var t=e.comment,e={comments:[t]};return s({url:a({type:"members",resource:"comments/".concat(t.id,"/like")}),method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return"Success";throw new Error("Failed to unlike comment")})},report:function(e){e=e.comment;return s({url:a({type:"members",resource:"comments/".concat(e.id,"/report")}),method:"POST",headers:{"Content-Type":"application/json"}}).then(function(e){if(e.ok)return"Success";throw new Error("Impossibile segnalare il commento")})}},i.init=g(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([i.member.sessionData()]);case 2:return t=e.sent,t=q(t,1),t=t[0],e.abrupt("return",{member:t});case 6:case"end":return e.stop()}},e)})),i}function ne(e){var t=e.isFirst,n=e.isPaid,e=(o=Object(U.useContext)(O)).accentColor,r=(o.publication,o.member),o={backgroundColor:e},e={color:e};return Object(S.jsxs)("section",{className:"flex flex-col items-center pt-[40px] ".concat(r?"pb-[32px]":"pb-[48px]"," ").concat(!t&&"mt-4"," border-y-2 border-[rgba(0,0,0,0.075)] dark:border-[rgba(255,255,255,0.1)] sm:px-8"),children:[Object(S.jsx)("h1",{className:"mb-[8px] text-center font-sans text-[24px] tracking-tight  text-black dark:text-[rgba(255,255,255,0.85)] ".concat(t?"font-semibold":"font-bold"),children:"Lascia un commento!"}),Object(S.jsxs)("p",{className:"sm:max-w-screen-sm mb-[28px] w-full px-0 text-center font-sans text-[16px] leading-normal text-neutral-600 dark:text-[rgba(255,255,255,0.85)] sm:px-8",children:[" Scrivi la tua idea nei commenti, esprimi il tuo giudizio. ",n&&"paid"," ",Object(S.jsx)("span",{className:"font-semibold"}),""]}),Object(S.jsx)("button",{onClick:function(){window.location.href=n&&r?"#/portal/account/plans":"#/portal/signup"},className:"font-san mb-[12px] inline-block rounded py-[14px] px-5 font-medium leading-none text-white transition-all hover:opacity-90",style:o,children:n&&r?"Upgrade now":"Iscriviti"}),!r&&Object(S.jsxs)("p",{className:"text-center font-sans text-sm text-[rgba(0,0,0,0.4)] dark:text-[rgba(255,255,255,0.5)]",children:[Object(S.jsx)("span",{className:"mr-1 inline-block text-[15px]",children:"Sei gi registrato?"}),Object(S.jsx)("button",{onClick:function(){window.location.href="#/portal/signin"},className:"rounded-md text-sm font-semibold transition-all hover:opacity-90",style:e,children:"Accedi"})]})]})}var re={dev:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).customSiteUrl,!1},test:function(){return!1}},oe="ghost-comments-root";function ie(){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function ae(e,t,n){return(ae=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&f(r,n.prototype),r}).apply(null,arguments)}function se(e){var n="function"==typeof Map?new Map:void 0;return(se=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return ae(e,arguments,v(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,e)})(e)}function ue(e){this.content=e}ue.prototype={constructor:ue,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){e=this.find(e);return-1==e?void 0:this.content[e+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),r=r.content.slice();return-1==o?r.push(n||e,t):(r[o+1]=t,n&&(r[o]=n)),new ue(r)},remove:function(e){var t=this.find(e);if(-1==t)return this;e=this.content.slice();return e.splice(t,2),new ue(e)},addToStart:function(e,t){return new ue([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ue(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),e=r.find(e);return o.splice(-1==e?o.length:e,0,t,n),new ue(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=ue.from(e)).size?new ue(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=ue.from(e)).size?new ue(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ue.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},ue.from=function(e){if(e instanceof ue)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ue(t)};var le=ue;var ce=(h(fe,[{key:"nodesBetween",value:function(e,t,n){for(var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length?arguments[4]:void 0,i=0,a=0;a<t;i++){var s,u=this.content[i],l=a+u.nodeSize;e<l&&!1!==n(u,r+a,o||null,i)&&u.content.size&&(s=a+1,u.nodesBetween(Math.max(0,e-s),Math.min(u.content.size,t-s),n,r+s)),a=l}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(n,r,o,i){var a="",s=!0;return this.nodesBetween(n,r,function(e,t){e.isText?(a+=e.text.slice(Math.max(n,t)-t,r-t),s=!o):e.isLeaf?(i?a+="function"==typeof i?i(e):i:e.type.spec.leafText&&(a+=e.type.spec.leafText(e)),s=!o):!s&&e.isBlock&&(a+=o,s=!0)},0),a}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new fe(r,this.size+e.size)}},{key:"cut",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;var n=[],r=0;if(e<t)for(var o=0,i=0;i<t;o++){var a=this.content[o],s=i+a.nodeSize;e<s&&((i<e||t<s)&&(a=a.isText?a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),n.push(a),r+=a.nodeSize),i=s}return new fe(n,r)}},{key:"cutByIndex",value:function(e,t){return e==t?fe.empty:0==e&&t==this.content.length?this:new fe(this.content.slice(e,t))}},{key:"replaceChild",value:function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),n=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new fe(r,n)}},{key:"addToStart",value:function(e){return new fe([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new fe(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){return function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),a=n.child(o);if(i!=a){if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(var s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){var u=e(i.content,a.content,r+1);if(null!=u)return u}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(e){return function e(t,n,r,o){for(var i=t.childCount,a=n.childCount;;){if(0==i||0==a)return i==a?null:{a:r,b:o};var s=t.child(--i),u=n.child(--a),l=s.nodeSize;if(s!=u){if(!s.sameMarkup(u))return{a:r,b:o};if(s.isText&&s.text!=u.text){for(var c=0,f=Math.min(s.text.length,u.text.length);c<f&&s.text[s.text.length-c-1]==u.text[u.text.length-c-1];)c++,r--,o--;return{a:r,b:o}}if(s.content.size||u.content.size){var d=e(s.content,u.content,r-1,o-1);if(d)return d}r-=l,o-=l}else r-=l,o-=l}}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.size,2<arguments.length&&void 0!==arguments[2]?arguments[2]:e.size)}},{key:"findIndex",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return pe(0,e);if(e==this.size)return pe(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(e<=o)return o==e||0<t?pe(n+1,o):pe(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null}}],[{key:"fromJSON",value:function(e,t){if(!t)return fe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new fe(t.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return fe.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t=t||e.slice(0,r))[t.length-1]=o.withText(t[t.length-1].text+o.text):t&&t.push(o)}return new fe(t||e,n)}},{key:"from",value:function(e){if(!e)return fe.empty;if(e instanceof fe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new fe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),fe);function fe(e,t){if(d(this,fe),this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize}ce.empty=new ce([],0);var de={index:0,offset:0};function pe(e,t){return de.index=e,de.offset=t,de}function he(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!he(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t&&he(e[o],t[o])))return!1;for(var i in t)if(!(i in e))return!1}return!0}var me=(h(ve,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t=t||e.slice(0,r);else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&((t=t||e.slice(0,r)).push(this),n=!0),t&&t.push(o)}}return t=t||e.slice(),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&he(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e,t={type:this.type.name};for(e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");e=e.marks[t.type];if(!e)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));return e.create(t.attrs)}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return ve.none;if(e instanceof ve)return[e];e=e.slice();return e.sort(function(e,t){return e.type.rank-t.type.rank}),e}}]),ve);function ve(e,t){d(this,ve),this.type=e,this.attrs=t}me.none=[];var ge=function(){m(t,se(Error));var e=b(t);function t(){return d(this,t),e.apply(this,arguments)}return h(t)}(),ye=(h(be,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,t){t=function e(t,n,r,o){var i=t.findIndex(n),a=i.index,s=i.offset,i=t.maybeChild(a);if(s==n||i.isText)return o&&!o.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var r=e(i.content,n-s-1,r);return r&&t.replaceChild(a,i.copy(r))}(this.content,e+this.openStart,t);return t&&new be(t,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,t){return new be(function e(t,n,r){var o=t.findIndex(n),i=o.index,a=o.offset,s=t.maybeChild(i),u=t.findIndex(r),o=u.index,u=u.offset;if(a==n||s.isText){if(u!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return 0<this.openStart&&(e.openStart=this.openStart),0<this.openEnd&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(e,t){if(!t)return be.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new be(ce.fromJSON(e,t.content),n,r)}},{key:"maxOpen",value:function(e){for(var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new be(e,n,r)}}]),be);function be(e,t,n){d(this,be),this.content=e,this.openStart=t,this.openEnd=n}function ke(e,t,n){if(n.openStart>e.depth)throw new ge("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ge("Inconsistent open depths");return function e(t,n,r,o){var i=t.index(o),a=t.node(o);if(i==n.index(o)&&o<t.depth-r.openStart){var s=e(t,n,r,o+1);return a.copy(a.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var u=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;0<=o;o--)r=t.node(o).copy(ce.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return Ee(a,Oe(t,u.start,u.end,n,o))}var s=t.parent,u=s.content;return Ee(s,u.cut(0,t.parentOffset).append(r.content).append(u.cut(n.parentOffset)))}return Ee(a,Se(t,n,o))}(e,t,n,0)}function we(e,t){if(!t.type.compatibleContent(e.type))throw new ge("Cannot join "+t.type.name+" onto "+e.type.name)}function xe(e,t,n){e=e.node(n);return we(e,t.node(n)),e}function De(e,t){var n=t.length-1;0<=n&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Ce(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(De(e.nodeAfter,r),i++));for(var s=i;s<a;s++)De(o.child(s),r);t&&t.depth==n&&t.textOffset&&De(t.nodeBefore,r)}function Ee(e,t){if(!e.type.validContent(t))throw new ge("Invalid content for node "+e.type.name);return e.copy(t)}function Oe(e,t,n,r,o){var i=e.depth>o&&xe(e,t,o+1),a=r.depth>o&&xe(n,r,o+1),s=[];return Ce(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(we(i,a),De(Ee(i,Oe(e,t,n,r,o+1)),s)):(i&&De(Ee(i,Se(e,t,o+1)),s),Ce(t,n,o,s),a&&De(Ee(a,Se(n,r,o+1)),s)),Ce(r,null,o,s),new ce(s)}function Se(e,t,n){var r=[];return Ce(null,e,n,r),e.depth>n&&De(Ee(xe(e,t,n+1),Se(e,t,n+1)),r),Ce(t,null,n,r),new ce(r)}ye.empty=new ye(ce.empty,0,0);var Ae=(h(Ie,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return me.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);n||(t=n,n=r,r=t);for(var o=n.marks,i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;0<t;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this,t=1<arguments.length?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);0<=n;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Te(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(e,t){if(!(0<=t&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var a=i.content.findIndex(o),s=a.index,u=a.offset,a=o-u;if(n.push(i,s,r+u),!a)break;if((i=i.child(s)).isText)break;o=a-1,r+=u+1}return new Ie(t,n,o)}},{key:"resolveCached",value:function(e,t){for(var n=0;n<je.length;n++){var r=je[n];if(r.pos==t&&r.doc==e)return r}var o=je[Me]=Ie.resolve(e,t);return Me=(Me+1)%Ne,o}}]),Ie),je=[],Me=0,Ne=12,Te=(h(Be,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),Be),Fe=Object.create(null),Pe=(h(Re,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&he(this.attrs,t||e.defaultAttrs||Fe)&&me.sameSet(this.marks,n||me.none)}},{key:"copy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new Re(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new Re(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.content.size,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e==t)return ye.empty;var r=this.resolve(e),e=this.resolve(t),n=n?0:r.sharedDepth(t),t=r.start(n),t=r.node(n).content.cut(r.pos-t,e.pos-t);return new ye(t,r.depth-n,e.depth-n)}},{key:"replace",value:function(e,t,n){return ke(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,n=n.offset;if(!(t=t.maybeChild(r)))return null;if(n==e||t.isText)return t;e-=n+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),e=t.index,t=t.offset;return{node:this.content.maybeChild(e),index:e,offset:t}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,t=t.offset;if(t<e)return{node:this.content.child(n),index:n,offset:t};e=this.content.child(n-1);return{node:e,index:n-1,offset:t-e.nodeSize}}},{key:"resolve",value:function(e){return Ae.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return Ae.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return e<t&&this.nodesBetween(e,t,function(e){return n.isInSet(e.marks)&&(r=!0),!r}),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ze(this.marks,e)}},{key:"contentMatchAt",value:function(e){e=this.type.contentMatch.matchFragment(this.content,0,e);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ce.empty,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:n.childCount,e=this.contentMatchAt(e).matchFragment(n,r,o),t=e&&e.matchFragment(this.content,t);if(!t||!t.validEnd)return!1;for(var i=r;i<o;i++)if(!this.type.allowsMarks(n.child(i).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;n=this.contentMatchAt(e).matchType(n),t=n&&n.matchFragment(this.content,t);return!!t&&t.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node ".concat(this.type.name,": ").concat(this.content.toString().slice(0,50)));for(var e=me.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!me.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(function(e){return e.type.name})));this.content.forEach(function(e){return e.check()})}},{key:"toJSON",value:function(){var e,t={type:this.type.name};for(e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(e){return e.toJSON()})),t}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=ce.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}]),Re);function Re(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:me.none;d(this,Re),this.type=e,this.attrs=t,this.marks=r,this.content=n||ce.empty}function Be(e,t,n){d(this,Be),this.$from=e,this.$to=t,this.depth=n}function Ie(e,t,n){d(this,Ie),this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}Pe.prototype.text=void 0;var Le=function(){m(i,Pe);var o=b(i);function i(e,t,n,r){if(d(this,i),r=o.call(this,e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");return r.text=n,r}return h(i,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ze(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new i(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new i(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=ie(v(i.prototype),"toJSON",this).call(this);return e.text=this.text,e}}]),i}();function ze(e,t){for(var n=e.length-1;0<=n;n--)t=e[n].type.name+"("+t+")";return t}var _e=(h(Ve,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(s){var u=1<arguments.length&&void 0!==arguments[1]&&arguments[1],l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,c=[this];return function e(t,n){var r=t.matchFragment(s,l);if(r&&(!u||r.validEnd))return ce.from(n.map(function(e){return e.createAndFill()}));for(var o=0;o<t.next.length;o++){var i=t.next[o],a=i.type,i=i.next;if(!a.isText&&!a.hasRequiredAttrs()&&-1==c.indexOf(i)&&(c.push(i),a=e(i,n.concat(a))))return a}return null}(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var u=o.next[s],l=u.type,u=u.next;l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!u.validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var o=[];return function e(t){o.push(t);for(var n=0;n<t.next.length;n++)-1==o.indexOf(t.next[n].next)&&e(t.next[n].next)}(this),o.map(function(e,t){for(var n=t+(e.validEnd?"*":" ")+" ",r=0;r<e.next.length;r++)n+=(r?", ":"")+e.next[r].type.name+"->"+o.indexOf(e.next[r].next);return n}).join("\n")}}],[{key:"parse",value:function(e,t){e=new $e(e,t);if(null==e.next)return Ve.empty;t=Ue(e);e.next&&e.err("Unexpected trailing text");var a,s,r,l=(r=[[]],p(function n(e,r){if("choice"==e.type)return e.exprs.reduce(function(e,t){return e.concat(n(t,r))},[]);if("seq"!=e.type){if("star"==e.type){var t=f();return d(r,t),p(n(e.expr,t),t),[d(t)]}if("plus"==e.type){var t=f();return p(n(e.expr,r),t),p(n(e.expr,t),t),[d(t)]}if("opt"==e.type)return[d(r)].concat(n(e.expr,r));if("range"==e.type){for(var o=r,i=0;i<e.min;i++){var a=f();p(n(e.expr,o),a),o=a}if(-1==e.max)p(n(e.expr,o),o);else for(var s=e.min;s<e.max;s++){var u=f();d(o,u),p(n(e.expr,o),u),o=u}return[d(o)]}if("name"==e.type)return[d(r,void 0,e.value)];throw new Error("Unknown expr type")}for(var l=0;;l++){var c=n(e.exprs[l],r);if(l==e.exprs.length-1)return c;p(c,r=f())}}(t,0),f()),a=r,s=Object.create(null),function e(t){var o=[];t.forEach(function(e){a[e].forEach(function(e){var t=e.term,e=e.to;if(t){for(var n,r=0;r<o.length;r++)o[r][0]==t&&(n=o[r][1]);Je(a,e).forEach(function(e){n||o.push([t,n=[]]),-1==n.indexOf(e)&&n.push(e)})}})});for(var n=s[t.join(",")]=new _e(-1<t.indexOf(a.length-1)),r=0;r<o.length;r++){var i=o[r][1].sort(qe);n.next.push({type:o[r][0],next:s[i.join(",")]||e(i)})}return n}(Je(a,0)));function f(){return r.push([])-1}function d(e,t,n){t={term:n,to:t};return r[e].push(t),t}function p(e,t){e.forEach(function(e){return e.to=t})}return function(e){for(var t=0,n=[l];t<n.length;t++){for(var r=n[t],o=!r.validEnd,i=[],a=0;a<r.next.length;a++){var s=r.next[a],u=s.type,s=s.next;i.push(u.name),!o||u.isText||u.hasRequiredAttrs()||(o=!1),-1==n.indexOf(s)&&n.push(s)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(e),l}}]),Ve);function Ve(e){d(this,Ve),this.validEnd=e,this.next=[],this.wrapCache=[]}_e.empty=new _e(!0);var $e=(h(He,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}]),He);function He(e,t){d(this,He),this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}function Ue(e){for(var t=[];t.push(function(e){var t=[];for(;t.push(function(e){for(var t=function(t){if(t.eat("(")){var e=Ue(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){e=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o,i=[];for(o in n){var a=n[o];-1<a.groups.indexOf(t)&&i.push(a)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=function(e,t){var n=We(e),r=n;return e.eat(",")&&(r="}"!=e.next?We(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(e,t)}return t}(e)),e.next&&")"!=e.next&&"|"!=e.next;);return 1==t.length?t[0]:{type:"seq",exprs:t}}(e)),e.eat("|"););return 1==t.length?t[0]:{type:"choice",exprs:t}}function We(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function qe(e,t){return t-e}function Je(a,e){var s=[];return function e(t){var n=a[t];if(1==n.length&&!n[0].term)return e(n[0].to);s.push(t);for(var r=0;r<n.length;r++){var o=n[r],i=o.term,o=o.to;i||-1!=s.indexOf(o)||e(o)}}(e),s.sort(qe)}function Ke(e){var t,n=Object.create(null);for(t in e){var r=e[t];if(!r.hasDefault)return null;n[t]=r.default}return n}function Qe(e,t){var n,r=Object.create(null);for(n in e){var o=t&&t[n];if(void 0===o){var i=e[n];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+n);o=i.default}r[n]=o}return r}function Ge(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Xe(e[n]);return t}var Ye=(h(ot,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==_e.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Qe(this.attrs,e)}},{key:"create",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Pe(this,this.computeAttrs(e),ce.from(t),me.setFrom(n))}},{key:"createChecked",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,t=ce.from(t);if(!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Pe(this,this.computeAttrs(e),t,me.setFrom(n))}},{key:"createAndFill",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,e=this.computeAttrs(e);if((t=ce.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}r=this.contentMatch.matchFragment(t),r=r&&r.fillBefore(ce.empty,!0);return r?new Pe(this,e,t.append(r),me.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"allowsMarkType",value:function(e){return null==this.markSet||-1<this.markSet.indexOf(e)}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t=t||e.slice(0,n);return t?t.length?t:me.none:e}}],[{key:"compile",value:function(e,n){var r=Object.create(null);e.forEach(function(e,t){return r[e]=new ot(e,n,t)});var t,e=n.spec.topNode||"doc";if(!r[e])throw new RangeError("Schema is missing its top node type ('"+e+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(t in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),ot),Xe=(h(rt,[{key:"isRequired",get:function(){return!this.hasDefault}}]),rt),Ze=(h(nt,[{key:"create",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new me(this,Qe(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"excludes",value:function(e){return-1<this.excluded.indexOf(e)}}],[{key:"compile",value:function(e,n){var r=Object.create(null),o=0;return e.forEach(function(e,t){return r[e]=new nt(e,o++,n,t)}),r}}]),nt),et=(h(tt,[{key:"node",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Ye))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new Le(n,n.defaultAttrs,e,me.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return Pe.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return me.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}]),tt);function tt(e){d(this,tt),this.cached=Object.create(null),this.spec={nodes:le.from(e.nodes),marks:le.from(e.marks||{}),topNode:e.topNode},this.nodes=Ye.compile(this.spec.nodes,this),this.marks=Ze.compile(this.spec.marks,this);var t,n,r=Object.create(null);for(t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");var o=this.nodes[t],i=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[i]||(r[i]=_e.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?it(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(n in this.marks){var s=this.marks[n],u=s.spec.excludes;s.excluded=null==u?[s]:""==u?[]:it(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}function nt(e,t,n,r){d(this,nt),this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Ge(r.attrs),this.excluded=null;r=Ke(this.attrs);this.instance=r?new me(this,r):null}function rt(e){d(this,rt),this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}function ot(e,t,n){d(this,ot),this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Ge(n.attrs),this.defaultAttrs=Ke(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}function it(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var u=e.marks[s];("_"==o||u.spec.group&&-1<u.spec.group.split(" ").indexOf(o))&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var at=(h(ct,[{key:"parse",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new pt(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new pt(this,t,!0);return n.addAll(e,t.from,t.to),ye.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r,o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var i=this.tags[o];if(r=e,a=i.tag,(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,a)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a||void 0}return i}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(e)||i.context&&!n.matchesContext(i.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=t))){if(i.getAttrs){a=i.getAttrs(t);if(!1===a)continue;i.attrs=a||void 0}return i}}}}],[{key:"schemaRules",value:function(n){var o=[];function r(e){for(var t=null==e.priority?50:e.priority,n=0;n<o.length;n++){var r=o[n];if((null==r.priority?50:r.priority)<t)break}o.splice(n,0,e)}for(var e in n.marks)!function(t){var e=n.marks[t].spec.parseDOM;e&&e.forEach(function(e){r(e=vt(e)),e.mark=t})}(e);for(var t in n.nodes)!function(t){var e=n.nodes[t].spec.parseDOM;e&&e.forEach(function(e){r(e=vt(e)),e.node=t})}(t);return o}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new ct(e,ct.schemaRules(e)))}}]),ct),st={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ut={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lt={ol:!0,ul:!0};function ct(t,e){var n=this;d(this,ct),this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)}),this.normalizeLists=!this.tags.some(function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;e=t.nodes[e.node];return e.contentMatch.matchType(e)})}function ft(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var dt=(h(mt,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(ce.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){var t;1&this.options||(t=this.content[this.content.length-1])&&t.isText&&(n=/[ \t\r\n\u000c]+$/.exec(t.text))&&((t=t).text.length==n[0].length?this.content.pop():this.content[this.content.length-1]=t.withText(t.text.slice(0,t.text.length-n[0].length)));var n=ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}},{key:"popFromStashMark",value:function(e){for(var t=this.stashMarks.length-1;0<=t;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}},{key:"applyPending",value:function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):function(t,a){var e,n=a.schema.nodes;for(e in n){var r=function(e){e=n[e];if(!e.allowsMarkType(t))return"continue";var i=[];return function e(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,r=r.next;if(o==a)return 1;if(i.indexOf(r)<0&&e(r))return 1}}(e.contentMatch)?{v:!0}:void 0}(e);if("continue"!==r&&"object"==typeof r)return r.v}}(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!st.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}]),mt),pt=(h(ht,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}}},{key:"addTextNode",value:function(e){var t,n=e.nodeValue,r=this.top;2&r.options||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)?(1&r.options?n=2&r.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," "):(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1&&(t=r.content[r.content.length-1],r=e.previousSibling,(!t||r&&"BR"==r.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1)))),n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)):this.findInside(e)}},{key:"addElement",value:function(r,e){var t,n=r.nodeName.toLowerCase();lt.hasOwnProperty(n)&&this.parser.normalizeLists&&function(){for(var e=r.firstChild,t=null;e;e=e.nextSibling){var n=1==e.nodeType?e.nodeName.toLowerCase():null;n&&lt.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):"li"==n?t=e:n&&(t=null)}}();var o=this.options.ruleFromNode&&this.options.ruleFromNode(r)||(t=this.parser.matchTag(r,this,e));if(o?o.ignore:ut.hasOwnProperty(n))this.findInside(r),this.ignoreFallback(r);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(r=o.skip);var i,a=this.top,e=this.needsBlock;if(st.hasOwnProperty(n))i=!0,a.type||(this.needsBlock=!0);else if(!r.firstChild)return void this.leafFallback(r);this.addAll(r),i&&this.sync(a),this.needsBlock=e}else this.addElementByRule(r,o,!1===o.consuming?t:void 0)}},{key:"leafFallback",value:function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(e){var t=me.none;e:for(var n=0;n<e.length;n+=2)for(var r=void 0;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t}},{key:"addElementByRule",value:function(e,t,n){var r,o,i,a=this;t.node?(o=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var s=this.top;o&&o.isLeaf?this.findInside(e):n?this.addElement(e,n):t.getContent?(this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return a.insertNode(e)})):(n=e,"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)),r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}},{key:"addAll",value:function(e,t,n){for(var r=t||0,o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}},{key:"findPlace",value:function(e){for(var t,n,r=this.open;0<=r;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(n=o,!(t=i).length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0}},{key:"insertNode",value:function(e){var t;if(!e.isInline||!this.needsBlock||this.top.type||(t=this.textblockFromContext())&&this.enterInner(t),this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}},{key:"enter",value:function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}},{key:"enterInner",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);r=ft(e,r,o.options);4&o.options&&0==o.content.length&&(r|=4),this.nodes.push(new dt(e,t,o.activeMarks,o.pendingMarks,n,null,r)),this.open++}},{key:"closeExtra",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var t=this.open;0<=t;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;0<=t;t--){for(var n=this.nodes[t].content,r=n.length-1;0<=r;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var i=this;if(-1<e.indexOf("|"))return e.split(/\s*\|\s*/).some(this.matchesContext,this);var a=e.split("/"),s=this.options.context,u=!(this.isOpen||s&&s.parent.type!=this.nodes[0].type),l=-(s?s.depth+1:0)+(u?0:1);return function e(t,n){for(;0<=t;t--){var r=a[t];if(""==r){if(t==a.length-1||0==t)continue;for(;l<=n;n--)if(e(t-1,n))return!0;return!1}var o=0<n||0==n&&u?i.nodes[n].type:s&&l<=n?s.node(n-l).type:null;if(!o||o.name!=r&&-1==o.groups.indexOf(r))return!1;n--}return!0}(a.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e,t=this.options.context;if(t)for(var n=t.depth;0<=n;n--){var r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(e in this.parser.schema.nodes){var o=this.parser.schema.nodes[e];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(e,t){for(var n=this.open;0<=n;n--){var r,o=this.nodes[n];if(-1<o.pendingMarks.lastIndexOf(e)?o.pendingMarks=e.removeFromSet(o.pendingMarks):(o.activeMarks=e.removeFromSet(o.activeMarks),(r=o.popFromStashMark(e))&&o.type&&o.type.allowsMarkType(r.type)&&(o.activeMarks=r.addToSet(o.activeMarks))),o==t)break}}}]),ht);function ht(e,t,n){d(this,ht),this.parser=e,this.options=t,this.isOpen=n,this.open=0;var r=t.topNode,o=ft(null,t.preserveWhitespace,0)|(n?4:0),o=r?new dt(r.type,r.attrs,me.none,me.none,!0,t.topMatch||r.type.contentMatch,o):new dt(n?null:e.schema.topNodeType,null,me.none,me.none,!0,null,o);this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}function mt(e,t,n,r,o,i,a){d(this,mt),this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=me.none,this.stashMarks=[],this.match=i||(4&a?null:e.contentMatch)}function vt(e){var t,n={};for(t in e)n[t]=e[t];return n}var gt=(h(yt,[{key:"serializeFragment",value:function(e){var a=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length?arguments[2]:void 0,u=t=t||kt(s).createDocumentFragment(),l=[];return e.forEach(function(e){if(l.length||e.marks.length){for(var t=0,n=0;t<l.length&&n<e.marks.length;){var r=e.marks[n];if(a.marks[r.type.name]){if(!r.eq(l[t][0])||!1===r.type.spec.spanning)break;t++,n++}else n++}for(;t<l.length;)u=l.pop()[1];for(;n<e.marks.length;){var o=e.marks[n++],i=a.serializeMark(o,e.isInline,s);i&&(l.push([o,u]),u.appendChild(i.dom),u=i.contentDOM||i.dom)}}u.appendChild(a.serializeNodeInner(e,s))}),t}},{key:"serializeNodeInner",value:function(e,t){var n=yt.renderSpec(kt(t),this.nodes[e.type.name](e)),r=n.dom,n=n.contentDOM;if(n){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,n)}return r}},{key:"serializeNode",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;0<=r;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&yt.renderSpec(kt(n),r(e,t))}}],[{key:"renderSpec",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r,o=t[0],i=o.indexOf(" ");0<i&&(n=o.slice(0,i),o=o.slice(i+1));var a,s=n?e.createElementNS(n,o):e.createElement(o),u=t[1],l=1;if(u&&"object"==typeof u&&null==u.nodeType&&!Array.isArray(u))for(var c in l=2,u)null!=u[c]&&(0<(a=c.indexOf(" "))?s.setAttributeNS(c.slice(0,a),c.slice(a+1),u[c]):s.setAttribute(c,u[c]));for(var f=l;f<t.length;f++){var d=t[f];if(0===d){if(f<t.length-1||l<f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=yt.renderSpec(e,d,n),d=p.dom,p=p.contentDOM;if(s.appendChild(d),p){if(r)throw new RangeError("Multiple content holes");r=p}}return{dom:s,contentDOM:r}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new yt(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(e){e=bt(e.nodes);return e.text||(e.text=function(e){return e.text}),e}},{key:"marksFromSchema",value:function(e){return bt(e.marks)}}]),yt);function yt(e,t){d(this,yt),this.nodes=e,this.marks=t}function bt(e){var t,n={};for(t in e){var r=e[t].spec.toDOM;r&&(n[t]=r)}return n}function kt(e){return e.document||window.document}var wt=Math.pow(2,16);function xt(e){return 65535&e}var Dt=(h(Ot,[{key:"deleted",get:function(){return 0<(8&this.delInfo)}},{key:"deletedBefore",get:function(){return 0<(5&this.delInfo)}},{key:"deletedAfter",get:function(){return 0<(6&this.delInfo)}},{key:"deletedAcross",get:function(){return 0<(4&this.delInfo)}}]),Ot),Ct=(h(Et,[{key:"recover",value:function(e){var t=0,n=xt(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+(e-(65535&e))/wt}},{key:"mapResult",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(e<s)break;var u=this.ranges[a+o],l=this.ranges[a+i],c=s+u;if(e<=c){var f=s+r+((u?e==s?-1:e==c?1:t:t)<0?0:l);if(n)return f;var d=e==s?2:e==c?1:4;return(t<0?e!=s:e!=c)&&(d|=8),new Dt(f,d,e==(t<0?s:c)?null:a/3+(e-s)*wt)}r+=l-u}return n?e+r:new Dt(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=xt(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(e<s)break;var u=this.ranges[a+o];if(e<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+t],i=this.ranges[r+n];e(a,a+u,s,s+i),o+=i-u}}},{key:"invert",value:function(){return new Et(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?Et.empty:new Et(e<0?[0,-e,0]:[0,0,e])}}]),Et);function Et(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(d(this,Et),this.ranges=e,this.inverted=t,!e.length&&Et.empty)return Et.empty}function Ot(e,t,n){d(this,Ot),this.pos=e,this.delInfo=t,this.recover=n}Ct.empty=new Ct([]);var St=(h(Ft,[{key:"slice",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new Ft(this.maps,this.mirror,e,t)}},{key:"copy",value:function(){return new Ft(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;0<=t;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&t<r?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new Ft;return e.appendMappingInverted(this),e}},{key:"map",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&o<a&&a<this.to){o=a,e=this.maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new Dt(e,r,null)}}]),Ft),At=Object.create(null),jt=(h(Tt,[{key:"getMap",value:function(){return Ct.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=At[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in At)throw new RangeError("Duplicate use of step JSON ID "+e);return(At[e]=t).prototype.jsonID=e,t}}]),Tt),Mt=(h(Nt,null,[{key:"ok",value:function(e){return new Nt(e,null)}},{key:"fail",value:function(e){return new Nt(null,e)}},{key:"fromReplace",value:function(e,t,n,r){try{return Nt.ok(e.replace(t,n,r))}catch(e){if(e instanceof ge)return Nt.fail(e.message);throw e}}}]),Nt);function Nt(e,t){d(this,Nt),this.doc=e,this.failed=t}function Tt(){d(this,Tt)}function Ft(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length;d(this,Ft),this.maps=e,this.mirror=t,this.from=n,this.to=r}function Pt(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Pt(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return ce.fromArray(r)}var Rt=function(){m(i,jt);var o=b(i);function i(e,t,n){var r;return d(this,i),(r=o.call(this)).from=e,r.to=t,r.mark=n,r}return h(i,[{key:"apply",value:function(e){var n=this,t=e.slice(this.from,this.to),r=e.resolve(this.from),r=r.node(r.sharedDepth(this.to)),t=new ye(Pt(t.content,function(e,t){return e.isAtom&&t.type.allowsMarkType(n.mark.type)?e.mark(n.mark.addToSet(e.marks)):e},r),t.openStart,t.openEnd);return Mt.fromReplace(e,this.from,this.to,t)}},{key:"invert",value:function(){return new Bt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new i(t.pos,e.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}}]),i}();jt.jsonID("addMark",Rt);var Bt=function(){m(i,jt);var o=b(i);function i(e,t,n){var r;return d(this,i),(r=o.call(this)).from=e,r.to=t,r.mark=n,r}return h(i,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),n=new ye(Pt(n.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))},e),n.openStart,n.openEnd);return Mt.fromReplace(e,this.from,this.to,n)}},{key:"invert",value:function(){return new Rt(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new i(t.pos,e.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}}]),i}();jt.jsonID("removeMark",Bt);var It=function(){m(o,jt);var r=b(o);function o(e,t){var n;return d(this,o),(n=r.call(this)).pos=e,n.mark=t,n}return h(o,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new ye(ce.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);if(t){var n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(var r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(n))return new o(this.pos,t.marks[r]);return new o(this.pos,this.mark)}}return new Lt(this.pos,this.mark)}},{key:"map",value:function(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new o(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new o(t.pos,e.markFromJSON(t.mark))}}]),o}();jt.jsonID("addNodeMark",It);var Lt=function(){m(o,jt);var r=b(o);function o(e,t){var n;return d(this,o),(n=r.call(this)).pos=e,n.mark=t,n}return h(o,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new ye(ce.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){e=e.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new It(this.pos,this.mark):this}},{key:"map",value:function(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new o(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new o(t.pos,e.markFromJSON(t.mark))}}]),o}();jt.jsonID("removeNodeMark",Lt);var zt=function(){m(a,jt);var i=b(a);function a(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return d(this,a),(r=i.call(this)).from=e,r.to=t,r.slice=n,r.structure=o,r}return h(a,[{key:"apply",value:function(e){return this.structure&&Vt(e,this.from,this.to)?Mt.fail("Structure replace would overwrite content"):Mt.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new Ct([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new a(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deletedAcross&&e.deletedAcross?null:new a(t.pos,Math.max(t.pos,e.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof a)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?ye.empty:new ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new a(e.from,this.to,t,this.structure)}t=this.slice.size+e.slice.size==0?ye.empty:new ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new a(this.from,this.to+(e.to-e.from),t,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new a(t.from,t.to,ye.fromJSON(e,t.slice),!!t.structure)}}]),a}();jt.jsonID("replace",zt);var _t=function(){m(l,jt);var u=b(l);function l(e,t,n,r,o,i){var a,s=6<arguments.length&&void 0!==arguments[6]&&arguments[6];return d(this,l),(a=u.call(this)).from=e,a.to=t,a.gapFrom=n,a.gapTo=r,a.slice=o,a.insert=i,a.structure=s,a}return h(l,[{key:"apply",value:function(e){if(this.structure&&(Vt(e,this.from,this.gapFrom)||Vt(e,this.gapTo,this.to)))return Mt.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Mt.fail("Gap is not a flat range");t=this.slice.insertAt(this.insert,t.content);return t?Mt.fromReplace(e,this.from,this.to,t):Mt.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new Ct([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new l(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),e=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||e>n.pos?null:new l(t.pos,n.pos,r,e,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new l(t.from,t.to,t.gapFrom,t.gapTo,ye.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),l}();function Vt(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;0<o&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(0<o)for(var a=r.node(i).maybeChild(r.indexAfter(i));0<o;){if(!a||a.isLeaf)return 1;a=a.firstChild,o--}}function $t(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||(r=r,i=i,0!=(o=o)&&!r.canReplace(o,r.childCount)||i!=r.childCount&&!r.canReplace(0,i)))break}return null}function Ht(e,t,n,r){n=2<arguments.length&&void 0!==n?n:null,r=3<arguments.length&&void 0!==r?r:e,e=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,e=n.contentMatchAt(r).findWrapping(t);if(!e)return null;t=e.length?e[0]:t;return n.canReplaceWith(r,o,t)?e:null}(e,t),r=e&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,e=n.child(r),e=t.contentMatch.findWrapping(e.type);if(!e)return null;for(var i=(e.length?e[e.length-1]:t).contentMatch,a=r;i&&a<o;a++)i=i.matchType(n.child(a).type);return i&&i.validEnd?e:null}(r,t);return r?e.map(Ut).concat({type:t,attrs:n}).concat(r.map(Ut)):null}function Ut(e){return{type:e,attrs:null}}function Wt(e,t,n,r){var n=2<arguments.length&&void 0!==n?n:1,o=3<arguments.length?r:void 0,i=e.resolve(t),a=i.depth-n,t=o&&o[o.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!t.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var s=i.depth-1,u=n-2;a<s;s--,u--){var l=i.node(s),c=i.index(s);if(l.type.spec.isolating)return!1;var f=l.content.cutByIndex(c,l.childCount),d=o&&o[u]||l;if(d!=l&&(f=f.replaceChild(0,d.type.create(d.attrs))),!l.canReplace(c+1,l.childCount)||!d.type.validContent(f))return!1}t=i.indexAfter(a),n=o&&o[0];return i.node(a).canReplaceWith(t,t,(n||i.node(1+a)).type)}function qt(e,t){var n=e.resolve(t),r=n.index();return e=n.nodeBefore,t=n.nodeAfter,e&&t&&!e.isLeaf&&e.canAppend(t)&&n.parent.canReplace(r,r+1)}function Jt(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:t,n=3<arguments.length&&void 0!==r?r:ye.empty;if(t==o&&!n.size)return null;r=e.resolve(t),e=e.resolve(o);return Kt(r,e,n)?new zt(t,o,n):new Qt(r,e,n).fit()}function Kt(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}jt.jsonID("replaceAround",_t);var Qt=(h(Gt,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new ye(i,a,s);return-1<t?new _t(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new zt(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;0<=t;t--)for(var n=null,r=(t?n=Zt(this.unplaced.content,t-1).firstChild:this.unplaced).content.firstChild,o=this.depth;0<=o;o--){var i=this.frontier[o],a=i.type,s=i.match,u=void 0,i=null;if(1==e&&(r?s.matchType(r.type)||(i=s.fillBefore(ce.from(r),!1)):n&&a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:o,parent:n,inject:i};if(2==e&&r&&(u=s.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:o,parent:n,wrap:u};if(n&&s.matchType(n.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,e=Zt(t,n);return!(!e.childCount||e.firstChild.isLeaf||(this.unplaced=new ye(t,n+1,Math.max(r,e.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,e=Zt(t,n);e.childCount<=1&&0<n?(e=t.size-n<=n+e.size,this.unplaced=new ye(Yt(t,n-1,1),n-1,e?n-1:r)):this.unplaced=new ye(Yt(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=(r||s).content,l=s.openStart-t,c=0,f=[],e=this.frontier[n],d=e.match,p=e.type;if(o){for(a=0;a<o.childCount;a++)f.push(o.child(a));d=d.matchFragment(o)}for(var h=u.size+t-(s.content.size-s.openEnd);c<u.childCount;){var m=u.child(c),v=d.matchType(m.type);if(!v)break;(1<++c||0==l||m.content.size)&&(d=v,f.push(function e(t,n,r){if(n<=0)return t;var o=t.content;return 1<n&&(o=o.replaceChild(0,e(o.firstChild,n-1,1==o.childCount?r-1:0))),0<n&&(o=t.type.contentMatch.fillBefore(o).append(o),r<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(ce.empty,!0)))),t.copy(o)}(m.mark(p.allowedMarks(m.marks)),1==c?l:0,c==u.childCount?h:-1)))}e=c==u.childCount;e||(h=-1),this.placed=Xt(this.placed,n,ce.from(f)),this.frontier[n].match=d,e&&h<0&&r&&r.type==this.frontier[this.depth].type&&1<this.frontier.length&&this.closeFrontierNode();for(var g=0,y=u;g<h;g++){var b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=e?0==t?ye.empty:new ye(Yt(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new ye(Yt(s.content,t,c),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!en(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);1<n&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);0<=t;t--){var n=this.frontier[t],r=n.match,o=n.type,n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),r=en(e,t,o,r,n);if(r){for(var i=t-1;0<=i;i--){var a=this.frontier[i],s=a.match,s=en(e,i,a.type,s,!0);if(!s||s.childCount)continue e}return{depth:t,fit:r,move:n?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Xt(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Xt(this.placed,this.depth,ce.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(ce.empty,!0);e.childCount&&(this.placed=Xt(this.placed,this.frontier.length,e))}}]),Gt);function Gt(e,t,n){d(this,Gt),this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=ce.empty;for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(var i=e.depth;0<i;i--)this.placed=ce.from(e.node(i).copy(this.placed))}function Yt(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Yt(e.firstChild.content,t-1,n)))}function Xt(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Xt(e.lastChild.content,t-1,n)))}function Zt(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function en(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;r=r.fillBefore(i.content,!0,a);return r&&!function(e,t){for(var n=a;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return 1}(n,i.content)?r:null}function tn(e,t){for(var n=[],r=Math.min(e.depth,t.depth);0<=r;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var nn=function(){m(i,jt);var o=b(i);function i(e,t,n){var r;return d(this,i),(r=o.call(this)).pos=e,r.attr=t,r.value=n,r}return h(i,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at attribute step's position");var n,r=Object.create(null);for(n in t.attrs)r[n]=t.attrs[n];r[this.attr]=this.value;var o=t.type.create(r,null,t.marks);return Mt.fromReplace(e,this.pos,this.pos+1,new ye(ce.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return Ct.empty}},{key:"invert",value:function(e){return new i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){e=e.mapResult(this.pos,1);return e.deletedAfter?null:new i(e.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(t.pos,t.attr,t.value)}}]),i}();jt.jsonID("attr",nn);var rn=Error;(((rn=function e(t){t=Error.call(this,t);return t.__proto__=e.prototype,t}).prototype=Object.create(Error.prototype)).constructor=rn).prototype.name="TransformError";var on=(h(ln,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){e=this.maybeStep(e);if(e.failed)throw new rn(e.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return 0<this.steps.length}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ye.empty,n=Jt(this.doc,e,t,n);return n&&this.step(n),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new ye(ce.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,ye.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(Kt(o,i,r))return e.step(new zt(t,n,r));var a=tn(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var u=o.depth,l=o.pos-1;0<u;u--,l--){var c=o.node(u).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;-1<a.indexOf(u)?s=u:o.before(u)==l&&a.splice(1,0,-u)}for(var f=a.indexOf(s),d=[],p=r.openStart,h=r.content,m=0;;m++){var v=h.firstChild;if(d.push(v),m==r.openStart)break;h=v.content}for(var g=p-1;0<=g;g--){var y=d[g].type,b=(b=y).spec.defining||b.spec.definingForContent;if(b&&o.node(f).type!=y)p=g;else if(b||!y.isTextblock)break}for(var k=r.openStart;0<=k;k--){var w=(k+p+1)%(r.openStart+1),x=d[w];if(x)for(var D=0;D<a.length;D++){var C=a[(D+f)%a.length],E=!0;C<0&&(E=!1,C=-C);var O=o.node(C-1),S=o.index(C-1);if(O.canReplaceWith(S,S,x.type,x.marks))return e.replace(o.before(C),E?i.after(C):n,new ye(function e(t,n,r,o,i){var a;return n<r&&(a=t.firstChild,t=t.replaceChild(0,a.copy(e(a.content,n+1,r,o,a)))),o<n&&(t=(i=(n=i.contentMatchAt(0)).fillBefore(t).append(t)).append(n.matchFragment(i).fillBefore(ce.empty,!0))),t}(r.content,0,r.openStart,w),w,r.openEnd))}}for(var A=e.steps.length,j=a.length-1;0<=j&&(e.replace(t,n,r),!(e.steps.length>A));j--){var M=a[j];M<0||(t=o.before(M),n=i.after(M))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return r=this,o=e,e=t,(t=n).isInline||o!=e||!r.doc.resolve(o).parent.content.size||null!=(n=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;0<=o;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(0<i)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;0<=a;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(r.doc,o,t.type))&&(o=e=n),r.replaceRange(o,e,new ye(ce.from(t),0,0)),this;var r,o}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=tn(r,o),a=0;a<i.length;a++){var s=i[a],u=a==i.length-1;if(u&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(0<s&&(u||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var l=1;l<=r.depth&&l<=o.depth;l++)if(t-r.start(l)==r.depth-l&&n>r.end(l)&&o.end(l)-n!=o.depth-l)return e.delete(r.before(l),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(g,e){return function(e,t){for(var n=g.$from,r=g.$to,o=g.depth,i=n.before(o+1),a=r.after(o+1),s=i,u=a,l=ce.empty,c=0,f=o,d=!1;t<f;f--)d||0<n.index(f)?(d=!0,l=ce.from(n.node(f).copy(l)),c++):s--;for(var p=ce.empty,h=0,m=o,v=!1;t<m;m--)v||r.after(m+1)<r.end(m)?(v=!0,p=ce.from(r.node(m).copy(p)),h++):u++;e.step(new _t(s,u,i,a,new ye(l.append(p),c,h),l.size-c,!0))}(this,e),this}},{key:"join",value:function(e){var t,n;return t=this,e=new zt((n=e)-(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1),n+e,ye.empty,!0),t.step(e),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=ce.empty,o=n.length-1;0<=o;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(n[o].type.create(n[o].attrs,r))}var a=t.start,t=t.end;e.step(new _t(a,t,a,t,new ye(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(o,e,t,i,a){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=o.steps.length;o.doc.nodesBetween(e,t,function(e,t){if(e.isTextblock&&!e.hasMarkup(i,a)&&function(e,t,n){e=e.resolve(t),t=e.index();return e.parent.canReplaceWith(t,t+1,n)}(o.doc,o.mapping.slice(s).map(t),i)){o.clearIncompatible(o.mapping.slice(s).map(t,1),i);var n=o.mapping.slice(s),r=n.map(t,1),t=n.map(t+e.nodeSize,1);return o.step(new _t(r,t,r+1,t-1,new ye(ce.from(i.create(a,null,e.marks)),0,0),1,!0)),!1}})}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,2<arguments.length?arguments[2]:void 0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");if(o=(n=n||i.type).create(r,null,o||i.marks),i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new _t(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new ye(ce.from(o),0,0),1,!0))}(this,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:[]),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new nn(e,t,n)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new It(e,t)),this}},{key:"removeNodeMark",value:function(e,t){if(!(t instanceof me)){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new Lt(e,t)),this}},{key:"split",value:function(e){return function(e,t,n,r){for(var n=2<arguments.length&&void 0!==n?n:1,o=3<arguments.length?r:void 0,i=e.doc.resolve(t),a=ce.empty,s=ce.empty,u=i.depth,l=i.depth-n,c=n-1;l<u;u--,c--){a=ce.from(i.node(u).copy(a));var f=o&&o[c],s=ce.from(f?f.type.create(f.attrs,s):i.node(u).copy(s))}e.step(new zt(t,t,new ye(a.append(s),n,n),!0))}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,2<arguments.length?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return u=e,l=t,c=n,p=[],h=[],(r=this).doc.nodesBetween(u,l,function(e,t,n){if(e.isInline){var r=e.marks;if(!c.isInSet(r)&&n.type.allowsMarkType(c.type)){for(var o=Math.max(t,u),i=Math.min(t+e.nodeSize,l),a=c.addToSet(r),s=0;s<r.length;s++)r[s].isInSet(a)||(f&&f.to==o&&f.mark.eq(r[s])?f.to=i:p.push(f=new Bt(o,i,r[s])));d&&d.to==o?d.to=i:h.push(d=new Rt(o,i,c))}}}),p.forEach(function(e){return r.step(e)}),h.forEach(function(e){return r.step(e)}),this;var r,u,l,c,f,d,p,h}},{key:"removeMark",value:function(e,t,n){return f=e,d=t,p=n,h=[],m=0,(r=this).doc.nodesBetween(f,d,function(e,t){if(e.isInline){m++;var n=null;if(p instanceof Ze)for(var r,o=e.marks;r=p.isInSet(o);)(n=n||[]).push(r),o=r.removeFromSet(o);else p?p.isInSet(e.marks)&&(n=[p]):n=e.marks;if(n&&n.length)for(var i=Math.min(t+e.nodeSize,d),a=0;a<n.length;a++){for(var s=n[a],u=void 0,l=0;l<h.length;l++){var c=h[l];c.step==m-1&&s.eq(h[l].style)&&(u=c)}u?(u.to=i,u.step=m):h.push({style:s,from:Math.max(t,f),to:i,step:m})}}}),h.forEach(function(e){return r.step(new Bt(e.from,e.to,e.style))}),this;var r,f,d,p,h,m}},{key:"clearIncompatible",value:function(e,t,n){return function(e,t,n,r){for(var o=3<arguments.length&&void 0!==r?r:n.contentMatch,i=e.doc.nodeAt(t),a=[],s=t+1,u=0;u<i.childCount;u++){var l=i.child(u),c=s+l.nodeSize,f=o.matchType(l.type);if(f){o=f;for(var d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||e.step(new Bt(s,c,l.marks[d]))}else a.push(new zt(s,c,ye.empty));s=c}o.validEnd||(t=o.fillBefore(ce.empty,!0),e.replace(s,s,new ye(t,0,0)));for(var p=a.length-1;0<=p;p--)e.step(a[p])}(this,e,t,n),this}}]),ln),an=Object.create(null),sn=(h(un,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ye.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)n=(r=n).lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var u=a[s],l=u.$from,c=u.$to,u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),s?ye.empty:t),0==s&&xn(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,i=e.mapping.slice(n),a=i.map(a.pos),s=i.map(s.pos);o?e.deleteRange(a,s):(e.replaceRangeWith(a,s,t),xn(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return pn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new pn(e):wn(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;0<=o;o--){var i=t<0?wn(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):wn(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new yn(e.node(0))}},{key:"atStart",value:function(e){return wn(e,e,0,0,1)||new yn(e)}},{key:"atEnd",value:function(e){return wn(e,e,e.content.size,e.childCount,-1)||new yn(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=an[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in an)throw new RangeError("Duplicate use of selection JSON ID "+e);return(an[e]=t).prototype.jsonID=e,t}}]),un);function un(e,t,n){d(this,un),this.$anchor=e,this.$head=t,this.ranges=n||[new cn(e.min(t),e.max(t))]}function ln(e){d(this,ln),this.doc=e,this.steps=[],this.docs=[],this.mapping=new St}sn.prototype.visible=!0;var cn=h(function e(t,n){d(this,e),this.$from=t,this.$to=n}),fn=!1;function dn(e){fn||e.parent.inlineContent||(fn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var pn=function(){m(i,sn);var n=b(i);function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;return d(this,i),dn(e),dn(t),n.call(this,e,t)}return h(i,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,t){var n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return sn.near(n);t=e.resolve(t.map(this.anchor));return new i(t.parent.inlineContent?t:n,n)}},{key:"replace",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ye.empty;ie(v(i.prototype),"replace",this).call(this,e,n),n==ye.empty&&(t=this.$from.marksAcross(this.$to))&&e.ensureMarks(t)}},{key:"eq",value:function(e){return e instanceof i&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new hn(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,t,n){var r=e.pos-t.pos;if(n&&!r||(n=0<=r?1:-1),!t.parent.inlineContent){var o=sn.findFrom(t,n,!0)||sn.findFrom(t,-n,!0);if(!o)return sn.near(t,n);t=o.$head}return e.parent.inlineContent||(0!=r&&(e=(sn.findFrom(e,-n,!0)||sn.findFrom(e,n,!0)).$anchor).pos<t.pos==r<0||(e=t)),new i(e,t)}}]),i}();sn.jsonID("text",pn);var hn=(h(vn,[{key:"map",value:function(e){return new vn(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(e){return pn.between(e.resolve(this.anchor),e.resolve(this.head))}}]),vn),mn=function(){m(o,sn);var r=b(o);function o(e){d(this,o);var t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);return(n=r.call(this,e,n)).node=t,n}return h(o,[{key:"map",value:function(e,t){var n=t.mapResult(this.anchor),t=n.deleted,n=n.pos,n=e.resolve(n);return t?sn.near(n):new o(n)}},{key:"content",value:function(){return new ye(ce.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof o&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new gn(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new o(e.resolve(t.anchor))}},{key:"create",value:function(e,t){return new o(e.resolve(t))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),o}();function vn(e,t){d(this,vn),this.anchor=e,this.head=t}mn.prototype.visible=!1,sn.jsonID("node",mn);var gn=(h(bn,[{key:"map",value:function(e){var t=e.mapResult(this.anchor),e=t.deleted,t=t.pos;return e?new hn(t,t):new bn(t)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),e=t.nodeAfter;return e&&mn.isSelectable(e)?new mn(t):sn.near(t)}}]),bn),yn=function(){m(r,sn);var t=b(r);function r(e){return d(this,r),t.call(this,e.resolve(0),e.resolve(e.content.size))}return h(r,[{key:"replace",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ye.empty;n==ye.empty?(e.delete(0,e.doc.content.size),(t=sn.atStart(e.doc)).eq(e.selection)||e.setSelection(t)):ie(v(r.prototype),"replace",this).call(this,e,n)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new r(e)}},{key:"eq",value:function(e){return e instanceof r}},{key:"getBookmark",value:function(){return kn}}],[{key:"fromJSON",value:function(e){return new r(e)}}]),r}();function bn(e){d(this,bn),this.anchor=e}sn.jsonID("all",yn);var kn={map:function(){return this},resolve:function(e){return new yn(e)}};function wn(e,t,n,r,o,i){var a=5<arguments.length&&void 0!==i&&i;if(t.inlineContent)return pn.create(e,n);for(var s=r-(0<o?0:1);0<o?s<t.childCount:0<=s;s+=o){var u=t.child(s);if(u.isAtom){if(!a&&mn.isSelectable(u))return mn.create(e,n-(o<0?u.nodeSize:0))}else{var l=wn(e,u,n+o,o<0?u.childCount:0,o,a);if(l)return l}n+=u.nodeSize*o}return null}function xn(e,t,n){var o,r=e.steps.length-1;r<t||((t=e.steps[r])instanceof zt||t instanceof _t)&&(e.mapping.maps[r].forEach(function(e,t,n,r){null==o&&(o=r)}),e.setSelection(sn.near(e.doc.resolve(o),n)))}var Dn=function(){m(r,on);var n=b(r);function r(e){var t;return d(this,r),(t=n.call(this,e.doc)).curSelectionFor=0,t.updated=0,t.meta=Object.create(null),t.time=Date.now(),t.curSelection=e.selection,t.storedMarks=e.storedMarks,t}return h(r,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}},{key:"selectionSet",get:function(){return 0<(1&this.updated)}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return me.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return 0<(2&this.updated)}},{key:"addStep",value:function(e,t){ie(v(r.prototype),"addStep",this).call(this,e,t),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||me.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o,i=this.storedMarks;return i||(o=this.doc.resolve(t),i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))),this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(sn.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return 0<(4&this.updated)}}]),r}();function Cn(e,t){return t&&e?e.bind(t):e}var En=h(function e(t,n,r){d(this,e),this.name=t,this.init=Cn(n.init,r),this.apply=Cn(n.apply,r)}),On=[new En("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new En("selection",{init:function(e,t){return e.selection||sn.atStart(t.doc)},apply:function(e){return e.selection}}),new En("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new En("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Sn=h(function e(t,n){var r=this;d(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=On.slice(),n&&n.forEach(function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),(r.pluginsByKey[e.key]=e).spec.state&&r.fields.push(new En(e.key,e.spec.state,e))})}),An=(h(jn,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,u=r?r[i].state:this,u=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,u,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<i?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new jn(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}},{key:"tr",get:function(){return new Dn(this)}},{key:"reconfigure",value:function(e){for(var t=new Sn(this.schema,e.plugins),n=t.fields,r=new jn(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}}],[{key:"create",value:function(e){for(var t=new Sn((e.doc?e.doc.type:e).schema,e.plugins),n=new jn(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}},{key:"fromJSON",value:function(o,i,a){if(!i)throw new RangeError("Invalid input for EditorState.fromJSON");if(!o.schema)throw new RangeError("Required config field 'schema' missing");var e=new Sn(o.schema,o.plugins),s=new jn(e);return e.fields.forEach(function(e){if("doc"==e.name)s.doc=Pe.fromJSON(o.schema,i.doc);else if("selection"==e.name)s.selection=sn.fromJSON(s.doc,i.selection);else if("storedMarks"==e.name)i.storedMarks&&(s.storedMarks=i.storedMarks.map(o.schema.markFromJSON));else{if(a)for(var t in a){var n=a[t],r=n.spec.state;if(n.key==e.name&&r&&r.fromJSON&&Object.prototype.hasOwnProperty.call(i,t))return void(s[e.name]=r.fromJSON.call(n,o,i[t],s))}s[e.name]=e.init(o,s)}}),s}}]),jn);function jn(e){d(this,jn),this.config=e}var Mn=(h(Tn,[{key:"getState",value:function(e){return e[this.key]}}]),Tn),Nn=Object.create(null);function Tn(e){d(this,Tn),this.spec=e,this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.key=e.key?e.key.key:Fn("plugin")}function Fn(e){return e in Nn?e+"$"+ ++Nn[e]:(Nn[e]=0,e+"$")}var Pn=(h(Un,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),Un),Rn="undefined"!=typeof navigator?navigator:null,Bn="undefined"!=typeof document?document:null,In=Rn&&Rn.userAgent||"",Ln=/Edge\/(\d+)/.exec(In),zn=/MSIE \d/.exec(In),_n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(In),Vn=!!(zn||_n||Ln),$n=zn?document.documentMode:_n?+_n[1]:Ln?+Ln[1]:0,Hn=!Vn&&/gecko\/(\d+)/i.test(In);function Un(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"key";d(this,Un),this.key=Fn(e)}Hn&&/Firefox\/(\d+)/.exec(In);function Wn(e){return(e=e.assignedSlot||e.parentNode)&&11==e.nodeType?e.host:e}var t=!Vn&&/Chrome\/(\d+)/.exec(In),qn=!!t,zn=t?+t[1]:0,Jn=!Vn&&!!Rn&&/Apple Computer/.test(Rn.vendor),Kn=Jn&&(/Mobile\/\w+/.test(In)||!!Rn&&2<Rn.maxTouchPoints),Qn=Kn||!!Rn&&/Mac/.test(Rn.platform),Gn=/Android \d/.test(In),Yn=!!Bn&&"webkitFontSmoothing"in Bn.documentElement.style,_n=Yn?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Xn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Zn=null,er=function(e,t,n){var r=Zn=Zn||document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},tr=function(e,t,n,r){return n&&(rr(e,t,n,r,-1)||rr(e,t,n,r,1))},nr=/^(img|br|input|textarea|hr)$/i;function rr(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:or(e))){var i=e.parentNode;if(!i||1!=i.nodeType||function(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}(e)||nr.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Xn(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?or(e):0}}}function or(e){return(3==e.nodeType?e.nodeValue:e.childNodes).length}var ir=function(e){var t=e.isCollapsed;return t&&qn&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function ar(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function sr(e,t){return"number"==typeof e?e:e[t]}function ur(e,t,n){for(var r,o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=n||e.dom;s;s=Wn(s))if(1==s.nodeType){var u,l=s,c=l==a.body,f=c?{left:0,right:(r=a).documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}:(u=f=d=void 0,d=(p=l).getBoundingClientRect(),f=d.width/p.offsetWidth||1,u=d.height/p.offsetHeight||1,{left:d.left,right:d.left+p.clientWidth*f,top:d.top,bottom:d.top+p.clientHeight*u}),d=0,p=0;if(t.top<f.top+sr(o,"top")?p=-(f.top-t.top+sr(i,"top")):t.bottom>f.bottom-sr(o,"bottom")&&(p=t.bottom-f.bottom+sr(i,"bottom")),t.left<f.left+sr(o,"left")?d=-(f.left-t.left+sr(i,"left")):t.right>f.right-sr(o,"right")&&(d=t.right-f.right+sr(i,"right")),(d||p)&&(c?a.defaultView.scrollBy(d,p):(u=l.scrollLeft,f=l.scrollTop,p&&(l.scrollTop+=p),d&&(l.scrollLeft+=d),u=l.scrollLeft-u,f=l.scrollTop-f,t={left:t.left-u,top:t.top-f,right:t.right-u,bottom:t.bottom-f})),c)break}}function lr(e){for(var t=[],n=e.ownerDocument,r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Wn(r));return t}function cr(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,r=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=r&&(o.scrollLeft=r)}}var fr=null;function dr(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function pr(e,t){var n,r=e.dom.ownerDocument,o=0;if(r.caretPositionFromPoint)try{var i=r.caretPositionFromPoint(t.left,t.top);i&&(n=i.offsetNode,o=i.offset)}catch(e){}n||!r.caretRangeFromPoint||(u=r.caretRangeFromPoint(t.left,t.top))&&(n=u.startContainer,o=u.startOffset);var a,s,u,l,c,f,d=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=e.dom.getBoundingClientRect();if(!dr(t,p))return null;if(!(d=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),a=i;;){var s=t.childNodes[a];if(1==s.nodeType)for(var u=s.getClientRects(),l=0;l<u.length;l++){var c=u[l];if(dr(n,c))return e(s,n,c)}if((a=(a+1)%o)==i)break}return t}(e.dom,t,p)))return null}if(Jn)for(var h=d;n&&h;h=Wn(h))h.draggable&&(n=void 0);s=t,d=(u=(l=d).parentNode)&&/^li$/i.test(u.nodeName)&&s.left<l.getBoundingClientRect().left?u:l,n&&(Hn&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length&&("IMG"==(c=n.childNodes[o]).nodeName&&(f=c.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&o++),n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return-1<o?o:e.docView.posFromDOM(t,n,1)}(e,n,o,t))),null==a&&(p=e,u=function e(t,n){for(var r,o,i=2e8,a=0,s=n.top,u=n.top,l=t.firstChild,c=0;l;l=l.nextSibling,c++){var f=void 0;if(1==l.nodeType)f=l.getClientRects();else{if(3!=l.nodeType)continue;f=er(l).getClientRects()}for(var d=0;d<f.length;d++){var p=f[d];if(p.top<=s&&p.bottom>=u){s=Math.max(p.bottom,s),u=Math.min(p.top,u);var h=p.left>n.left?p.left-n.left:p.right<n.left?n.left-p.right:0;if(h<i){r=l,o=(i=h)&&3==r.nodeType?{left:p.right<n.left?p.right:p.left,top:n.top}:n,1==l.nodeType&&h&&(a=c+(n.left>=(p.left+p.right)/2?1:0));continue}}!r&&(n.left>=p.right&&n.top>=p.top||n.left>=p.left&&n.top>=p.bottom)&&(a=c+1)}}return r&&3==r.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=hr(r,1);if(i.top!=i.bottom&&dr(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(r,o):!r||i&&1==r.nodeType?{node:t,offset:a}:e(r,o)}(d,s=t),l=u.node,c=u.offset,f=-1,1!=l.nodeType||l.firstChild||(f=(u=l.getBoundingClientRect()).left!=u.right&&s.left>(u.left+u.right)/2?1:-1),a=p.docView.posFromDOM(l,c,f));d=e.docView.nearestDesc(d,!0);return{pos:a,inside:d?d.posAtStart-d.border:-1}}function hr(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var mr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function vr(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,r=Yn||Hn;if(3==o.nodeType){if(!r||!mr.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var a=i,s=i,u=n<0?1:-1;return n<0&&!i?(s++,u=-1):0<=n&&i==o.nodeValue.length?(a--,u=1):n<0?a--:s++,gr(hr(er(o,a,s),u),u<0)}a=hr(er(o,i,i),n);if(Hn&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){s=hr(er(o,i-1,i-1),-1);if(s.top==a.top){u=hr(er(o,i,i+1),-1);if(u.top!=a.top)return gr(u,u.left<s.left)}}return a}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==or(o))){t=o.childNodes[i-1];if(1==t.nodeType)return yr(t.getBoundingClientRect(),!1)}if(i<or(o)){var l=o.childNodes[i];if(1==l.nodeType)return yr(l.getBoundingClientRect(),!0)}return yr(o.getBoundingClientRect(),0<=n)}if(i&&(n<0||i==or(o))){l=o.childNodes[i-1],l=3==l.nodeType?er(l,or(l)-(r?0:1)):1!=l.nodeType||"BR"==l.nodeName&&l.nextSibling?null:l;if(l)return gr(hr(l,1),!1)}if(i<or(o)){for(var c=o.childNodes[i];c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;r=c?3==c.nodeType?er(c,0,r?0:1):1==c.nodeType?c:null:null;if(r)return gr(hr(r,-1),!0)}return gr(hr(3==o.nodeType?er(o):o,-n),0<=n)}function gr(e,t){if(0==e.width)return e;t=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:t,right:t}}function yr(e,t){if(0==e.height)return e;t=t?e.top:e.bottom;return{top:t,bottom:t,left:e.left,right:e.right}}function br(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var kr=/[\u0590-\u08ac]/,wr=null,xr=null,Dr=!1;var Cr=(h(jr,[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>Xn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var u=e;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.previousSibling)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return(null==s?0<n:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(e<s||a instanceof Tr){o=e-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof Er&&0<=n.side;r--);if(t<=0){for(var u,l=!0;(u=r?this.children[r-1]:null)&&u.dom.parentNode!=this.contentDOM;r--,l=!1);return u&&t&&l&&!u.border&&!u.domAtom?u.domFromPos(u.size,t):{node:this.contentDOM,offset:u?Xn(u.dom)+1:0}}for(var c,f=!0;(c=r<this.children.length?this.children[r]:null)&&c.dom.parentNode!=this.contentDOM;r++,f=!1);return c&&f&&!c.border&&!c.domAtom?c.domFromPos(0,t):{node:this.contentDOM,offset:c?Xn(c.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],u=i+s.size;if(-1==r&&e<=u){var l=i+s.border;if(l<=e&&t<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var c=a;0<c;c--){var f=this.children[c-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=Xn(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(-1<r&&(t<u||a==this.children.length-1)){t=u;for(var d=a+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=Xn(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,t=t.offset;if(1!=n.nodeType||t==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[t]}},{key:"setSelection",value:function(e,t,n){for(var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var u=this.children[a],l=s+u.size;if(s<o&&i<l)return u.setSelection(e-s-u.border,t-s-u.border,n,r);s=l}var c=this.domFromPos(e,e?-1:1),f=t==e?c:this.domFromPos(t,t?-1:1),d=n.getSelection(),p=!1;if((Hn||Jn)&&e==t){var h=c.node,m=c.offset;if(3==h.nodeType){if((p=!(!m||"\n"!=h.nodeValue[m-1]))&&m==h.nodeValue.length)for(var v=h;v;v=v.parentNode){if(g=v.nextSibling){"BR"==g.nodeName&&(c=f={node:g.parentNode,offset:Xn(g)+1});break}var g=v.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else var y=h.childNodes[m-1],p=y&&("BR"==y.nodeName||"false"==y.contentEditable)}if(Hn&&d.focusNode&&d.focusNode!=f.node&&1==d.focusNode.nodeType&&((y=d.focusNode.childNodes[d.focusOffset])&&"false"==y.contentEditable&&(r=!0)),r||p&&Jn||!tr(c.node,c.offset,d.anchorNode,d.anchorOffset)||!tr(f.node,f.offset,d.focusNode,d.focusOffset)){var b,k=!1;if((d.extend||e==t)&&!p){d.collapse(c.node,c.offset);try{e!=t&&d.extend(f.node,f.offset),k=!0}catch(e){if(!(e instanceof DOMException))throw e}}k||(t<e&&(b=c,c=f,f=b),(b=document.createRange()).setEnd(f.node,f.offset),b.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(b))}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&n<=t:e<i&&n<t){var a=n+o.border,s=i-o.border;if(a<=e&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}}]),jr),Er=function(){m(s,Cr);var a=b(s);function s(e,t,n,r){d(this,s);var o,i=t.type.toDOM;return"function"==typeof i&&(i=i(n,function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r})),t.type.spec.raw||(1!=i.nodeType&&((n=document.createElement("span")).appendChild(i),i=n),i.contentEditable="false",i.classList.add("ProseMirror-widget")),(i=a.call(this,e,[],i,null)).widget=t,i.widget=t,o=c(i),i}return h(s,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),ie(v(s.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}]),s}(),Or=function(){m(i,Cr);var o=b(i);function i(e,t,n,r){return d(this,i),(t=o.call(this,e,[],t,null)).textDOM=n,t.text=r,t}return h(i,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}]),i}(),Sr=function(){m(s,Cr);var o=b(s);function s(e,t,n,r){return d(this,s),(r=o.call(this,e,[],n,r)).mark=t,r}return h(s,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,t){if(ie(v(s.prototype),"markDirty",this).call(this,e,t),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,t,n){var r=s.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=Ur(o,t,i,n)),0<e&&(o=Ur(o,0,e,n));for(var a=0;a<o.length;a++)o[a].parent=r;return r.children=o,r}}],[{key:"create",value:function(e,t,n,r){var o=r.nodeViews[t.type.name],r=o&&o(t,r,n);return r&&r.dom||(r=gt.renderSpec(document,t.type.spec.toDOM(t,n))),new s(e,t,r.dom,r.contentDOM||r.dom)}}]),s}(),Ar=function(){m(f,Cr);var l=b(f);function f(e,t,n,r,o,i,a,s,u){return d(this,f),(o=l.call(this,e,[],o,i)).node=t,o.outerDeco=n,o.innerDeco=r,o.nodeDOM=a,i&&o.updateChildren(s,u),o}return h(f,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;0<=n;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return ce.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&zr(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(i,e){var r=this,a=this.node.inlineContent,s=e,u=i.composing?this.localCompositionInfo(i,e):null,t=u&&-1<u.pos?u:null,l=u&&u.pos<0,c=new Vr(this,t&&t.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],u=null,l=0;;){if(a<o.length&&o[a].to==i){for(var c=o[a++],f=void 0;a<o.length&&o[a].to==i;)(f=f||[c]).push(o[a++]);if(f){f.sort(Hr);for(var d=0;d<f.length;d++)n(f[d],l,!!u)}else n(c,l,!!u)}var p=void 0,h=void 0;if(u)h=-1,p=u,u=null;else{if(!(l<e.childCount))break;h=l,p=e.child(l++)}for(var m=0;m<s.length;m++)s[m].to<=i&&s.splice(m--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)s.push(o[a++]);var v=i+p.nodeSize;if(p.isText){var g=v;a<o.length&&o[a].from<g&&(g=o[a].from);for(var y=0;y<s.length;y++)s[y].to<g&&(g=s[y].to);g<v&&(u=p.cut(g-i),p=p.cut(0,g-i),v=g,h=-1)}r(p,p.isInline&&!p.isLeaf?s.filter(function(e){return!e.inline}):s.slice(),t.forChild(i,p),h),i=v}else for(var b=0;b<e.childCount;b++){var k=e.child(b);r(k,o,t.forChild(i,k),b),i+=k.nodeSize}}(this.node,this.innerDeco,function(e,t,n){e.spec.marks?c.syncToMarks(e.spec.marks,a,i):0<=e.type.side&&!n&&c.syncToMarks(t==r.node.childCount?me.none:r.node.child(t).marks,a,i),c.placeWidget(e,i,s)},function(e,t,n,r){var o;c.syncToMarks(e.marks,a,i),c.findNodeMatch(e,t,n,r)||l&&i.state.selection.from>s&&i.state.selection.to<s+e.nodeSize&&-1<(o=c.findIndexWithChild(u.node))&&c.updateNodeAt(e,t,n,o,i)||c.updateNextNode(e,t,n,i,r)||c.addNode(e,t,n,i,s),s+=e.nodeSize}),c.syncToMarks([],a,i),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),!c.changed&&2!=this.dirty||(t&&this.protectLocalComposition(i,t),function e(t,n,r){for(var o=t.firstChild,i=!1,a=0;a<n.length;a++){var s,u=n[a],l=u.dom;if(l.parentNode==t){for(;l!=o;)o=_r(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(l,o);u instanceof Sr&&(s=o?o.previousSibling:t.lastChild,e(u.contentDOM,u.children,r),o=s?s.nextSibling:t.firstChild)}for(;o;)o=_r(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,i),Kn&&("UL"!=(e=this.dom).nodeName&&"OL"!=e.nodeName||(t=e.style.cssText,e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t)))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof pn)||r<t||o>t+this.node.content.size)return null;n=e.domSelection(),e=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&0<t){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=or(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(n.focusNode,n.focusOffset);if(!e||!this.dom.contains(e.parentNode))return null;if(this.node.inlineContent){n=e.nodeValue,t=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var u=a.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;u+=l.text}if(n<=i){a=s<r?u.lastIndexOf(t,r-s-1):-1;if(0<=a&&a+t.length+s>=n)return s+a;if(n==r&&u.length>=r+t.length-s&&u.slice(r-s,r-s+t.length)==t)return r}}}return-1}(this.node.content,n,r-t,o-t);return t<0?null:{node:e,pos:t,text:n}}return{node:e,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,t=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}n=new Or(this,o,n,t);e.input.compositionNodes.push(n),this.children=Ur(this.children,r,r+t.length,e,n)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){var t,n;zr(e,this.outerDeco)||(t=1!=this.nodeDOM.nodeType,n=this.dom,this.dom=Ir(this.dom,this.nodeDOM,Br(this.outerDeco,this.node,t),Br(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e)}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,t,n,r,o,i){var a,s=o.nodeViews[t.type.name],u=s&&s(t,o,function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:i},n,r),l=u&&u.dom,s=u&&u.contentDOM;if(t.isText)if(l){if(3!=l.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else l=document.createTextNode(t.text);else l||(l=(c=gt.renderSpec(document,t.type.spec.toDOM(t))).dom,s=c.contentDOM);s||t.isText||"BR"==l.nodeName||(l.hasAttribute("contenteditable")||(l.contentEditable="false"),t.type.spec.draggable&&(l.draggable=!0));var c=l;return l=Lr(l,n,t),u?a=new Fr(e,t,n,r,l,s||null,c,u,o,i+1):t.isText?new Nr(e,t,n,r,l,c,o):new f(e,t,n,r,l,s||null,c,o,i+1)}}]),f}();function jr(e,t,n,r){d(this,jr),this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}function Mr(e,t,n,r,o){return Lr(r,t,e),new Ar(void 0,e,t,n,r,r,r,o,0)}var Nr=function(){m(u,Ar);var s=b(u);function u(e,t,n,r,o,i,a){return d(this,u),s.call(this,e,t,n,r,o,null,i,a,0)}return h(u,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0))}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):ie(v(u.prototype),"localPosFromDOM",this).call(this,e,t,n)}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,t,n){e=this.node.cut(e,t),t=document.createTextNode(e.text);return new u(this.parent,e,this.outerDeco,this.innerDeco,t,t,n)}},{key:"markDirty",value:function(e,t){ie(v(u.prototype),"markDirty",this).call(this,e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}}]),u}(),Tr=function(){m(t,Cr);var e=b(t);function t(){return d(this,t),e.apply(this,arguments)}return h(t,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return 0==this.dirty&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}]),t}(),Fr=function(){m(f,Ar);var c=b(f);function f(e,t,n,r,o,i,a,s,u,l){return d(this,f),(l=c.call(this,e,t,n,r,o,i,a,u,l)).spec=s,l}return h(f,[{key:"update",value:function(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&ie(v(f.prototype),"update",this).call(this,e,t,n,r)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():ie(v(f.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():ie(v(f.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):ie(v(f.prototype),"setSelection",this).call(this,e,t,n,r)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),ie(v(f.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):ie(v(f.prototype),"ignoreMutation",this).call(this,e)}}]),f}();var Pr=function(e){e&&(this.nodeName=e)};Pr.prototype=Object.create(null);var Rr=[new Pr];function Br(e,t,n){if(0==e.length)return Rr;for(var r=n?Rr[0]:new Pr,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new Pr(a.nodeName)),a){var u=a[s];null!=u&&(n&&1==o.length&&o.push(r=new Pr(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return o}function Ir(e,t,n,r){if(n==Rr&&r==Rr)return t;for(var o=t,i=0;i<r.length;i++){var a,s=r[i],u=n[i];i&&(a=void 0,u&&u.nodeName==s.nodeName&&o!=e&&(a=o.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||((a=document.createElement(s.nodeName)).pmIsDeco=!0,a.appendChild(o),u=Rr[0]),o=a),function(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var u=0;u<a.length;u++)-1==i.indexOf(a[u])&&e.classList.add(a[u]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var l,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=c.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}(o,u||Rr[0],s)}return o}function Lr(e,t,n){return Ir(e,e,Rr,Br(t,n,1!=e.nodeType))}function zr(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function _r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Vr=(h($r,[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a,s=-1,u=this.index;u<Math.min(this.index+3,this.top.children.length);u++)if(this.top.children[u].matchesMark(e[o])){s=u;break}-1<s?(s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index]):(a=Sr.create(this.top,e[o],t,n),this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0),this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var u=this.top.children[a];if(u.matchesNode(e,t,n)&&!this.preMatch.matched.has(u)){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof Ar){var s=this.preMatch.matched.get(a);if(null!=s&&s!=o)return!1;s=a.dom;if((!this.lock||!(s==this.lock||1==s.nodeType&&s.contains(this.lock.parentNode))||e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&zr(t,a.outerDeco))&&a.update(e,t,n,r))return this.destroyBetween(this.index,i),a.dom!=s&&(this.changed=!0),this.index++,!0;break}}return!1}},{key:"addNode",value:function(e,t,n,r,o){this.top.children.splice(this.index++,0,Ar.create(this.top,e,t,n,r,o)),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode?(n=new Er(this.top,e,t,n),this.top.children.splice(this.index++,0,n),this.changed=!0):this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],t=this.top;e instanceof Sr;)e=(t=e).children[t.children.length-1];e&&e instanceof Nr&&!/\n$/.test(e.node.text)||((Jn||qn)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){var n;t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e)?this.index++:(n=document.createElement(e),"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak"),n=new Tr(this.top,[],n,null),t!=this.top?t.children.push(n):t.children.splice(this.index++,0,n),this.changed=!0)}}]),$r);function $r(e,t){d(this,$r),this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,a=[];e:for(;0<o;){for(var s=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof Sr)){s=u,r--;break}r=(n=u).children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var l=s.node;if(l){if(l!=e.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(e.node.content,e)}function Hr(e,t){return e.type.side-t.type.side}function Ur(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var u=e[a],l=s,c=s+=u.size;n<=l||c<=t?i.push(u):(l<t&&i.push(u.slice(0,t-l,r)),o&&(i.push(o),o=void 0),n<c&&i.push(u.slice(n-l,u.size,r)))}return i}function Wr(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=e.domSelection(),o=e.state.doc;if(!r.focusNode)return null;var i=e.docView.nearestDesc(r.focusNode),a=i&&0==i.size,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;var u,l=o.resolve(s);if(ir(r)){for(u=l;i&&!i.node;)i=i.parent;var c,t=i.node;!(i&&t.isAtom&&mn.isSelectable(t)&&i.parent)||t.isInline&&function(e,t,n){for(var r=0==t,o=t==or(e);r||o;){if(e==n)return 1;var i=Xn(e);if(!(e=e.parentNode))return;r=r&&0==i,o=o&&i==or(e)}}(r.focusNode,r.focusOffset,i.dom)||(c=i.posBefore,c=new mn(s==c?l:o.resolve(c)))}else{r=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(r<0)return null;u=o.resolve(r)}return c=c||eo(e,u,l,"pointer"==n||e.state.selection.head<l.pos&&!a?1:-1)}function qr(e){return e.editable?e.hasFocus():no(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Jr(e,t){var n,r,o,i,a=1<arguments.length&&void 0!==t&&t,s=e.state.selection;if(Xr(e,s),qr(e)){if(!a&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&qn){var u=e.domSelection(),l=e.domObserver.currentSelection;if(u.anchorNode&&l.anchorNode&&tr(u.anchorNode,u.anchorOffset,l.anchorNode,l.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}e.domObserver.disconnectSelection(),e.cursorWrapper?(t=(o=e).domSelection(),u=document.createRange(),i=o.cursorWrapper.dom,(l="IMG"==i.nodeName)?u.setEnd(i.parentNode,Xn(i)+1):u.setEnd(i,0),u.collapse(!1),t.removeAllRanges(),t.addRange(u),!l&&!o.state.selection.visible&&Vn&&$n<=11&&(i.disabled=!0,i.disabled=!1)):(o=s.anchor,i=s.head,!Kr||s instanceof pn||(s.$from.parent.inlineContent||(n=Qr(e,s.from)),s.empty||s.$from.parent.inlineContent||(r=Qr(e,s.to))),e.docView.setSelection(o,i,e.root,a),Kr&&(n&&Yr(n),r&&Yr(r)),s.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(function(){qr(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))),e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var Kr=Jn||qn&&zn<63;function Qr(e,t){var n=e.docView.domFromPos(t,0),e=n.node,t=n.offset,n=t<e.childNodes.length?e.childNodes[t]:null,t=t?e.childNodes[t-1]:null;return Jn&&n&&"false"==n.contentEditable?Gr(n):n&&"false"!=n.contentEditable||t&&"false"!=t.contentEditable?void 0:n?Gr(n):t?Gr(t):void 0}function Gr(e){return e.contentEditable="true",Jn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Yr(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Xr(e,t){t instanceof mn?(t=e.docView.descAt(t.from))!=e.lastSelectedViewDesc&&(Zr(e),t&&t.selectNode(),e.lastSelectedViewDesc=t):Zr(e)}function Zr(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function eo(t,n,r,e){return t.someProp("createSelectionBetween",function(e){return e(t,n,r)})||pn.between(n,r,e)}function to(e){return(!e.editable||e.root.activeElement==e.dom)&&no(e)}function no(e){var t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function ro(e,t){var n=e.selection,r=n.$anchor,n=n.$head,n=0<t?r.max(n):r.min(n),n=n.parent.inlineContent?n.depth?e.doc.resolve(0<t?n.after():n.before()):null:n;return n&&sn.findFrom(n,t)}function oo(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function io(e,t,n){var r=e.state.selection;if(!(r instanceof pn)){if(r instanceof mn&&r.node.isInline)return oo(e,new pn(0<t?r.$to:r.$from));var o=ro(e.state,t);return!!o&&oo(e,o)}if(!r.empty||-1<n.indexOf("s"))return!1;if(e.endOfTextblock(0<t?"right":"left")){var i=ro(e.state,t);return!!(i&&i instanceof mn)&&oo(e,i)}if(!(Qn&&-1<n.indexOf("m"))){o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;n=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(r=e.docView.descAt(n))&&!r.contentDOM)&&(mn.isSelectable(i)?oo(e,new mn(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!Yn&&oo(e,new pn(e.state.doc.resolve(t<0?n:n+i.nodeSize))))}}function ao(e){return(3==e.nodeType?e.nodeValue:e.childNodes).length}function so(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function uo(e){var t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(Hn&&1==n.nodeType&&r<ao(n)&&so(n.childNodes[r])&&(a=!0);;)if(0<r){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(so(s))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(co(n))break;for(var u=n.previousSibling;u&&so(u);)o=n.parentNode,i=Xn(u),u=u.previousSibling;if(u)r=ao(n=u);else{if((n=n.parentNode)==e.dom)break;r=0}}a?fo(e,t,n,r):o&&fo(e,t,o,i)}}function lo(e){var t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=ao(n);;)if(r<a){if(1!=n.nodeType)break;if(!so(n.childNodes[r]))break;o=n,i=++r}else{if(co(n))break;for(var s=n.nextSibling;s&&so(s);)o=s.parentNode,i=Xn(s)+1,s=s.nextSibling;if(s)r=0,a=ao(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&fo(e,t,o,i)}}function co(e){e=e.pmViewDesc;return e&&e.node&&e.node.isBlock}function fo(e,t,n,r){var o;ir(t)?((o=document.createRange()).setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)):t.extend&&t.extend(n,r),e.domObserver.setCurSelection();var i=e.state;setTimeout(function(){e.state==i&&Jr(e)},50)}function po(e,t,n){var r=e.state.selection;if(r instanceof pn&&!r.empty||-1<n.indexOf("s"))return!1;if(Qn&&-1<n.indexOf("m"))return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){n=ro(e.state,t);if(n&&n instanceof mn)return oo(e,n)}if(o.parent.inlineContent)return!1;i=t<0?o:i,t=r instanceof yn?sn.near(i,t):sn.findFrom(i,t);return!!t&&oo(e,t)}function ho(e,t){if(!(e.state.selection instanceof pn))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,n=n.empty;if(!r.sameParent(o))return!0;if(!n)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;o=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(!o||o.isText)return!1;n=e.state.tr;return t<0?n.delete(r.pos-o.nodeSize,r.pos):n.delete(r.pos,r.pos+o.nodeSize),e.dispatch(n),!0}function mo(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function vo(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;1<o&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||gt.fromSchema(e.state.schema),u=Co(),l=u.createElement("div");l.appendChild(s.serializeFragment(r,{document:u}));for(var c,f=l.firstChild,d=0;f&&1==f.nodeType&&(c=xo[f.nodeName.toLowerCase()]);){for(var p=c.length-1;0<=p;p--){for(var h=u.createElement(c[p]);l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),d++}f=l.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(o," ").concat(i).concat(d?" -".concat(d):""," ").concat(JSON.stringify(n))),{dom:l,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function go(e,t,n,r,o){var i=o.parent.type.spec.code;if(!n&&!t)return null;var a=t&&(r||i||!n);if(a){if(e.someProp("transformPastedText",function(e){t=e(t,i||r)}),i)return t?new ye(ce.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):ye.empty;var s,u,l,c,f=e.someProp("clipboardTextParser",function(e){return e(t,o,r)});f?d=f:(s=o.marks(),u=e.state.schema,l=gt.fromSchema(u),c=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(e){var t=c.appendChild(document.createElement("p"));e&&t.appendChild(l.serializeNode(u.text(e,s)))}))}else e.someProp("transformPastedHTML",function(e){n=e(n)}),c=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Co().createElement("div"),t=/<([a-z][^>\s]+)/i.exec(e);if((n=t&&xo[t[1].toLowerCase()])&&(e=n.map(function(e){return"<"+e+">"}).join("")+e+n.map(function(e){return"</"+e+">"}).reverse().join("")),r.innerHTML=e,n)for(var o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}(n),Yn&&function(e){for(var t=e.querySelectorAll(qn?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(c);var d,f=c&&c.querySelector("[data-pm-slice]"),f=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(f&&f[3])for(var p=+f[3];0<p&&c.firstChild;p--)c=c.firstChild;if(d=d||(e.someProp("clipboardParser")||e.someProp("domParser")||at.fromSchema(e.state.schema)).parseSlice(c,{preserveWhitespace:!(!a&&!f),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||yo.test(e.parentNode.nodeName)?null:{ignore:!0}}}),f)d=function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openStart,a=t.openEnd,s=n.length-2;0<=s;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;o=ce.from(u.create(n[s+1],o)),i++,a++}return new ye(o,i,a)}(wo(d,+f[1],+f[2]),f[4]);else if((d=ye.maxOpen(function(t,n){if(t.childCount<2)return t;for(var e=function(e){var r=n.node(e).contentMatchAt(n.index(e)),o=void 0,i=[];if(t.forEach(function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var n=e(t,n,r,o.lastChild,i+1);return n?o.copy(o.content.replaceChild(o.childCount-1,n)):o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1])?o.copy(o.content.append(ce.from(bo(r,t,i+1)))):void 0}}(n,o,e,i[i.length-1],0))?i[i.length-1]=t:(i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),n=t.contentMatchAt(t.childCount).fillBefore(ce.empty,!0);return t.copy(r.append(n))}(i[i.length-1],o.length)),e=bo(e,n),i.push(e),r=r.matchType(e.type),o=n)}}),i)return{v:ce.from(i)}},r=n.depth;0<=r;r--){var o=e(r);if("object"==typeof o)return o.v}return t}(d.content,o),!0)).openStart||d.openEnd){for(var h=0,m=0,v=d.content.firstChild;h<d.openStart&&!v.type.spec.isolating;h++,v=v.firstChild);for(var g=d.content.lastChild;m<d.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);d=wo(d,h,m)}return e.someProp("transformPasted",function(e){d=e(d)}),d}var yo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function bo(e,t,n){for(var r=2<arguments.length&&void 0!==n?n:0,o=t.length-1;r<=o;o--)e=t[o].create(null,ce.from(e));return e}function ko(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return o<r-1&&(s=ko(s,t,n,r,o+1,i)),n<=o&&(s=t<0?a.contentMatchAt(0).fillBefore(s,1<e.childCount||i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(ce.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function wo(e,t,n){return t<e.openStart&&(e=new ye(ko(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ye(ko(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var xo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Do=null;function Co(){return Do=Do||document.implementation.createHTMLDocument("title")}var Eo={},Oo={},So=h(function e(){d(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null});function Ao(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function jo(n){n.someProp("handleDOMEvents",function(e){for(var t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=function(e){return Mo(n,e)})})}function Mo(t,n){return t.someProp("handleDOMEvents",function(e){e=e[n.type];return!!e&&(e(t,n)||n.defaultPrevented)})}function No(e){return{left:e.clientX,top:e.clientY}}function To(n,e,r,t,o){if(-1==t)return!1;for(var i=n.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=function(t){if(n.someProp(e,function(e){return t>i.depth?e(n,r,i.nodeAfter,i.before(t),o,!0):e(n,r,i.node(t),i.before(t),o,!1)}))return{v:!0}}(a);if("object"==typeof s)return s.v}return!1}function Fo(e,t,n){e.focused||e.focus();t=e.state.tr.setSelection(t);"pointer"==n&&t.setMeta("pointer",!0),e.dispatch(t)}function Po(e){return $o(e)}Oo.keydown=function(t,e){var n,r,o,i,a,s,u,l=e;t.input.shiftKey=16==l.keyCode||l.shiftKey,Lo(t,l)||(t.input.lastKeyCode=l.keyCode,t.input.lastKeyCodeTime=Date.now(),Gn&&qn&&13==l.keyCode)||(229!=l.keyCode&&t.domObserver.forceFlush(),!Kn||13!=l.keyCode||l.ctrlKey||l.altKey||l.metaKey?t.someProp("handleKeyDown",function(e){return e(t,l)})||(r=t,u=(o=l).keyCode,a="",o.ctrlKey&&(a+="c"),o.metaKey&&(a+="m"),o.altKey&&(a+="a"),o.shiftKey&&(a+="s"),e=a,8==u||Qn&&72==u&&"c"==e?ho(r,-1)||uo(r):46==u||Qn&&68==u&&"c"==e?ho(r,1)||lo(r):13==u||27==u||(37==u||Qn&&66==u&&"c"==e?io(r,-1,e)||uo(r):39==u||Qn&&70==u&&"c"==e?io(r,1,e)||lo(r):38==u||Qn&&80==u&&"c"==e?po(r,-1,e)||uo(r):40==u||Qn&&78==u&&"c"==e?(i=r,!Jn||0<i.state.selection.$head.parentOffset||(a=(o=i.domSelection()).focusNode,o=o.focusOffset,a&&1==a.nodeType&&0==o&&a.firstChild&&"false"==a.firstChild.contentEditable&&(s=a.firstChild,mo(i,s,"true"),setTimeout(function(){return mo(i,s,"false")},20))),po(r,1,e)||lo(r)):e==(Qn?"m":"c")&&(66==u||73==u||89==u||90==u)))?l.preventDefault():Ao(t,"key"):(n=Date.now(),t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(function(){t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",function(e){return e(t,ar(13,"Enter"))}),t.input.lastIOSEnter=0)},200)))},Oo.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},Oo.keypress=function(t,e){var n,r,o=e;Lo(t,o)||!o.charCode||o.ctrlKey&&!o.altKey||Qn&&o.metaKey||(t.someProp("handleKeyPress",function(e){return e(t,o)})?o.preventDefault():(n=t.state.selection)instanceof pn&&n.$from.sameParent(n.$to)||(r=String.fromCharCode(o.charCode),t.someProp("handleTextInput",function(e){return e(t,n.$from.pos,n.$to.pos,r)})||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),o.preventDefault()))};var Ro=Qn?"metaKey":"ctrlKey";Eo.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r,o=Po(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&(r=e.input.lastClick,t=r.x-n.clientX,r=r.y-n.clientY,t*t+r*r<100)&&!n[Ro]&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a};i=e.posAtCoords(No(n));i&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Bo(e,i,n,!!o)):("doubleClick"==a?function(t,n,e,r){return To(t,"handleDoubleClickOn",n,e,r)||t.someProp("handleDoubleClick",function(e){return e(t,n,r)})}:function(t,n,e,s){return To(t,"handleTripleClickOn",n,e,s)||t.someProp("handleTripleClick",function(e){return e(t,n,s)})||function(e,t){if(0!=s.button)return!1;var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Fo(e,pn.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;0<o;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)Fo(e,pn.create(n,a+1,a+1+i.content.size),"pointer");else{if(!mn.isSelectable(i))continue;Fo(e,mn.create(n,a),"pointer")}return!0}}(t,e)})(e,i.pos,i.inside,n)?n.preventDefault():Ao(e,"pointer"))};var Bo=(h(Io,[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return Jr(e.view)}),this.view.input.mouseDown=null}},{key:"up",value:function(e){var t,n,r,o,i,a;this.done(),this.view.dom.contains(e.target)&&(t=this.pos,this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(No(e))),this.allowDefault||!t?Ao(this.view,"pointer"):(n=this.view,r=t.pos,o=t.inside,i=e,a=this.selectNode,To(n,"handleClickOn",r,o,i)||n.someProp("handleClick",function(e){return e(n,r,i)})||(a?function(e,t){if(-1!=t){var n,r,o=e.state.selection;o instanceof mn&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(mn.isSelectable(s)){r=n&&0<o.$from.depth&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(Fo(e,mn.create(e.state.doc,r),"pointer"),1)}}:function(e,t){if(-1!=t){var n=e.state.doc.resolve(t),t=n.nodeAfter;return t&&t.isAtom&&mn.isSelectable(t)&&(Fo(e,new mn(n),"pointer"),1)}})(n,o)?e.preventDefault():0==e.button&&(this.flushed||Jn&&this.mightDrag&&!this.mightDrag.node.isAtom||qn&&!(this.view.state.selection instanceof pn)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Fo(this.view,sn.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ao(this.view,"pointer")))}},{key:"move",value:function(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0),Ao(this.view,"pointer"),0==e.buttons&&this.done()}}]),Io);function Io(e,t,n,r){var o,i,a=this;d(this,Io),this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Ro],this.allowDefault=n.shiftKey,i=-1<t.inside?(o=e.state.doc.nodeAt(t.inside),t.inside):(o=(i=e.state.doc.resolve(t.pos)).parent,i.depth?i.before():0);r=r?null:n.target,r=r?e.docView.nearestDesc(r,!0):null;this.target=r?r.dom:null;r=e.state.selection;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||r instanceof mn&&r.from<=i&&r.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Hn||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ao(e,"pointer")}function Lo(e,t){return e.composing||Jn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500&&(e.input.compositionEndedAt=-2e8)}Eo.touchdown=function(e){Po(e),Ao(e,"pointer")},Eo.contextmenu=Po;var zo=Gn?5e3:-1;function _o(e,t){clearTimeout(e.input.composingTimeout),-1<t&&(e.input.composingTimeout=setTimeout(function(){return $o(e)},t))}function Vo(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));0<e.input.compositionNodes.length;)e.input.compositionNodes.pop().markParentsDirty();var t}function $o(e,t){t=1<arguments.length&&void 0!==t&&t;if(!(Gn&&0<=e.domObserver.flushingSoon)){if(e.domObserver.forceFlush(),Vo(e),t||e.docView&&e.docView.dirty){t=Wr(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}Oo.compositionstart=Oo.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||n.marks(),$o(e,!0),e.markCursor=null;else if($o(e),Hn&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.input.composing=!0}_o(e,zo)},Oo.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,_o(e,20))};var Ho=Vn&&$n<15||Kn&&_n<604;function Uo(t,e,n,r){var o=go(t,e,n,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",function(e){return e(t,r,o||ye.empty)}))return 1;if(o){n=0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null,n=n?t.state.tr.replaceSelectionWith(n,t.input.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(n.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),1}}Eo.copy=Oo.cut=function(e,t){var n,r,o,i=t,a=e.state.selection,s="cut"==i.type;a.empty||(r=Ho?null:i.clipboardData,a=(t=vo(e,a.content())).dom,t=t.text,r?(i.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",t)):(r=a,(n=e).dom.parentNode&&((o=n.dom.parentNode.appendChild(document.createElement("div"))).appendChild(r),o.style.cssText="position: fixed; left: -10000px; top: 10px",t=getSelection(),(a=document.createRange()).selectNodeContents(r),n.dom.blur(),t.removeAllRanges(),t.addRange(a),setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o),n.focus()},50))),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")))},Oo.paste=function(e,t){var n,r,o,i,a=t;e.composing&&!Gn||((t=Ho?null:a.clipboardData)&&Uo(e,t.getData("text/plain"),t.getData("text/html"),a)?a.preventDefault():(r=a,(n=e).dom.parentNode&&(o=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(o?"textarea":"div")),o||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(function(){n.focus(),i.parentNode&&i.parentNode.removeChild(i),o?Uo(n,i.value,null,r):Uo(n,i.textContent,i.innerHTML,r)},50))))};var Wo,qo=h(function e(t,n){d(this,e),this.slice=t,this.move=n}),Jo=Qn?"altKey":"ctrlKey";for(Wo in Eo.dragstart=function(e,t){var n,r,o=t,i=e.input.mouseDown;i&&i.done(),o.dataTransfer&&((t=(n=e.state.selection).empty?null:e.posAtCoords(No(o)))&&t.pos>=n.from&&t.pos<=(n instanceof mn?n.to-1:n.to)||(i&&i.mightDrag?e.dispatch(e.state.tr.setSelection(mn.create(e.state.doc,i.mightDrag.pos))):!o.target||1!=o.target.nodeType||(r=e.docView.nearestDesc(o.target,!0))&&r.node.type.spec.draggable&&r!=e.docView&&e.dispatch(e.state.tr.setSelection(mn.create(e.state.doc,r.posBefore)))),n=e.state.selection.content(),r=(i=vo(e,n)).dom,i=i.text,o.dataTransfer.clearData(),o.dataTransfer.setData(Ho?"Text":"text/html",r.innerHTML),o.dataTransfer.effectAllowed="copyMove",Ho||o.dataTransfer.setData("text/plain",i),e.dragging=new qo(n,!o[Jo]))},Eo.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)},Oo.dragover=Oo.dragenter=function(e,t){return t.preventDefault()},Oo.drop=function(t,e){var n,r,o,i,a,s,u=e,l=t.dragging;t.dragging=null,u.dataTransfer&&(!(a=t.posAtCoords(No(u)))||(i=t.state.doc.resolve(a.pos))&&((n=l&&l.slice)?t.someProp("transformPasted",function(e){n=e(n)}):n=go(t,u.dataTransfer.getData(Ho?"Text":"text/plain"),Ho?null:u.dataTransfer.getData("text/html"),!1,i),r=!(!l||u[Jo]),t.someProp("handleDrop",function(e){return e(t,u,n||ye.empty,r)})?u.preventDefault():n&&(u.preventDefault(),null==(o=n?function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;0<=s;s--){var u,l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(0<l?1:0),f=r.node(s);if(1==a?f.canReplace(c,c,o):(u=f.contentMatchAt(c).findWrapping(o.firstChild.type))&&f.canReplaceWith(c,c,u[0]))return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}(t.state.doc,i.pos,n):i.pos)&&(o=i.pos),e=t.state.tr,r&&e.deleteSelection(),a=e.mapping.map(o),l=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,i=e.doc,l?e.replaceRangeWith(a,a,n.content.firstChild):e.replaceRange(a,a,n),e.doc.eq(i)||(a=e.doc.resolve(a),l&&mn.isSelectable(n.content.firstChild)&&a.nodeAfter&&a.nodeAfter.sameMarkup(n.content.firstChild)?e.setSelection(new mn(a)):(s=e.mapping.map(o),e.mapping.maps[e.mapping.maps.length-1].forEach(function(e,t,n,r){return s=r}),e.setSelection(eo(t,a,e.doc.resolve(s)))),t.focus(),t.dispatch(e.setMeta("uiEvent","drop"))))))},Eo.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&Jr(e)},20))},Eo.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Eo.beforeinput=function(t,e){var n;qn&&Gn&&"deleteContentBackward"==e.inputType&&(t.domObserver.flushSoon(),n=t.input.domChangeCount,setTimeout(function(){var e;t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",function(e){return e(t,ar(8,"Backspace"))}))||(e=t.state.selection.$cursor)&&0<e.pos&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())},50))},Oo)Eo[Wo]=Oo[Wo];function Ko(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Qo=(h(ai,[{key:"map",value:function(e,t,n,r){t=e.mapResult(t.from+r,this.side<0?-1:1),r=t.pos;return t.deleted?null:new Xo(r-n,r-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof ai&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ko(this.spec,e.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}]),ai),Go=(h(ii,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,n=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return n<=o?null:new Xo(o,n,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(e){return this==e||e instanceof ii&&Ko(this.attrs,e.attrs)&&Ko(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof ii}}]),ii),Yo=(h(oi,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;r=e.mapResult(t.to+r,-1);return r.deleted||r.pos<=o.pos?null:new Xo(o.pos-n,r.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,r=r.offset;return r==t.from&&!(n=e.child(o)).isText&&r+n.nodeSize==t.to}},{key:"eq",value:function(e){return this==e||e instanceof oi&&Ko(this.attrs,e.attrs)&&Ko(this.spec,e.spec)}},{key:"destroy",value:function(){}}]),oi),Xo=(h(ri,[{key:"copy",value:function(e,t){return new ri(e,t,this.type)}},{key:"eq",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Go}}],[{key:"widget",value:function(e,t,n){return new ri(e,e,new Qo(t,n))}},{key:"inline",value:function(e,t,n,r){return new ri(e,t,new Go(n,r))}},{key:"node",value:function(e,t,n,r){return new ri(e,t,new Yo(n,r))}}]),ri),Zo=[],ei={},ti=(h(ni,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s,u=0;u<this.children.length;u+=3)this.children[u]<t&&this.children[u+1]>e&&(s=this.children[u]+1,this.children[u+2].findInner(e-s,t-s,n,r+s,o))}},{key:"map",value:function(e,t,n){return this==si||0==e.maps.length?this:this.mapInner(e,t,0,0,n||ei)}},{key:"mapInner",value:function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i=i||[]).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,s,u,o){for(var l=e.slice(),i=function(e,t,n,r){for(var o=0;o<l.length;o+=3){var i=l[o+1],a=void 0;i<0||i+u<e||((i=l[o]+u)<=t?l[o+1]=e<=i?-2:-1:s<=n&&(a=r-n-(t-e))&&(l[o]+=a,l[o+1]+=a))}},a=0;a<n.maps.length;a++)n.maps[a].forEach(i);for(var c=!1,f=0;f<l.length;f+=3)if(l[f+1]<0){if(-2==l[f+1]){c=!0,l[f+1]=-1;continue}var d=n.map(e[f]+u),p=d-s;if(p<0||p>=r.content.size){c=!0;continue}var h=n.map(e[f+1]+u,-1)-s,m=r.content.findIndex(p),v=m.index,m=m.offset,v=r.maybeChild(v);v&&m==p&&m+v.nodeSize==h?(d=l[f+2].mapInner(n,v,d+1,e[f]+u+1,o))!=si?(l[f]=p,l[f+1]=h,l[f+2]=d):(l[f+1]=-2,c=!0):c=!0}if(c){var g=pi(function(e,t,a,s,u,n,l){for(var r=0;r<e.length;r+=3)-1==e[r+1]&&function e(t,n){for(var r=0;r<t.local.length;r++){var o=t.local[r].map(s,u,n);o?a.push(o):l.onRemove&&l.onRemove(t.local[r].spec)}for(var i=0;i<t.children.length;i+=3)e(t.children[i+2],t.children[i]+n+1)}(e[r+2],t[r]+n+1);return a}(l,e,t,n,s,u,o),r,0,o);t=g.local;for(var y=0;y<l.length;y+=3)l[y+1]<0&&(l.splice(y,3),y-=3);for(var b=0,k=0;b<g.children.length;b+=3){for(var w=g.children[b];k<l.length&&l[k]<w;)k+=3;l.splice(k,0,g.children[b],g.children[b+1],g.children[b+2])}}return new ti(t.sort(hi),l)}(this.children,i||[],e,t,n,r,o):i?new ni(i.sort(hi),Zo):si}},{key:"add",value:function(e,t){return t.length?this==si?ni.create(e,t):this.addInner(e,t,0):this}},{key:"addInner",value:function(e,o,i){var a,s=this,u=0;e.forEach(function(e,t){var n,r=t+i;if(n=fi(o,e,r)){for(a=a||s.children.slice();u<a.length&&a[u]<t;)u+=3;a[u]==t?a[u+2]=a[u+2].addInner(e,n,r+1):a.splice(u,0,t,t+e.nodeSize,pi(n,e,r+1,ei)),u+=3}});for(var t=ci(u?di(o):o,-i),n=0;n<t.length;n++)t[n].type.valid(e,t[n])||t.splice(n--,1);return new ni(t.length?this.local.concat(t).sort(hi):this.local,a||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==si?this:this.removeInner(e,0)}},{key:"removeInner",value:function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i,a,s=void 0,u=n[o]+t,l=n[o+1]+t,c=0;c<e.length;c++)(i=e[c])&&i.from>u&&i.to<l&&(e[c]=null,(s=s||[]).push(i));s&&(n==this.children&&(n=this.children.slice()),(a=n[o+2].removeInner(s,u+1))!=si?n[o+2]=a:(n.splice(o,3),o-=3))}if(r.length)for(var f,d=0;d<e.length;d++)if(f=e[d])for(var p=0;p<r.length;p++)r[p].eq(f,t)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ni(r,n):si}},{key:"forChild",value:function(e,t){if(this==si)return this;if(t.isLeaf)return ni.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var u,l,c=this.local[s];c.from<a&&c.to>i&&c.type instanceof Go&&((u=Math.max(i,c.from)-i)<(l=Math.min(a,c.to)-i)&&(r=r||[]).push(c.copy(u,l)))}if(r){t=new ni(r.sort(hi),Zo);return n?new ui([t,n]):t}return n||si}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof ni)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}},{key:"locals",value:function(e){return mi(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==si)return Zo;if(e.inlineContent||!this.local.some(Go.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Go||t.push(this.local[n]);return t}}],[{key:"create",value:function(e,t){return t.length?pi(t,e,0,ei):si}}]),ni);function ni(e,t){d(this,ni),this.local=e.length?e:Zo,this.children=t.length?t:Zo}function ri(e,t,n){d(this,ri),this.from=e,this.to=t,this.type=n}function oi(e,t){d(this,oi),this.attrs=e,this.spec=t||ei}function ii(e,t){d(this,ii),this.attrs=e,this.spec=t||ei}function ai(e,t){d(this,ai),this.toDOM=e,this.spec=t||ei,this.side=this.spec.side||0}ti.empty=new ti([],[]),ti.removeOverlap=mi;var si=ti.empty,ui=(h(li,[{key:"map",value:function(t,n){var e=this.members.map(function(e){return e.map(t,n,ei)});return li.from(e)}},{key:"forChild",value:function(e,t){if(t.isLeaf)return ti.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=si&&(o instanceof li?n=n.concat(o.members):n.push(o))}return li.from(n)}},{key:"eq",value:function(e){if(!(e instanceof li)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?mi(n?t:t.sort(hi)):Zo}}],[{key:"from",value:function(e){switch(e.length){case 0:return si;case 1:return e[0];default:return new li(e)}}}]),li);function li(e){d(this,li),this.members=e}function ci(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Xo(o.from+t,o.to+t,o.type))}return n}function fi(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<o&&((i=i||[]).push(r),e[a]=null);return i}function di(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function pi(r,e,o,i){var a=[],s=!1;e.forEach(function(e,t){var n=fi(r,e,t+o);n&&(s=!0,(n=pi(n,e,o+t+1,i))!=si&&a.push(t,t+e.nodeSize,n))});for(var t=ci(s?di(r):r,-o).sort(hi),n=0;n<t.length;n++)t[n].type.valid(e,t[n])||(i.onRemove&&i.onRemove(t[n].spec),t.splice(n--,1));return t.length||a.length?new ti(t,a):si}function hi(e,t){return e.from-t.from||e.to-t.to}function mi(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),vi(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),vi(t,o+1,i.copy(r.to,i.to)))}}return t}function vi(e,t,n){for(;t<e.length&&0<hi(n,e[t]);)t++;e.splice(t,0,n)}function gi(t){var n=[];return t.someProp("decorations",function(e){e=e(t.state);e&&e!=si&&n.push(e)}),t.cursorWrapper&&n.push(ti.create(t.state.doc,[t.cursorWrapper.deco])),ui.from(n)}var yi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bi=Vn&&$n<=11,ki=(h(Ci,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),Ci),wi=(h(Di,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))}},{key:"forceFlush",value:function(){-1<this.flushingSoon&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&this.observer.observe(this.view.dom,yi),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)}},{key:"onSelectionChange",value:function(){if(to(this.view)){if(this.suppressingSelectionUpdates)return Jr(this.view);if(Vn&&$n<=11&&!this.view.state.selection.empty){var e=this.view.domSelection();if(e.focusNode&&tr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelection())}},{key:"ignoreSelectionChange",value:function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,e=this.view.docView.nearestDesc(t);return e&&e.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"flush",value:function(){if(this.view.docView&&!(-1<this.flushingSoon)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t,n,r=this.view.domSelection(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&to(this.view)&&!this.ignoreSelectionChange(r),i=-1,a=-1,s=!1,u=[];if(this.view.editable)for(var l=0;l<e.length;l++){var c=this.registerMutation(e[l],u);c&&(i=i<0?c.from:Math.min(c.from,i),a=a<0?c.to:Math.max(c.to,a),c.typeOver&&(s=!0))}Hn&&1<u.length&&(2==(n=u.filter(function(e){return"BR"==e.nodeName})).length&&(t=n[0],n=n[1],(t.parentNode&&t.parentNode.parentNode==n.parentNode?n:t).remove())),(-1<i||o)&&(-1<i&&(this.view.docView.markDirty(i,a),o=this.view,xi||(xi=!0,"normal"==getComputedStyle(o.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(i,a,s,u),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(r)||Jr(this.view),this.currentSelection.set(r))}}},{key:"registerMutation",value:function(e,t){if(-1<t.indexOf(e.target))return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"!=e.type)return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue};for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,i=e.nextSibling;if(Vn&&$n<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var s=e.addedNodes[a],u=s.previousSibling,s=s.nextSibling;(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(i=s)}var l=o&&o.parentNode==e.target?Xn(o)+1:0,c=n.localPosFromDOM(e.target,l,-1),l=i&&i.parentNode==e.target?Xn(i):e.target.childNodes.length;return{from:c,to:n.localPosFromDOM(e.target,l,1)}}}]),Di),xi=!1;function Di(e,t){var n=this;d(this,Di),this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ki,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);Vn&&$n<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?n.flushSoon():n.flush()}),bi&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}function Ci(){d(this,Ci),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}function Ei(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Jn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(e.parentNode.lastChild==e||Jn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function Oi(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:eo(e,t.resolve(n.anchor),t.resolve(n.head))}function Si(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}var Ai=(h(ji,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e,t=this._props;for(e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&jo(this),(this._props=e).plugins&&(e.plugins.forEach(Pi),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}},{key:"setProps",value:function(e){var t,n,r={};for(t in this._props)r[t]=this._props[t];for(n in r.state=this.state,e)r[n]=e[n];this.update(r)}},{key:"updateState",value:function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}},{key:"updateStateInner",value:function(e,t){var n=this,r=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(Vo(this),i=!0),this.state=e,t&&(function(e,t){var n,r,o=0,i=0;for(n in e){if(e[n]!=t[n])return 1;o++}for(r in t)i++;return o!=i}(p=Fi(this),this.nodeViews)&&(this.nodeViews=p,o=!0),jo(this)),this.editable=Ti(this),Ni(this);var a=gi(this),s=Mi(this),u=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",l=o||!this.docView.matchesNode(e.doc,s,a);!l&&e.selection.eq(r.selection)||(i=!0);var c,f,d,p="preserve"==u&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s&&s!=e.dom&&e.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=o-20){t=s,n=u.top;break}}}return{refDOM:t,refTop:n,stack:lr(e.dom)}}(this);i&&(this.domObserver.stop(),f=l&&(Vn||qn)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(t=r.selection,i=e.selection,f=Math.min(t.$anchor.sharedDepth(t.head),i.$anchor.sharedDepth(i.head)),t.$anchor.start(f)!=i.$anchor.start(f)),l&&(c=qn?this.trackWrites=this.domSelection().focusNode:null,!o&&this.docView.update(e.doc,s,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Mr(e.doc,s,a,this.dom,this)),c&&!this.trackWrites&&(f=!0)),f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&(c=(a=this).docView.domFromPos(a.state.selection.anchor,0),a=a.domSelection(),tr(c.node,c.offset,a.anchorNode,a.anchorOffset)))?Jr(this,f):(Xr(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()),this.updatePluginViews(r),"reset"==u?this.dom.scrollTop=0:"to selection"==u?(d=this.domSelection().focusNode,this.someProp("handleScrollToSelection",function(e){return e(n)})||(e.selection instanceof mn?1==(u=this.docView.domAfterPos(e.selection.from)).nodeType&&ur(this,u.getBoundingClientRect(),d):ur(this,this.coordsAtPos(e.selection.head,1),d))):p&&(e=p.refDOM,d=p.refTop,p=p.stack,e=e?e.getBoundingClientRect().top:0,cr(p,0==e?0:e-d))}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var u=a[s].props[e];if(null!=u&&(n=t?t(u):u))return n}}},{key:"hasFocus",value:function(){return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(fr)return e.focus(fr);var t=lr(e);e.focus(null==fr?{get preventScroll(){return fr={preventScroll:!0},!0}}:void 0),fr||(fr=!1,cr(t,0))}(this.dom),Jr(this),this.domObserver.start()}},{key:"root",get:function(){var t=this,e=this._root;if(null==e)for(var n=this.dom.parentNode;n;n=n.parentNode){var r=function(e){if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return e.ownerDocument.getSelection()}),{v:t._root=e}}(n);if("object"==typeof r)return r.v}return e||document}},{key:"posAtCoords",value:function(e){return pr(this,e)}},{key:"coordsAtPos",value:function(e){return vr(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){e=this.docView.descAt(e);return e?e.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,n=this.docView.posFromDOM(e,t,n);if(null==n)throw new RangeError("DOM position not inside the editor");return n}},{key:"endOfTextblock",value:function(e,t){return n=this,r=t||this.state,t=e,wr==r&&xr==t?Dr:(wr=r,Dr="up"==(xr=t)||"down"==t?(s=n,u=t,e=r.selection,l="up"==u?e.$from:e.$to,br(s,r,function(){for(var e=s.docView.domFromPos(l.pos,"up"==u?-1:1).node;;){var t=s.docView.nearestDesc(e,!0);if(!t)break;if(t.node.isBlock){e=t.dom;break}e=t.dom.parentNode}for(var n=vr(s,l.pos,1),r=e.firstChild;r;r=r.nextSibling){var o=void 0;if(1==r.nodeType)o=r.getClientRects();else{if(3!=r.nodeType)continue;o=er(r,0,r.nodeValue.length).getClientRects()}for(var i=0;i<o.length;i++){var a=o[i];if(a.bottom>a.top+1&&("up"==u?n.top-a.top>2*(a.bottom-n.top):a.bottom-n.bottom>2*(n.bottom-a.top)))return!1}}return!0})):function(o,e,i){var a=e.selection.$head;if(!a.parent.isTextblock)return!1;var t=a.parentOffset,n=!t,t=t==a.parent.content.size,s=o.domSelection();return kr.test(a.parent.textContent)&&s.modify?br(o,e,function(){var e=s.getRangeAt(0),t=s.focusNode,n=s.focusOffset,r=s.caretBidiLevel;s.modify("move",i,"character");n=!(a.depth?o.docView.domAfterPos(a.before()):o.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||t==s.focusNode&&n==s.focusOffset;return s.removeAllRanges(),s.addRange(e),null!=r&&(s.caretBidiLevel=r),n}):"left"==i||"backward"==i?n:t}(n,r,t));var n,r,s,u,l}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){var t;Mo(t=this,e=e)||!Eo[e.type]||!t.editable&&e.type in Oo||Eo[e.type](t,e)}},{key:"dispatch",value:function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),ji);function ji(e,t){var o=this;d(this,ji),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new So,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Pi),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ti(this),Ni(this),this.nodeViews=Fi(this),this.docView=Mr(this.state.doc,Mi(this),gi(this),this.dom,this),this.domObserver=new wi(this,function(e,t,n,r){return function(t,d,p,e,n){if(d<0){var r=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,o=Wr(t,r);o&&!t.state.selection.eq(o)&&(i=t.state.tr.setSelection(o),"pointer"==r?i.setMeta("pointer",!0):"key"==r&&i.scrollIntoView(),t.dispatch(i))}else{o=t.state.doc.resolve(d),r=o.sharedDepth(p);d=o.before(r+1),p=t.state.doc.resolve(p).after(r+1);var i=t.state.selection,o=function(e){var t=e.docView.parseRange(d,p),n=t.node,r=t.fromOffset,o=t.toOffset,i=t.from,a=t.to,s=e.domSelection(),t=s.anchorNode;if(t&&e.dom.contains(1==t.nodeType?t:t.parentNode)&&(f=[{node:t,offset:s.anchorOffset}],ir(s)||f.push({node:s.focusNode,offset:s.focusOffset})),qn&&8===e.input.lastKeyCode)for(var u=o;r<u;u--){var l=n.childNodes[u-1],c=l.pmViewDesc;if("BR"==l.nodeName&&!c){o=u;break}if(!c||c.size)break}var f,t=e.state.doc,s=e.someProp("domParser")||at.fromSchema(e.state.schema),e=t.resolve(i),t=null,s=s.parse(n,{topNode:e.parent,topMatch:e.parent.contentMatchAt(e.index()),topOpen:!0,from:r,to:o,preserveWhitespace:"pre"!=e.parent.type.whitespace||"full",findPositions:f,ruleFromNode:Ei,context:e});return f&&null!=f[0].pos&&(e=f[0].pos,null==(f=f[1]&&f[1].pos)&&(f=e),t={anchor:e+i,head:f+i}),{doc:s,sel:t,from:i,to:a}}(t);qn&&t.cursorWrapper&&o.sel&&o.sel.anchor==t.cursorWrapper.deco.from&&(s=(a=t.cursorWrapper.deco.type.toDOM.nextSibling)&&a.nodeValue?a.nodeValue.length:1,o.sel={anchor:o.sel.anchor+s,head:o.sel.anchor+s});var r=t.state.doc,a=r.slice(o.from,o.to),s=8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(u=t.state.selection.to,"end"):(u=t.state.selection.from,"start");t.input.lastKeyCode=null;var u=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),n=a.a,a=a.b;return"end"==o&&(r-=n+Math.max(0,i-Math.min(n,a))-i),n<i&&e.size<t.size?(a=(i-=r<=i&&n<=r?i-r:0)+(a-n),n=i):a<i&&(n=(i-=r<=i&&a<=r?i-r:0)+(n-a),a=i),{start:i,endA:n,endB:a}}(a.content,o.doc.content,o.from,u,s);if((Kn&&t.input.lastIOSEnter>Date.now()-225||Gn)&&n.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName})&&(!u||u.endA>=u.endB)&&t.someProp("handleKeyDown",function(e){return e(t,ar(13,"Enter"))}))t.input.lastIOSEnter=0;else{if(!u){if(!(e&&i instanceof pn&&!i.empty&&i.$head.sameParent(i.$anchor))||t.composing||o.sel&&o.sel.anchor!=o.sel.head)return void(!o.sel||(c=Oi(t,t.state.doc,o.sel))&&!c.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(c)));u={start:i.from,endA:i.to,endB:i.to}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&u.start==u.endB&&t.state.selection instanceof pn&&(u.start>t.state.selection.from&&u.start<=t.state.selection.from+2&&t.state.selection.from>=o.from?u.start=t.state.selection.from:u.endA<t.state.selection.to&&u.endA>=t.state.selection.to-2&&t.state.selection.to<=o.to&&(u.endB+=t.state.selection.to-u.endA,u.endA=t.state.selection.to)),Vn&&$n<=11&&u.endB==u.start+1&&u.endA==u.start&&u.start>o.from&&" "==o.doc.textBetween(u.start-o.from-1,u.start-o.from+1)&&(u.start--,u.endA--,u.endB--);var l,s=o.doc.resolveNoCache(u.start-o.from),e=o.doc.resolveNoCache(u.endB-o.from),c=r.resolve(u.start),i=s.sameParent(e)&&s.parent.inlineContent&&c.end()>=u.endA;if((Kn&&t.input.lastIOSEnter>Date.now()-225&&(!i||n.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))||!i&&s.pos<o.doc.content.size&&(l=sn.findFrom(o.doc.resolve(s.pos+1),1,!0))&&l.head==e.pos)&&t.someProp("handleKeyDown",function(e){return e(t,ar(13,"Enter"))}))t.input.lastIOSEnter=0;else if(t.state.selection.anchor>u.start&&function(e,t,n,r,o){if(!(!r.parent.isTextblock||n-t<=o.pos-r.pos||Si(r,!0,!1)<o.pos)){t=e.resolve(t);if(!(t.parentOffset<t.parent.content.size)&&t.parent.isTextblock){t=e.resolve(Si(t,!0,!0));return!(!t.parent.isTextblock||t.pos>n||Si(t,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(t.parent.content)}}}(r,u.start,u.endA,s,e)&&t.someProp("handleKeyDown",function(e){return e(t,ar(8,"Backspace"))}))Gn&&qn&&t.domObserver.suppressSelectionUpdates();else{qn&&Gn&&u.endB==u.start&&(t.input.lastAndroidDelete=Date.now()),Gn&&!i&&s.start()!=e.start()&&0==e.parentOffset&&s.depth==e.depth&&o.sel&&o.sel.anchor==o.sel.head&&o.sel.head==u.endA&&(u.endB-=2,e=o.doc.resolveNoCache(u.endB-o.from),setTimeout(function(){t.someProp("handleKeyDown",function(e){return e(t,ar(13,"Enter"))})},20));var f,h,m=u.start,v=u.endA;if(i)if(s.pos==e.pos)Vn&&$n<=11&&0==s.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(function(){return Jr(t)},20)),b=t.state.tr.delete(m,v),f=r.resolve(u.start).marksAcross(r.resolve(u.endA));else if(u.endA==u.endB&&(h=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,u=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var c=0;c<i.length;c++)u=i[c].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(o(t.child(d)));if(ce.from(f).eq(e))return{mark:r,type:n}}(s.parent.content.cut(s.parentOffset,e.parentOffset),c.parent.content.cut(c.parentOffset,u.endA-c.start()))))b=t.state.tr,"add"==h.type?b.addMark(m,v,h.mark):b.removeMark(m,v,h.mark);else if(s.parent.child(s.index()).isText&&s.index()==e.index()-(e.textOffset?0:1)){var g=s.parent.textBetween(s.parentOffset,e.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,m,v,g)}))return;b=t.state.tr.insertText(g,m,v)}var y,b=b||t.state.tr.replace(m,v,o.doc.slice(u.start-o.from,u.endB-o.from));o.sel&&(y=Oi(t,b.doc,o.sel))&&!(qn&&Gn&&t.composing&&y.empty&&(u.start!=u.endB||t.input.lastAndroidDelete<Date.now()-100)&&(y.head==m||y.head==b.mapping.map(v)-1)||Vn&&y.empty&&y.head==m)&&b.setSelection(y),f&&b.ensureMarks(f),t.dispatch(b.scrollIntoView())}}}}(o,e,t,n,r)}),this.domObserver.start(),function(n){for(var e in Eo)!function(){var t=Eo[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=function(e){!function(e,t){if(!t.bubbles)return 1;if(!t.defaultPrevented){for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return;return 1}}(n,e)||Mo(n,e)||!n.editable&&e.type in Oo||t(n,e)})}();Jn&&n.dom.addEventListener("input",function(){return null}),jo(n)}(this),this.updatePluginViews()}function Mi(n){var r=Object.create(null);return r.class="ProseMirror",r.contenteditable=String(n.editable),r.translate="no",n.someProp("attributes",function(e){if("function"==typeof e&&(e=e(n.state)),e)for(var t in e)"class"==t&&(r.class+=" "+e[t]),"style"==t?r.style=(r.style?r.style+";":"")+e[t]:r[t]||"contenteditable"==t||"nodeName"==t||(r[t]=String(e[t]))}),[Xo.node(0,n.state.doc.content.size,r)]}function Ni(e){var t;e.markCursor?((t=document.createElement("img")).className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Xo.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}):e.cursorWrapper=null}function Ti(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}function Fi(e){var n=Object.create(null);function t(e){for(var t in e)Object.prototype.hasOwnProperty.call(n,t)||(n[t]=e[t])}return e.someProp("nodeViews",t),e.someProp("markViews",t),n}function Pi(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Ri,Bi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ii={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ln="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),t=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),Li="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),zi=t||Ln&&+Ln[1]<57,_i=0;_i<10;_i++)Bi[48+_i]=Bi[96+_i]=String(_i);for(_i=1;_i<=24;_i++)Bi[_i+111]="F"+_i;for(_i=65;_i<=90;_i++)Bi[_i]=String.fromCharCode(_i+32),Ii[_i]=String.fromCharCode(_i);for(Ri in Bi)Ii.hasOwnProperty(Ri)||(Ii[Ri]=Bi[Ri]);var Vi="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function $i(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function Hi(e){var a=function(e){var t,n=Object.create(null);for(t in e)n[function(e){var t,n,r,o,i=e.split(/-(?!$)/);"Space"==(e=i[i.length-1])&&(e=" ");for(var a=0;a<i.length-1;a++){var s=i[a];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);Vi?o=!0:n=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Meta-"+e),r&&(e="Shift-"+e),e}(t)]=e[t];return n}(e);return function(e,t){var n,r=("Esc"==(n=!(zi&&(t.ctrlKey||t.altKey||t.metaKey)||Li&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?Ii:Bi)[t.keyCode]||t.key||"Unidentified")&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n),o=1==r.length&&" "!=r,n=a[$i(r,t,!o)];if(n&&n(e.state,e.dispatch,e))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey||127<r.charCodeAt(0))&&(i=Bi[t.keyCode])&&i!=r){var i=a[$i(i,t,!0)];if(i&&i(e.state,e.dispatch,e))return!0}else if(o&&t.shiftKey){t=a[$i(r,t,!0)];if(t&&t(e.state,e.dispatch,e))return!0}return!1}}var Ui=Math.pow(2,16);function Wi(e){return 65535&e}var qi=(h(Qi,[{key:"deleted",get:function(){return 0<(8&this.delInfo)}},{key:"deletedBefore",get:function(){return 0<(5&this.delInfo)}},{key:"deletedAfter",get:function(){return 0<(6&this.delInfo)}},{key:"deletedAcross",get:function(){return 0<(4&this.delInfo)}}]),Qi),Ji=(h(Ki,[{key:"recover",value:function(e){var t=0,n=Wi(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+(e-(65535&e))/Ui}},{key:"mapResult",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(e<s)break;var u=this.ranges[a+o],l=this.ranges[a+i],c=s+u;if(e<=c){var f=s+r+((u?e==s?-1:e==c?1:t:t)<0?0:l);if(n)return f;var d=e==s?2:e==c?1:4;return(t<0?e!=s:e!=c)&&(d|=8),new qi(f,d,e==(t<0?s:c)?null:a/3+(e-s)*Ui)}r+=l-u}return n?e+r:new qi(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=Wi(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(e<s)break;var u=this.ranges[a+o];if(e<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+t],i=this.ranges[r+n];e(a,a+u,s,s+i),o+=i-u}}},{key:"invert",value:function(){return new Ki(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?Ki.empty:new Ki(e<0?[0,-e,0]:[0,0,e])}}]),Ki);function Ki(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(d(this,Ki),this.ranges=e,this.inverted=t,!e.length&&Ki.empty)return Ki.empty}function Qi(e,t,n){d(this,Qi),this.pos=e,this.delInfo=t,this.recover=n}Ji.empty=new Ji([]);var Gi=(h(na,[{key:"slice",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new na(this.maps,this.mirror,e,t)}},{key:"copy",value:function(){return new na(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;0<=t;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&t<r?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new na;return e.appendMappingInverted(this),e}},{key:"map",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&o<a&&a<this.to){o=a,e=this.maps[a].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new qi(e,r,null)}}]),na),Yi=Object.create(null),Xi=(h(ta,[{key:"getMap",value:function(){return Ji.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Yi[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in Yi)throw new RangeError("Duplicate use of step JSON ID "+e);return(Yi[e]=t).prototype.jsonID=e,t}}]),ta),Zi=(h(ea,null,[{key:"ok",value:function(e){return new ea(e,null)}},{key:"fail",value:function(e){return new ea(null,e)}},{key:"fromReplace",value:function(e,t,n,r){try{return ea.ok(e.replace(t,n,r))}catch(e){if(e instanceof ge)return ea.fail(e.message);throw e}}}]),ea);function ea(e,t){d(this,ea),this.doc=e,this.failed=t}function ta(){d(this,ta)}function na(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length;d(this,na),this.maps=e,this.mirror=t,this.from=n,this.to=r}function ra(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(ra(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return ce.fromArray(r)}var oa=function(){m(i,Xi);var o=b(i);function i(e,t,n){var r;return d(this,i),(r=o.call(this)).from=e,r.to=t,r.mark=n,r}return h(i,[{key:"apply",value:function(e){var n=this,t=e.slice(this.from,this.to),r=e.resolve(this.from),r=r.node(r.sharedDepth(this.to)),t=new ye(ra(t.content,function(e,t){return e.isAtom&&t.type.allowsMarkType(n.mark.type)?e.mark(n.mark.addToSet(e.marks)):e},r),t.openStart,t.openEnd);return Zi.fromReplace(e,this.from,this.to,t)}},{key:"invert",value:function(){return new ia(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new i(t.pos,e.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}}]),i}();Xi.jsonID("addMark",oa);var ia=function(){m(i,Xi);var o=b(i);function i(e,t,n){var r;return d(this,i),(r=o.call(this)).from=e,r.to=t,r.mark=n,r}return h(i,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),n=new ye(ra(n.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))},e),n.openStart,n.openEnd);return Zi.fromReplace(e,this.from,this.to,n)}},{key:"invert",value:function(){return new oa(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deleted&&e.deleted||t.pos>=e.pos?null:new i(t.pos,e.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}}]),i}();Xi.jsonID("removeMark",ia);var aa=function(){m(a,Xi);var i=b(a);function a(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return d(this,a),(r=i.call(this)).from=e,r.to=t,r.slice=n,r.structure=o,r}return h(a,[{key:"apply",value:function(e){return this.structure&&ua(e,this.from,this.to)?Zi.fail("Structure replace would overwrite content"):Zi.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new Ji([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new a(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),e=e.mapResult(this.to,-1);return t.deletedAcross&&e.deletedAcross?null:new a(t.pos,Math.max(t.pos,e.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof a)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?ye.empty:new ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new a(e.from,this.to,t,this.structure)}t=this.slice.size+e.slice.size==0?ye.empty:new ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new a(this.from,this.to+(e.to-e.from),t,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new a(t.from,t.to,ye.fromJSON(e,t.slice),!!t.structure)}}]),a}();Xi.jsonID("replace",aa);var sa=function(){m(l,Xi);var u=b(l);function l(e,t,n,r,o,i){var a,s=6<arguments.length&&void 0!==arguments[6]&&arguments[6];return d(this,l),(a=u.call(this)).from=e,a.to=t,a.gapFrom=n,a.gapTo=r,a.slice=o,a.insert=i,a.structure=s,a}return h(l,[{key:"apply",value:function(e){if(this.structure&&(ua(e,this.from,this.gapFrom)||ua(e,this.gapTo,this.to)))return Zi.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Zi.fail("Gap is not a flat range");t=this.slice.insertAt(this.insert,t.content);return t?Zi.fromReplace(e,this.from,this.to,t):Zi.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new Ji([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new l(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),e=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||e>n.pos?null:new l(t.pos,n.pos,r,e,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new l(t.from,t.to,t.gapFrom,t.gapTo,ye.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),l}();function ua(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;0<o&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(0<o)for(var a=r.node(i).maybeChild(r.indexAfter(i));0<o;){if(!a||a.isLeaf)return 1;a=a.firstChild,o--}}function la(e){return{type:e,attrs:null}}function ca(e,t,n,r){var n=2<arguments.length&&void 0!==n?n:1,o=3<arguments.length?r:void 0,i=e.resolve(t),a=i.depth-n,t=o&&o[o.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!t.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var s=i.depth-1,u=n-2;a<s;s--,u--){var l=i.node(s),c=i.index(s);if(l.type.spec.isolating)return!1;var f=l.content.cutByIndex(c,l.childCount),d=o&&o[u]||l;if(d!=l&&(f=f.replaceChild(0,d.type.create(d.attrs))),!l.canReplace(c+1,l.childCount)||!d.type.validContent(f))return!1}t=i.indexAfter(a),n=o&&o[0];return i.node(a).canReplaceWith(t,t,(n||i.node(1+a)).type)}function fa(e,t){var n=e.resolve(t),r=n.index();return e=n.nodeBefore,t=n.nodeAfter,e&&t&&!e.isLeaf&&e.canAppend(t)&&n.parent.canReplace(r,r+1)}function da(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Xi.jsonID("replaceAround",sa);var pa=(h(ha,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new ye(i,a,s);return-1<t?new sa(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new aa(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;0<=t;t--)for(var n=null,r=(t?n=ga(this.unplaced.content,t-1).firstChild:this.unplaced).content.firstChild,o=this.depth;0<=o;o--){var i=this.frontier[o],a=i.type,s=i.match,u=void 0,i=null;if(1==e&&(r?s.matchType(r.type)||(i=s.fillBefore(ce.from(r),!1)):n&&a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:o,parent:n,inject:i};if(2==e&&r&&(u=s.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:o,parent:n,wrap:u};if(n&&s.matchType(n.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,e=ga(t,n);return!(!e.childCount||e.firstChild.isLeaf||(this.unplaced=new ye(t,n+1,Math.max(r,e.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,e=ga(t,n);e.childCount<=1&&0<n?(e=t.size-n<=n+e.size,this.unplaced=new ye(ma(t,n-1,1),n-1,e?n-1:r)):this.unplaced=new ye(ma(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=(r||s).content,l=s.openStart-t,c=0,f=[],e=this.frontier[n],d=e.match,p=e.type;if(o){for(a=0;a<o.childCount;a++)f.push(o.child(a));d=d.matchFragment(o)}for(var h=u.size+t-(s.content.size-s.openEnd);c<u.childCount;){var m=u.child(c),v=d.matchType(m.type);if(!v)break;(1<++c||0==l||m.content.size)&&(d=v,f.push(function e(t,n,r){if(n<=0)return t;var o=t.content;return 1<n&&(o=o.replaceChild(0,e(o.firstChild,n-1,1==o.childCount?r-1:0))),0<n&&(o=t.type.contentMatch.fillBefore(o).append(o),r<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(ce.empty,!0)))),t.copy(o)}(m.mark(p.allowedMarks(m.marks)),1==c?l:0,c==u.childCount?h:-1)))}e=c==u.childCount;e||(h=-1),this.placed=va(this.placed,n,ce.from(f)),this.frontier[n].match=d,e&&h<0&&r&&r.type==this.frontier[this.depth].type&&1<this.frontier.length&&this.closeFrontierNode();for(var g=0,y=u;g<h;g++){var b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=e?0==t?ye.empty:new ye(ma(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new ye(ma(s.content,t,c),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ya(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);1<n&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);0<=t;t--){var n=this.frontier[t],r=n.match,o=n.type,n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),r=ya(e,t,o,r,n);if(r){for(var i=t-1;0<=i;i--){var a=this.frontier[i],s=a.match,s=ya(e,i,a.type,s,!0);if(!s||s.childCount)continue e}return{depth:t,fit:r,move:n?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=va(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=va(this.placed,this.depth,ce.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(ce.empty,!0);e.childCount&&(this.placed=va(this.placed,this.frontier.length,e))}}]),ha);function ha(e,t,n){d(this,ha),this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=ce.empty;for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(var i=e.depth;0<i;i--)this.placed=ce.from(e.node(i).copy(this.placed))}function ma(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(ma(e.firstChild.content,t-1,n)))}function va(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(va(e.lastChild.content,t-1,n)))}function ga(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function ya(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;r=r.fillBefore(i.content,!0,a);return r&&!function(e,t){for(var n=a;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return 1}(n,i.content)?r:null}function ba(e,t){for(var n=[],r=Math.min(e.depth,t.depth);0<=r;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}var ka=Error;(((ka=function e(t){t=Error.call(this,t);return t.__proto__=e.prototype,t}).prototype=Object.create(Error.prototype)).constructor=ka).prototype.name="TransformError";function wa(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function xa(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;if(!(n=Sa(r))){var o=r.blockRange(),i=o&&$t(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}if(!(o=n.nodeBefore).type.spec.isolating&&Ba(e,n,t))return!0;if(0==r.parent.content.size&&(Ea(o,"end")||mn.isSelectable(o))){i=Jt(e.doc,r.before(),r.after(),ye.empty);if(i&&i.slice.size<i.to-i.from)return t&&((i=e.tr.step(i)).setSelection(Ea(o,"end")?sn.findFrom(i.doc.resolve(i.mapping.map(n.pos,-1)),-1):mn.create(i.doc,n.pos-o.nodeSize)),t(i.scrollIntoView())),!0}return!(!o.isAtom||n.depth!=r.depth-1||(t&&t(e.tr.delete(n.pos-o.nodeSize,n.pos).scrollIntoView()),0))}var Da=(h(Ca,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){e=this.maybeStep(e);if(e.failed)throw new ka(e.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return 0<this.steps.length}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ye.empty,n=function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:t,n=3<arguments.length&&void 0!==r?r:ye.empty;return t!=o||n.size?(r=e.resolve(t),e=e.resolve(o),da(r,e,n)?new aa(t,o,n):new pa(r,e,n).fit()):null}(this.doc,e,t,n);return n&&this.step(n),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new ye(ce.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,ye.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(da(o,i,r))return e.step(new aa(t,n,r));var a=ba(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var u=o.depth,l=o.pos-1;0<u;u--,l--){var c=o.node(u).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;-1<a.indexOf(u)?s=u:o.before(u)==l&&a.splice(1,0,-u)}for(var f=a.indexOf(s),d=[],p=r.openStart,h=r.content,m=0;;m++){var v=h.firstChild;if(d.push(v),m==r.openStart)break;h=v.content}for(var g=p-1;0<=g;g--){var y=d[g].type,b=(b=y).spec.defining||b.spec.definingForContent;if(b&&o.node(f).type!=y)p=g;else if(b||!y.isTextblock)break}for(var k=r.openStart;0<=k;k--){var w=(k+p+1)%(r.openStart+1),x=d[w];if(x)for(var D=0;D<a.length;D++){var C=a[(D+f)%a.length],E=!0;C<0&&(E=!1,C=-C);var O=o.node(C-1),S=o.index(C-1);if(O.canReplaceWith(S,S,x.type,x.marks))return e.replace(o.before(C),E?i.after(C):n,new ye(function e(t,n,r,o,i){var a;return n<r&&(a=t.firstChild,t=t.replaceChild(0,a.copy(e(a.content,n+1,r,o,a)))),o<n&&(t=(i=(n=i.contentMatchAt(0)).fillBefore(t).append(t)).append(n.matchFragment(i).fillBefore(ce.empty,!0))),t}(r.content,0,r.openStart,w),w,r.openEnd))}}for(var A=e.steps.length,j=a.length-1;0<=j&&(e.replace(t,n,r),!(e.steps.length>A));j--){var M=a[j];M<0||(t=o.before(M),n=i.after(M))}}(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return r=this,o=e,e=t,(t=n).isInline||o!=e||!r.doc.resolve(o).parent.content.size||null!=(n=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;0<=o;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(0<i)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;0<=a;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(r.doc,o,t.type))&&(o=e=n),r.replaceRange(o,e,new ye(ce.from(t),0,0)),this;var r,o}},{key:"deleteRange",value:function(e,t){return function(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=ba(r,o),a=0;a<i.length;a++){var s=i[a],u=a==i.length-1;if(u&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(0<s&&(u||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(var l=1;l<=r.depth&&l<=o.depth;l++)if(t-r.start(l)==r.depth-l&&n>r.end(l)&&o.end(l)-n!=o.depth-l)return e.delete(r.before(l),n);e.delete(t,n)}(this,e,t),this}},{key:"lift",value:function(g,e){return function(e,t){for(var n=g.$from,r=g.$to,o=g.depth,i=n.before(o+1),a=r.after(o+1),s=i,u=a,l=ce.empty,c=0,f=o,d=!1;t<f;f--)d||0<n.index(f)?(d=!0,l=ce.from(n.node(f).copy(l)),c++):s--;for(var p=ce.empty,h=0,m=o,v=!1;t<m;m--)v||r.after(m+1)<r.end(m)?(v=!0,p=ce.from(r.node(m).copy(p)),h++):u++;e.step(new sa(s,u,i,a,new ye(l.append(p),c,h),l.size-c,!0))}(this,e),this}},{key:"join",value:function(e){var t,n;return t=this,e=new aa((n=e)-(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1),n+e,ye.empty,!0),t.step(e),this}},{key:"wrap",value:function(e,t){return function(e,t,n){for(var r=ce.empty,o=n.length-1;0<=o;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(n[o].type.create(n[o].attrs,r))}var a=t.start,t=t.end;e.step(new sa(a,t,a,t,new ye(r,0,0),n.length,!0))}(this,e,t),this}},{key:"setBlockType",value:function(e){return function(o,e,t,i,a){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=o.steps.length;o.doc.nodesBetween(e,t,function(e,t){if(e.isTextblock&&!e.hasMarkup(i,a)&&function(e,t,n){e=e.resolve(t),t=e.index();return e.parent.canReplaceWith(t,t+1,n)}(o.doc,o.mapping.slice(s).map(t),i)){o.clearIncompatible(o.mapping.slice(s).map(t,1),i);var n=o.mapping.slice(s),r=n.map(t,1),t=n.map(t+e.nodeSize,1);return o.step(new sa(r,t,r+1,t-1,new ye(ce.from(i.create(a,null,e.marks)),0,0),1,!0)),!1}})}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,2<arguments.length?arguments[2]:void 0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(e,t){return function(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");if(o=(n=n||i.type).create(r,null,o||i.marks),i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new sa(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new ye(ce.from(o),0,0),1,!0))}(this,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:[]),this}},{key:"split",value:function(e){return function(e,t,n,r){for(var n=2<arguments.length&&void 0!==n?n:1,o=3<arguments.length?r:void 0,i=e.doc.resolve(t),a=ce.empty,s=ce.empty,u=i.depth,l=i.depth-n,c=n-1;l<u;u--,c--){a=ce.from(i.node(u).copy(a));var f=o&&o[c],s=ce.from(f?f.type.create(f.attrs,s):i.node(u).copy(s))}e.step(new aa(t,t,new ye(a.append(s),n,n),!0))}(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,2<arguments.length?arguments[2]:void 0),this}},{key:"addMark",value:function(e,t,n){return u=e,l=t,c=n,p=[],h=[],(r=this).doc.nodesBetween(u,l,function(e,t,n){if(e.isInline){var r=e.marks;if(!c.isInSet(r)&&n.type.allowsMarkType(c.type)){for(var o=Math.max(t,u),i=Math.min(t+e.nodeSize,l),a=c.addToSet(r),s=0;s<r.length;s++)r[s].isInSet(a)||(f&&f.to==o&&f.mark.eq(r[s])?f.to=i:p.push(f=new ia(o,i,r[s])));d&&d.to==o?d.to=i:h.push(d=new oa(o,i,c))}}}),p.forEach(function(e){return r.step(e)}),h.forEach(function(e){return r.step(e)}),this;var r,u,l,c,f,d,p,h}},{key:"removeMark",value:function(e,t,n){return f=e,d=t,p=n,h=[],m=0,(r=this).doc.nodesBetween(f,d,function(e,t){if(e.isInline){m++;var n=null;if(p instanceof Ze)for(var r,o=e.marks;r=p.isInSet(o);)(n=n||[]).push(r),o=r.removeFromSet(o);else p?p.isInSet(e.marks)&&(n=[p]):n=e.marks;if(n&&n.length)for(var i=Math.min(t+e.nodeSize,d),a=0;a<n.length;a++){for(var s=n[a],u=void 0,l=0;l<h.length;l++){var c=h[l];c.step==m-1&&s.eq(h[l].style)&&(u=c)}u?(u.to=i,u.step=m):h.push({style:s,from:Math.max(t,f),to:i,step:m})}}}),h.forEach(function(e){return r.step(new ia(e.from,e.to,e.style))}),this;var r,f,d,p,h,m}},{key:"clearIncompatible",value:function(e,t,n){return function(e,t,n,r){for(var o=3<arguments.length&&void 0!==r?r:n.contentMatch,i=e.doc.nodeAt(t),a=[],s=t+1,u=0;u<i.childCount;u++){var l=i.child(u),c=s+l.nodeSize,f=o.matchType(l.type);if(f){o=f;for(var d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||e.step(new ia(s,c,l.marks[d]))}else a.push(new aa(s,c,ye.empty));s=c}o.validEnd||(t=o.fillBefore(ce.empty,!0),e.replace(s,s,new ye(t,0,0)));for(var p=a.length-1;0<=p;p--)e.step(a[p])}(this,e,t,n),this}}]),Ca);function Ca(e){d(this,Ca),this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gi}function Ea(e,t,n){for(var r=2<arguments.length&&void 0!==n&&n,o=e;o;o="start"==t?o.firstChild:o.lastChild){if(o.isTextblock)return 1;if(r&&1!=o.childCount)return}}function Oa(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):0<o.parentOffset)return!1;i=Sa(o)}return!(!(o=i&&i.nodeBefore)||!mn.isSelectable(o)||(t&&t(e.tr.setSelection(mn.create(e.doc,i.pos-o.nodeSize)).scrollIntoView()),0))}function Sa(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){if(0<e.index(t))return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Aa(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=Ma(r);if(!o)return!1;var i=o.nodeAfter;if(Ba(e,o,t))return!0;if(0==r.parent.content.size&&(Ea(i,"start")||mn.isSelectable(i))){n=Jt(e.doc,r.before(),r.after(),ye.empty);if(n&&n.slice.size<n.to-n.from)return t&&((n=e.tr.step(n)).setSelection(Ea(i,"start")?sn.findFrom(n.doc.resolve(n.mapping.map(o.pos)),1):mn.create(n.doc,n.mapping.map(o.pos))),t(n.scrollIntoView())),!0}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))}function ja(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Ma(o)}return!(!(o=i&&i.nodeAfter)||!mn.isSelectable(o)||(t&&t(e.tr.setSelection(mn.create(e.doc,i.pos)).scrollIntoView()),0))}function Ma(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Na(e,t){var n=(r=e.selection).$head,r=r.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))}function Ta(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Fa(e,t){var n=(i=e.selection).$head,r=i.$anchor;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;var o=n.node(-1),i=n.indexAfter(-1);return!(!(r=Ta(o.contentMatchAt(i)))||!o.canReplaceWith(i,i,r))&&(t&&(n=n.after(),(r=e.tr.replaceWith(n,n,r.createAndFill())).setSelection(sn.near(r.doc.resolve(n),1)),t(r.scrollIntoView())),!0)}function Pa(e,t){var n=e.selection,r=n.$from,o=n.$to;return!(n instanceof yn||r.parent.inlineContent||o.parent.inlineContent)&&(!(!(n=Ta(o.parent.contentMatchAt(o.indexAfter())))||!n.isTextblock)&&(t&&(o=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,(n=e.tr.insert(o,n.createAndFill())).setSelection(pn.create(n.doc,o+1)),t(n.scrollIntoView())),!0))}function Ra(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(1<n.depth&&n.after()!=n.end(-1)){var r=n.before();if(Wt(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}return null!=(n=(r=n.blockRange())&&$t(r))&&(t&&t(e.tr.lift(r,n).scrollIntoView()),!0)}function Ba(e,t,n){var r,o,i=t.nodeBefore,a=t.nodeAfter;if(!i.type.spec.isolating&&!a.type.spec.isolating){if(s=e,u=n,l=(d=t).nodeBefore,c=d.nodeAfter,f=d.index(),l&&c&&l.type.compatibleContent(c.type)&&(!l.content.size&&d.parent.canReplace(f-1,f)?(u&&u(s.tr.delete(d.pos-l.nodeSize,d.pos).scrollIntoView()),1):d.parent.canReplace(f,f+1)&&(c.isTextblock||qt(s.doc,d.pos))&&(u&&u(s.tr.clearIncompatible(d.pos,l.type,l.contentMatchAt(l.childCount)).join(d.pos).scrollIntoView()),1)))return 1;var s,u,l,c,f,d=t.parent.canReplace(t.index(),t.index()+1);if(d&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var p=t.pos+a.nodeSize,h=ce.empty,m=r.length-1;0<=m;m--)h=ce.from(r[m].create(null,h));h=ce.from(i.copy(h));var v=e.tr.step(new _t(t.pos-1,p,t.pos,p,new ye(h,1,0),r.length,!0)),p=p+2*r.length;qt(v.doc,p)&&v.join(p),n(v.scrollIntoView())}return 1}p=sn.findFrom(t,1),v=p&&p.$from.blockRange(p.$to),p=v&&$t(v);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(v,p).scrollIntoView()),1;if(d&&Ea(a,"start",!0)&&Ea(i,"end")){for(var g=i,y=[];y.push(g),!g.isTextblock;)g=g.lastChild;for(var b=a,k=1;!b.isTextblock;b=b.firstChild)k++;if(g.canReplace(g.childCount,g.childCount,b.content)){if(n){for(var w=ce.empty,x=y.length-1;0<=x;x--)w=ce.from(y[x].copy(w));n(e.tr.step(new _t(t.pos-y.length,t.pos+a.nodeSize,t.pos+k,t.pos+a.nodeSize-k,new ye(w,y.length,0),0,!0)).scrollIntoView())}return 1}}}}function Ia(i){return function(e,t){for(var n=e.selection,r=i<0?n.$from:n.$to,o=r.depth;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(t&&t(e.tr.setSelection(pn.create(e.doc,i<0?r.start(o):r.end(o)))),!0)}}var La=Ia(-1),za=Ia(1);function _a(i,e){var a=1<arguments.length&&void 0!==e?e:null;return function(n,e){var t=n.selection,r=t.from,t=t.to,o=!1;return n.doc.nodesBetween(r,t,function(e,t){return!o&&void(e.isTextblock&&!e.hasMarkup(i,a)&&(o=e.type==i||(t=(e=n.doc.resolve(t)).index(),e.parent.canReplaceWith(t,t+1,i))))}),!!o&&(e&&e(n.tr.setBlockType(r,t,i,a).scrollIntoView()),!0)}}function Va(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(e,t,n){for(var r=0;r<o.length;r++)if(o[r](e,t,n))return!0;return!1}}var $a,Rn=Va(wa,xa,Oa),In=Va(wa,Aa,ja),Ha={Enter:Va(Na,Pa,Ra,function(e,t){var n,r,o=e.selection,i=o.$from,a=o.$to;return e.selection instanceof mn&&e.selection.node.isBlock?!(!i.parentOffset||!Wt(e.doc,i.pos)||(t&&t(e.tr.split(i.pos).scrollIntoView()),0)):!!i.parent.isBlock&&(t&&(r=a.parentOffset==a.parent.content.size,n=e.tr,(e.selection instanceof pn||e.selection instanceof yn)&&n.deleteSelection(),o=0==i.depth?null:Ta(i.node(-1).contentMatchAt(i.indexAfter(-1))),a=r&&o?[{type:o}]:void 0,e=Wt(n.doc,n.mapping.map(i.pos),1,a),a||e||!Wt(n.doc,n.mapping.map(i.pos),1,o?[{type:o}]:void 0)||(o&&(a=[{type:o}]),e=!0),!e||(n.split(n.mapping.map(i.pos),1,a),r||i.parentOffset||i.parent.type==o)||(r=n.mapping.map(i.before()),r=n.doc.resolve(r),o&&i.node(-1).canReplaceWith(r.index(),r.index()+1,o)&&n.setNodeMarkup(n.mapping.map(i.before()),o)),t(n.scrollIntoView())),!0)}),"Mod-Enter":Fa,Backspace:Rn,"Mod-Backspace":Rn,"Shift-Backspace":Rn,Delete:In,"Mod-Delete":In,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new yn(e.doc))),!0}},Ua={"Ctrl-h":Ha.Backspace,"Alt-Backspace":Ha["Mod-Backspace"],"Ctrl-d":Ha.Delete,"Ctrl-Alt-Backspace":Ha["Mod-Delete"],"Alt-Delete":Ha["Mod-Delete"],"Alt-d":Ha["Mod-Delete"],"Ctrl-a":La,"Ctrl-e":za};for($a in Ha)Ua[$a]=Ha[$a];function Wa(u,e){var l=1<arguments.length&&void 0!==e?e:null;return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=!1,s=i;if(!i)return!1;if(2<=i.depth&&r.node(i.depth-1).type.compatibleContent(u)&&0==i.startIndex){if(0==r.index(i.depth-1))return!1;n=e.doc.resolve(i.start-2),s=new Te(n,n,i.depth);i.endIndex<i.parent.childCount&&(i=new Te(r,e.doc.resolve(o.end(i.depth)),i.depth)),a=!0}s=Ht(s,u,l,i);return!!s&&(t&&t(function(e,t,n,r,o){for(var i=ce.empty,a=n.length-1;0<=a;a--)i=ce.from(n[a].type.create(n[a].attrs,i));e.step(new _t(t.start-(r?2:0),t.end,t.start,t.end,new ye(i,0,0),n.length,!0));for(var s=0,u=0;u<n.length;u++)n[u].type==o&&(s=u+1);for(var l=n.length-s,c=t.start+n.length-(r?2:0),f=t.parent,d=t.startIndex,p=t.endIndex,h=!0;d<p;d++,h=!1)!h&&Wt(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=f.child(d).nodeSize;return e}(e.tr,i,s,a,u).scrollIntoView()),!0)}}function qa(u){return function(d,e){var t,n,r,o=d.selection,i=o.$from,a=o.$to,s=i.blockRange(a,function(e){return 0<e.childCount&&e.firstChild.type==u});return!!s&&(!e||(i.node(s.depth-1).type==u?(t=e,n=u,r=s,o=d.tr,a=r.end,i=r.$to.end(r.depth),a<i&&(o.step(new _t(a-1,i,a,i,new ye(ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Te(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth)),t(o.lift(r,$t(r)).scrollIntoView()),!0):function(e,t){for(var n=d.tr,r=t.parent,o=t.end,i=t.endIndex-1,a=t.startIndex;a<i;i--)o-=r.child(i).nodeSize,n.delete(o-1,o+1);var s=n.doc.resolve(t.start),u=s.nodeAfter;if(n.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;var l=0==t.startIndex,c=t.endIndex==r.childCount,f=s.node(-1),t=s.index(-1);if(!f.canReplace(t+(l?0:1),t+1,u.content.append(c?ce.empty:ce.from(r))))return!1;s=s.pos,u=s+u.nodeSize;return n.step(new _t(s-(l?1:0),u+(c?1:0),s+1,u-1,new ye((l?ce.empty:ce.from(r.copy(ce.empty))).append(c?ce.empty:ce.from(r.copy(ce.empty))),l?0:1,c?0:1),l?0:1)),e(n.scrollIntoView()),!0}(e,s)))}}function Ja(e){var t=e.state,n=e.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return p(p({},t),{},{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var Ka=(h(Ya,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var r=this,e=this.rawCommands,t=this.editor,n=this.state,o=t.view,i=n.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(function(e){var t=q(e,2),e=t[0],n=t[1];return[e,function(){var e=n.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||r.hasCustomState||o.dispatch(i),e}]}))}},{key:"chain",get:function(){var e=this;return function(){return e.createChain()}}},{key:"can",get:function(){var e=this;return function(){return e.createCan()}}},{key:"createChain",value:function(e){var r=this,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t=this.rawCommands,n=this.editor,i=this.state,a=n.view,s=[],u=!!e,l=e||i.tr,c=p(p({},Object.fromEntries(Object.entries(t).map(function(e){var t=q(e,2),e=t[0],n=t[1];return[e,function(){var e=r.buildProps(l,o),e=n.apply(void 0,arguments)(e);return s.push(e),c}]}))),{},{run:function(){return u||!o||l.getMeta("preventDispatch")||r.hasCustomState||a.dispatch(l),s.every(function(e){return!0===e})}});return c}},{key:"createCan",value:function(e){var t=this,n=this.rawCommands,r=this.state,o=e||r.tr,i=this.buildProps(o,void 0),n=Object.fromEntries(Object.entries(n).map(function(e){var t=q(e,2),e=t[0],n=t[1];return[e,function(){return n.apply(void 0,arguments)(p(p({},i),{},{dispatch:void 0}))}]}));return p(p({},n),{},{chain:function(){return t.createChain(o,void 0)}})}},{key:"buildProps",value:function(e){var t=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view;i.storedMarks&&e.setStoredMarks(i.storedMarks);var s={tr:e,editor:o,view:a,state:Ja({state:i,transaction:e}),dispatch:n?function(){}:void 0,chain:function(){return t.createChain(e)},can:function(){return t.createCan(e)},get commands(){return Object.fromEntries(Object.entries(r).map(function(e){var t=q(e,2),e=t[0],n=t[1];return[e,function(){return n.apply(void 0,arguments)(s)}]}))}};return s}}]),Ya),Qa=(h(Ga,[{key:"on",value:function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e=this.callbacks[e];return e&&e.forEach(function(e){return e.apply(t,r)}),this}},{key:"off",value:function(e,t){var n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(function(e){return e!==t}):delete this.callbacks[e]),this}},{key:"removeAllListeners",value:function(){this.callbacks={}}}]),Ga);function Ga(){d(this,Ga),this.callbacks={}}function Ya(e){d(this,Ya),this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}function Xa(e,t,n){return void 0===e.config[t]&&e.parent?Xa(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(p(p({},n),{},{parent:e.parent?Xa(e.parent,t,n):null})):e.config[t]}function Za(e){return{baseExtensions:e.filter(function(e){return"extension"===e.type}),nodeExtensions:e.filter(function(e){return"node"===e.type}),markExtensions:e.filter(function(e){return"mark"===e.type})}}function es(e){var o=[],t=Za(e),n=t.nodeExtensions,t=t.markExtensions,t=[].concat(M(n),M(t)),i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(function(e){e=Xa(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage});e&&e().forEach(function(e){e.types.forEach(function(n){Object.entries(e.attributes).forEach(function(e){var t=q(e,2),e=t[0],t=t[1];o.push({type:n,name:e,attribute:p(p({},i),t)})})})})}),t.forEach(function(r){var e={name:r.name,options:r.options,storage:r.storage},e=Xa(r,"addAttributes",e);e&&(e=e(),Object.entries(e).forEach(function(e){var t=q(e,2),n=t[0],e=t[1],t=p(p({},i),e);e.isRequired&&void 0===e.default&&delete t.default,o.push({type:r.name,name:n,attribute:t})}))}),o}function ts(e,t){if("string"!=typeof e)return e;if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}function ns(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return!!e}).reduce(function(e,t){var n=p({},e);return Object.entries(t).forEach(function(e){var t=q(e,2),e=t[0],t=t[1];n[e]?n[e]="class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:n[e]=t}),n},{})}function rs(t,e){return e.filter(function(e){return e.attribute.rendered}).map(function(e){return e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:$({},e.name,t.attrs[e.name])}).reduce(function(e,t){return ns(e,t)},{})}function is(e){return"function"==typeof e}function as(e,t){t=1<arguments.length&&void 0!==t?t:void 0;if(is(e)){for(var n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return(t?e.bind(t):e).apply(void 0,r)}return e}function ss(n,o){return n.style?n:p(p({},n),{},{getAttrs:function(r){var e=n.getAttrs?n.getAttrs(r):n.attrs;if(!1===e)return!1;var t=o.reduce(function(e,t){var n,n=t.attribute.parseHTML?t.attribute.parseHTML(r):"string"!=typeof(n=r.getAttribute(t.name))?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):"true"===n||"false"!==n&&n;return null==n?e:p(p({},e),{},$({},t.name,n))},{});return p(p({},e),t)}})}function us(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=q(e,2),e=t[0],t=t[1];return("attrs"!==e||!function(e){e=0<arguments.length&&void 0!==e?e:{};return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t}))}function ls(e,t){return t.nodes[e]||t.marks[e]||null}function cs(t,e){return Array.isArray(e)?e.some(function(e){return("string"==typeof e?e:e.name)===t.name}):e}function fs(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var ds=h(function e(t){d(this,e),this.find=t.find,this.handler=t.handler});function ps(e){var u=e.editor,l=e.from,c=e.to,f=e.text,t=e.rules,d=e.plugin,p=u.view;if(p.composing)return!1;var n=p.state.doc.resolve(l);if(n.parent.type.spec.code||null!==(e=n.nodeBefore||n.nodeAfter)&&void 0!==e&&e.marks.find(function(e){return e.type.spec.code}))return!1;var h=!1,m=function(a,e){var e=1<arguments.length&&void 0!==e?e:500,s="";return a.parent.nodesBetween(Math.max(0,a.parentOffset-e),a.parentOffset,function(e,t,n,r){var o,i;s+=(null===(i=(o=e.type.spec).toText)||void 0===i?void 0:i.call(o,{node:e,pos:t,parent:n,index:r}))||(null===(r=a.nodeBefore)||void 0===r?void 0:r.text)||"%leaf%"}),s}(n)+f;return t.forEach(function(e){var t,n,r,o,i,a,s;h||(t=function(e,t){if(fs(t))return t.exec(e);var n=t(e);if(!n)return null;t=[];return t.push(n.text),t.index=n.index,t.input=e,t.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),t.push(n.replaceWith)),t}(m,e.find))&&(n=p.state.tr,r=Ja({state:p.state,transaction:n}),o={from:l-(t[0].length-f.length),to:c},i=(s=new Ka({editor:u,state:r})).commands,a=s.chain,s=s.can,null!==e.handler({state:r,range:o,match:t,commands:i,chain:a,can:s})&&n.steps.length&&(n.setMeta(d,{transform:n,from:l,to:c,text:f}),p.dispatch(n),h=!0))}),h}var hs=h(function e(t){d(this,e),this.find=t.find,this.handler=t.handler});var ms=(h(vs,[{key:"commands",get:function(){var n=this;return this.extensions.reduce(function(e,t){t=Xa(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:n.editor,type:ls(t.name,n.schema)});return t?p(p({},e),t()):e},{})}},{key:"plugins",get:function(){var p,r,h,m,o,i,a,s=this,u=this.editor,e=vs.sort(M(this.extensions).reverse()),l=[],c=[],t=e.map(function(e){var t={name:e.name,options:e.options,storage:e.storage,editor:u,type:ls(e.name,s.schema)},n=[],r=Xa(e,"addKeyboardShortcuts",t);r&&(o=Object.fromEntries(Object.entries(r()).map(function(e){var t=q(e,2),e=t[0],n=t[1];return[e,function(){return n({editor:u})}]})),o=new Mn({props:{handleKeyDown:Hi(o)}}),n.push(o));var o=Xa(e,"addInputRules",t);cs(e,u.options.enableInputRules)&&o&&l.push.apply(l,M(o()));o=Xa(e,"addPasteRules",t);cs(e,u.options.enablePasteRules)&&o&&c.push.apply(c,M(o()));t=Xa(e,"addProseMirrorPlugins",t);return t&&(t=t(),n.push.apply(n,M(t))),n}).flat();return[(o=(e={editor:u,rules:l}).editor,i=e.rules,a=new Mn({state:{init:function(){return null},apply:function(e,t){return e.getMeta(a)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,n,r){return ps({editor:o,from:t,to:n,text:r,rules:i,plugin:a})},handleDOMEvents:{compositionend:function(t){return setTimeout(function(){var e=t.state.selection.$cursor;e&&ps({editor:o,from:e.pos,to:e.pos,text:"",rules:i,plugin:a})}),!1}},handleKeyDown:function(e,t){if("Enter"!==t.key)return!1;e=e.state.selection.$cursor;return!!e&&ps({editor:o,from:e.pos,to:e.pos,text:"\n",rules:i,plugin:a})}},isInputRules:!0}))].concat(M((p=(e={editor:u,rules:c}).editor,r=null,m=h=!1,e.rules.map(function(d){return new Mn({view:function(n){function e(e){var t;r=null!==(t=n.dom.parentElement)&&void 0!==t&&t.contains(e.target)?n.dom.parentElement:null}return window.addEventListener("dragstart",e),{destroy:function(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:function(e){return m=r===e.dom.parentElement,!1},paste:function(e,t){t=null===(t=t.clipboardData)||void 0===t?void 0:t.getData("text/html");return h=!(null==t||!t.includes("data-pm-slice")),!1}}},appendTransaction:function(e,t,n){var o,i,a,s,u,l,c,f,r=e[0],e="paste"===r.getMeta("uiEvent")&&!h,r="drop"===r.getMeta("uiEvent")&&!m;if(e||r){var e=t.doc.content.findDiffStart(n.doc.content),r=t.doc.content.findDiffEnd(n.doc.content);if("number"==typeof e&&r&&e!==r.b){t=n.tr,n=Ja({state:n,transaction:t});if(e={editor:p,state:n,from:Math.max(e-1,0),to:r.b,rule:d},r=e.editor,o=e.state,i=e.from,a=e.to,s=e.rule,u=(r=new Ka({editor:r,state:o})).commands,l=r.chain,c=r.can,f=[],o.doc.nodesBetween(i,a,function(e,t){var r,n;e.isTextblock&&!e.type.spec.code&&(r=Math.max(i,t),n=Math.min(a,t+e.content.size),function(n,e){if(fs(e))return M(n.matchAll(e));e=e(n);return e?e.map(function(e){var t=[];return t.push(e.text),t.index=e.index,t.input=n,t.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),t.push(e.replaceWith)),t}):[]}(e.textBetween(r-t,n-t,void 0,""),s.find).forEach(function(e){var t,n;void 0!==e.index&&(n=(t=r+e.index+1)+e[0].length,n={from:o.tr.mapping.map(t),to:o.tr.mapping.map(n)},e=s.handler({state:o,range:n,match:e,commands:u,chain:l,can:c}),f.push(e))}))}),f.every(function(e){return null!==e})&&t.steps.length)return t}}}})}))),M(t))}},{key:"attributes",get:function(){return es(this.extensions)}},{key:"nodeViews",get:function(){var t=this,u=this.editor,e=Za(this.extensions).nodeExtensions;return Object.fromEntries(e.filter(function(e){return!!Xa(e,"addNodeView")}).map(function(i){var a=t.attributes.filter(function(e){return e.type===i.name}),e={name:i.name,options:i.options,storage:i.storage,editor:u,type:ts(i.name,t.schema)},s=Xa(i,"addNodeView",e);return s?[i.name,function(e,t,n,r){var o=rs(e,a);return s()({editor:u,node:e,getPos:n,decorations:r,HTMLAttributes:o,extension:i})}]:[]}))}}],[{key:"resolve",value:function(e){var n,t=vs.sort(vs.flatten(e)),e=(n=t.map(function(e){return e.name}),e=n.filter(function(e,t){return n.indexOf(e)!==t}),M(new Set(e)));return e.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(e.map(function(e){return"'".concat(e,"'")}).join(", "),"]. This can lead to issues.")),t}},{key:"flatten",value:function(e){var n=this;return e.map(function(e){var t=Xa(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e].concat(M(n.flatten(t()))):e}).flat(10)}},{key:"sort",value:function(e){return e.sort(function(e,t){e=Xa(e,"priority")||100,t=Xa(t,"priority")||100;return t<e?-1:e<t?1:0})}}]),vs);function vs(e,t){var a,s,n,r=this;d(this,vs),this.splittableMarks=[],this.editor=t,this.extensions=vs.resolve(e),this.schema=(a=this.extensions,s=es(a),t=(n=Za(a)).nodeExtensions,e=n.markExtensions,n=null===(n=t.find(function(e){return Xa(e,"topNode")}))||void 0===n?void 0:n.name,t=Object.fromEntries(t.map(function(n){var t=s.filter(function(e){return e.type===n.name}),r={name:n.name,options:n.options,storage:n.storage},e=a.reduce(function(e,t){t=Xa(t,"extendNodeSchema",r);return p(p({},e),t?t(n):{})},{}),o=us(p(p({},e),{},{content:as(Xa(n,"content",r)),marks:as(Xa(n,"marks",r)),group:as(Xa(n,"group",r)),inline:as(Xa(n,"inline",r)),atom:as(Xa(n,"atom",r)),selectable:as(Xa(n,"selectable",r)),draggable:as(Xa(n,"draggable",r)),code:as(Xa(n,"code",r)),defining:as(Xa(n,"defining",r)),isolating:as(Xa(n,"isolating",r)),attrs:Object.fromEntries(t.map(function(e){return[e.name,{default:null===(e=null==e?void 0:e.attribute)||void 0===e?void 0:e.default}]}))})),e=as(Xa(n,"parseHTML",r));e&&(o.parseDOM=e.map(function(e){return ss(e,t)}));var i=Xa(n,"renderHTML",r);i&&(o.toDOM=function(e){return i({node:e,HTMLAttributes:rs(e,t)})});e=Xa(n,"renderText",r);return e&&(o.toText=e),[n.name,o]})),e=Object.fromEntries(e.map(function(n){var t=s.filter(function(e){return e.type===n.name}),r={name:n.name,options:n.options,storage:n.storage},e=a.reduce(function(e,t){t=Xa(t,"extendMarkSchema",r);return p(p({},e),t?t(n):{})},{}),o=us(p(p({},e),{},{inclusive:as(Xa(n,"inclusive",r)),excludes:as(Xa(n,"excludes",r)),group:as(Xa(n,"group",r)),spanning:as(Xa(n,"spanning",r)),code:as(Xa(n,"code",r)),attrs:Object.fromEntries(t.map(function(e){return[e.name,{default:null===(e=null==e?void 0:e.attribute)||void 0===e?void 0:e.default}]}))})),e=as(Xa(n,"parseHTML",r));e&&(o.parseDOM=e.map(function(e){return ss(e,t)}));var i=Xa(n,"renderHTML",r);return i&&(o.toDOM=function(e){return i({mark:e,HTMLAttributes:rs(e,t)})}),[n.name,o]})),new et({topNode:n,nodes:t,marks:e})),this.extensions.forEach(function(e){r.editor.extensionStorage[e.name]=e.storage;var t={name:e.name,options:e.options,storage:e.storage,editor:r.editor,type:ls(e.name,r.schema)};"mark"!==e.type||null!==(n=as(Xa(e,"keepOnSplit",t)))&&void 0!==n&&!n||r.splittableMarks.push(e.name);var n=Xa(e,"onBeforeCreate",t);n&&r.editor.on("beforeCreate",n);n=Xa(e,"onCreate",t);n&&r.editor.on("create",n);n=Xa(e,"onUpdate",t);n&&r.editor.on("update",n);n=Xa(e,"onSelectionUpdate",t);n&&r.editor.on("selectionUpdate",n);n=Xa(e,"onTransaction",t);n&&r.editor.on("transaction",n);n=Xa(e,"onFocus",t);n&&r.editor.on("focus",n);n=Xa(e,"onBlur",t);n&&r.editor.on("blur",n);t=Xa(e,"onDestroy",t);t&&r.editor.on("destroy",t)})}function gs(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ys(t,n){var r=p({},t);return gs(t)&&gs(n)&&Object.keys(n).forEach(function(e){gs(n[e])&&e in t?r[e]=ys(t[e],n[e]):Object.assign(r,$({},e,n[e]))}),r}h(bs,[{key:"configure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=ys(this.options,e),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new bs(e);return((t.parent=this).child=t).name=e.name||t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=as(Xa(t,"addOptions",{name:t.name})),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}}],[{key:"create",value:function(){return new bs(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}]),Bn=bs;function bs(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,bs),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=p(p({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=as(Xa(this,"addOptions",{name:this.name}))),this.storage=as(Xa(this,"addStorage",{name:this.name,options:this.options}))||{}}function ks(e,i,t){var a=i.from,s=i.to,n=t||{},t=n.blockSeparator,u=void 0===t?"\n\n":t,n=n.textSerializers,l=void 0===n?{}:n,c="",f=!0;return e.nodesBetween(a,s,function(e,t,n,r){var o=null==l?void 0:l[e.type.name];o?(e.isBlock&&!f&&(c+=u,f=!0),n&&(c+=o({node:e,pos:t,parent:n,index:r,range:i}))):e.isText?(c+=null===(r=null==e?void 0:e.text)||void 0===r?void 0:r.slice(Math.max(a,t)-t,s-t),f=!1):e.isBlock&&!f&&(c+=u,f=!0)}),c}function ws(e){return Object.fromEntries(Object.entries(e.nodes).filter(function(e){return q(e,2)[1].spec.toText}).map(function(e){e=q(e,2);return[e[0],e[1].spec.toText]}))}zn=Bn.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var r=this;return[new Mn({key:new Pn("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var e=r.editor,t=e.state,n=e.schema,e=t.doc,t=t.selection.ranges;return ks(e,{from:Math.min.apply(Math,M(t.map(function(e){return e.$from.pos}))),to:Math.max.apply(Math,M(t.map(function(e){return e.$to.pos})))},{textSerializers:ws(n)})}}})]}});function xs(t,n,e){var r=2<arguments.length&&void 0!==e?e:{strict:!0},e=Object.keys(n);return!e.length||e.every(function(e){return!r.strict&&fs(n[e])?n[e].test(t[e]):n[e]===t[e]})}function Ds(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return e.find(function(e){return e.type===t&&xs(e.attrs,r)})}function Cs(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};if(e&&t){n=e.parent.childAfter(e.parentOffset);if(e.parentOffset===n.offset&&0!==n.offset&&(n=e.parent.childBefore(e.parentOffset)),n.node){var o=Ds(M(n.node.marks),t,r);if(o){var i=n.index,a=e.start()+n.offset,s=i+1,u=a+n.node.nodeSize;for(Ds(M(n.node.marks),t,r);0<i&&o.isInSet(e.parent.child(i-1).marks);)--i,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&function(e,t,n){return Ds(e,t,2<arguments.length&&void 0!==n?n:{})}(M(e.parent.child(s).marks),t,r);)u+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:u}}}}}function Es(e,t){if("string"!=typeof e)return e;if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}function Os(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!("class"===(null===(e=e.constructor)||void 0===e?void 0:e.toString().substring(0,5)))}function Ss(e){return Os(e)&&e instanceof pn}function As(e,t,n){e=0<arguments.length&&void 0!==e?e:0,t=1<arguments.length&&void 0!==t?t:0,n=2<arguments.length&&void 0!==n?n:0;return Math.min(Math.max(e,t),n)}function js(e,t){var n=1<arguments.length&&void 0!==t?t:null;if(!n)return null;var r=sn.atStart(e),t=sn.atEnd(e);if("start"===n||!0===n)return r;if("end"===n)return t;r=r.from,t=t.to;return"all"===n?pn.create(e,As(0,r,t),As(e.content.size,r,t)):pn.create(e,As(n,r,t),As(n,r,t))}function Ms(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Ns(e){e="<body>".concat(e,"</body>");return(new window.DOMParser).parseFromString(e,"text/html").body}function Ts(t,n,r){if(r=p({slice:!0,parseOptions:{}},r),"object"==typeof t&&null!==t)try{return Array.isArray(t)?ce.fromArray(t.map(function(e){return n.nodeFromJSON(e)})):n.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),Ts("",n,r)}if("string"!=typeof t)return Ts("",n,r);var e=at.fromSchema(n);return r.slice?e.parseSlice(Ns(t),r.parseOptions).content:e.parse(Ns(t),r.parseOptions)}function Fs(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function Ps(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},n=e.selection,o=n.from,i=n.to,n=n.empty,a=t?ts(t,e.schema):null,s=[];e.doc.nodesBetween(o,i,function(e,t){var n;e.isText||(n=Math.max(o,t),t=Math.min(i,t+e.nodeSize),s.push({node:e,from:n,to:t}))});t=i-o,e=s.filter(function(e){return!a||a.name===e.node.type.name}).filter(function(e){return xs(e.node.attrs,r,{strict:!1})});return n?!!e.length:t<=e.reduce(function(e,t){return e+t.to-t.from},0)}function Rs(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Bs(n,e){var r="string"==typeof e?[e]:e;return Object.keys(n).reduce(function(e,t){return r.includes(t)||(e[t]=n[t]),e},{})}function Is(e,t,n){return Ts(e,t,{slice:!1,parseOptions:2<arguments.length&&void 0!==n?n:{}})}function Ls(e,t){var n=Es(t,e.schema),r=e.selection,o=r.from,t=r.to,r=r.empty,i=[];r?(e.storedMarks&&i.push.apply(i,M(e.storedMarks)),i.push.apply(i,M(e.selection.$head.marks()))):e.doc.nodesBetween(o,t,function(e){i.push.apply(i,M(e.marks))});t=i.find(function(e){return e.type.name===n.name});return t?p({},t.attrs):{}}function zs(n,r,e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=q(e,1)[0],e=n.find(function(e){return e.type===r&&e.name===t});return!!e&&e.attribute.keepOnSplit}))}function _s(e,t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();n&&(n=n.filter(function(e){return null==t?void 0:t.includes(e.type.name)}),e.tr.ensureMarks(n))}function Vs(t){return function(e){return function(e,t){for(var n=e.depth;0<n;--n){var r=e.node(n);if(t(r))return{pos:0<n?e.before(n):0,start:e.start(n),depth:n,node:r}}}(e.$from,t)}}function $s(t,e){e=Za(e).nodeExtensions.find(function(e){return e.name===t});if(!e)return!1;e=as(Xa(e,"group",{name:e.name,options:e.options,storage:e.storage}));return"string"==typeof e&&e.split(" ").includes("list")}function Hs(e,t){var n=Vs(function(e){return e.type===t})(e.selection);if(!n)return!0;var r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);return void 0===r||(r=e.doc.nodeAt(r),n.node.type!==(null==r?void 0:r.type)||!fa(e.doc,n.pos)||(e.join(n.pos),!0))}function Us(e,t){var n=Vs(function(e){return e.type===t})(e.selection);if(!n)return!0;var r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!fa(e.doc,r)||(e.join(r),!0)}function Ws(n,e,t){var r=2<arguments.length&&void 0!==t?t:{},o=n.selection,t=o.empty,o=o.ranges,i=e?Es(e,n.schema):null;if(t)return!!(n.storedMarks||n.selection.$from.marks()).filter(function(e){return!i||i.name===e.type.name}).find(function(e){return xs(e.attrs,r,{strict:!1})});var a=0,s=[];if(o.forEach(function(e){var t=e.$from,e=e.$to,o=t.pos,i=e.pos;n.doc.nodesBetween(o,i,function(e,t){var n,r;(e.isText||e.marks.length)&&(n=Math.max(o,t),r=Math.min(i,t+e.nodeSize),a+=r-n,s.push.apply(s,M(e.marks.map(function(e){return{mark:e,from:n,to:r}}))))})}),0===a)return!1;t=s.filter(function(e){return!i||i.name===e.mark.type.name}).filter(function(e){return xs(e.mark.attrs,r,{strict:!1})}).reduce(function(e,t){return e+t.to-t.from},0),o=s.filter(function(e){return!i||e.mark.type!==i&&e.mark.type.excludes(i)}).reduce(function(e,t){return e+t.to-t.from},0);return a<=(0<t?t+o:t)}var qs=Object.freeze({__proto__:null,blur:function(){return function(e){var t=e.editor,n=e.view;return requestAnimationFrame(function(){var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0}},clearContent:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return function(e){return e.commands.setContent("",t)}},clearNodes:function(){return function(e){var n=e.state,i=e.tr,t=e.dispatch,e=i.selection.ranges;return!t||(e.forEach(function(e){var t=e.$from,e=e.$to;n.doc.nodesBetween(t.pos,e.pos,function(e,t){var n,r,o;e.type.isText||(n=i.doc,r=i.mapping,o=n.resolve(r.map(t)),r=n.resolve(r.map(t+e.nodeSize)),(t=o.blockRange(r))&&(r=function(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||(r=r,i=i,0!=(o=o)&&!r.canReplace(o,r.childCount)||i!=r.childCount&&!r.canReplace(0,i)))break}return null}(t),e.type.isTextblock&&(o=o.parent.contentMatchAt(o.index()).defaultType,i.setNodeMarkup(t.start,o)),!r&&0!==r||i.lift(t,r)))})}),!0)}},command:function(t){return function(e){return t(e)}},createParagraphNear:function(){return function(e){var t=e.state,e=e.dispatch;return Pa(t,e)}},deleteNode:function(l){return function(e){for(var t,n,r=e.tr,o=e.state,i=e.dispatch,a=ts(l,o.schema),s=r.selection.$anchor,u=s.depth;0<u;--u)if(s.node(u).type===a)return i&&(t=s.before(u),n=s.after(u),r.delete(t,n).scrollIntoView()),!0;return!1}},deleteRange:function(o){return function(e){var t=e.tr,n=e.dispatch,r=o.from,e=o.to;return n&&t.delete(r,e),!0}},deleteSelection:function(){return function(e){var t=e.state,e=e.dispatch;return wa(t,e)}},enter:function(){return function(e){return e.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(e){var t=e.state,e=e.dispatch;return Fa(t,e)}},extendMarkRange:function(s){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.tr,n=e.state,r=e.dispatch,o=Es(s,n.schema),i=t.doc,a=t.selection,e=a.$from,n=a.from,a=a.to;return!r||(o=Cs(e,o,u))&&o.from<=n&&o.to>=a&&(o=pn.create(i,o.from,o.to),t.setSelection(o)),!0}},first:function(r){return function(e){for(var t="function"==typeof r?r(e):r,n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1}},focus:function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.editor,n=e.view,r=e.tr,o=e.dispatch;u=p({scrollIntoView:!0},u);function i(){Ms()&&n.dom.focus(),requestAnimationFrame(function(){t.isDestroyed||(n.focus(),null!=u&&u.scrollIntoView&&t.commands.scrollIntoView())})}if(n.hasFocus()&&null===s||!1===s)return!0;if(o&&null===s&&!Ss(t.state.selection))return i(),!0;var a=js(r.doc,s)||t.state.selection,e=t.state.selection.eq(a);return o&&(e||r.setSelection(a),e&&r.storedMarks&&r.setStoredMarks(r.storedMarks),i()),!0}},forEach:function(e,r){return function(n){return e.every(function(e,t){return r(e,p(p({},n),{},{index:t}))})}},insertContent:function(n,r){return function(e){var t=e.tr;return e.commands.insertContentAt({from:t.selection.from,to:t.selection.to},n,r)}},insertContentAt:function(u,l,c){return function(e){var o,t=e.tr,n=e.dispatch,r=e.editor;if(n){c=p({parseOptions:{},updateSelection:!0},c);var i=Ts(l,r.schema,{parseOptions:p({preserveWhitespace:"full"},c.parseOptions)});if("<>"===i.toString())return!0;var e="number"==typeof u?{from:u,to:u}:u,n=e.from,r=e.to,a=!0,s=!0;(i.toString().startsWith("<")?i:[i]).forEach(function(e){e.check(),a=!!a&&e.isText&&0===e.marks.length,s=!!s&&e.isBlock}),n===r&&s&&(!(e=t.doc.resolve(n).parent).isTextblock||e.type.spec.code||e.childCount||(--n,r+=1)),a?t.insertText(l,n,r):t.replaceWith(n,r,i),c.updateSelection&&(i=(r=t).steps.length-1,(t=r.steps.length-1)<i||((i=r.steps[t])instanceof aa||i instanceof sa)&&(t=r.mapping.maps[t],o=0,t.forEach(function(e,t,n,r){0===o&&(o=r)}),r.setSelection(sn.near(r.doc.resolve(o),-1))))}return!0}},joinBackward:function(){return function(e){var t=e.state,e=e.dispatch;return xa(t,e)}},joinForward:function(){return function(e){var t=e.state,e=e.dispatch;return Aa(t,e)}},keyboardShortcut:function(u){return function(e){var t=e.editor,n=e.view,r=e.tr,o=e.dispatch,i=function(){var e,t,n,r,o=u.split(/-(?!$)/),i=o[o.length-1];"Space"===i&&(i=" ");for(var a=0;a<o.length-1;a+=1){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))t=!0;else if(/^s(hift)?$/i.test(s))n=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: ".concat(s));Ms()||Fs()?r=!0:t=!0}}return e&&(i="Alt-".concat(i)),t&&(i="Ctrl-".concat(i)),r&&(i="Meta-".concat(i)),n&&(i="Shift-".concat(i)),i}().split(/-(?!$)/),e=i.find(function(e){return!["Alt","Ctrl","Meta","Shift"].includes(e)}),a=new KeyboardEvent("keydown",{key:"Space"===e?" ":e,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),t=t.captureTransaction(function(){n.someProp("handleKeyDown",function(e){return e(n,a)})});return null==t||t.steps.forEach(function(e){e=e.map(r.mapping);e&&o&&r.maybeStep(e)}),!0}},lift:function(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t,n=e.state,r=e.dispatch;return!!Ps(n,ts(o,n.schema),i)&&(t=r,r=(e=n).selection,n=r.$from,r=r.$to,n=n.blockRange(r),null!=(r=n&&$t(n))&&(t&&t(e.tr.lift(n,r).scrollIntoView()),!0))}},liftEmptyBlock:function(){return function(e){var t=e.state,e=e.dispatch;return Ra(t,e)}},liftListItem:function(n){return function(e){var t=e.state,e=e.dispatch;return qa(ts(n,t.schema))(t,e)}},newlineInCode:function(){return function(e){var t=e.state,e=e.dispatch;return Na(t,e)}},resetAttributes:function(a,s){return function(e){var r=e.tr,t=e.state,n=e.dispatch,o=null,i=null,e=Rs("string"==typeof a?a:a.name,t.schema);return!!e&&("node"===e&&(o=ts(a,t.schema)),"mark"===e&&(i=Es(a,t.schema)),n&&r.selection.ranges.forEach(function(e){t.doc.nodesBetween(e.$from.pos,e.$to.pos,function(t,n){o&&o===t.type&&r.setNodeMarkup(n,void 0,Bs(t.attrs,s)),i&&t.marks.length&&t.marks.forEach(function(e){i===e.type&&r.addMark(n,n+t.nodeSize,i.create(Bs(e.attrs,s)))})})}),!0)}},scrollIntoView:function(){return function(e){var t=e.tr;return e.dispatch&&t.scrollIntoView(),!0}},selectAll:function(){return function(e){var t=e.tr;return e.commands.setTextSelection({from:0,to:t.doc.content.size})}},selectNodeBackward:function(){return function(e){var t=e.state,e=e.dispatch;return Oa(t,e)}},selectNodeForward:function(){return function(e){var t=e.state,e=e.dispatch;return ja(t,e)}},selectParentNode:function(){return function(e){return t=e.state,n=e.dispatch,r=t.selection,e=r.$from,r=r.to,0!=(r=e.sharedDepth(r))&&(r=e.before(r),n&&n(t.tr.setSelection(mn.create(t.doc,r))),!0);var t,n,r}},selectTextblockEnd:function(){return function(e){var t=e.state,e=e.dispatch;return za(t,e)}},selectTextblockStart:function(){return function(e){var t=e.state,e=e.dispatch;return La(t,e)}},setContent:function(o){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(e){var t=e.tr,n=e.editor,r=e.dispatch,e=t.doc,n=Is(o,n.schema,a);return r&&t.replaceWith(0,e.content.size,n).setMeta("preventUpdate",!i),!0}},setMark:function(o){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var a=e.tr,t=e.state,n=e.dispatch,r=a.selection,e=r.empty,r=r.ranges,s=Es(o,t.schema);return n&&(e?(e=Ls(t,s),a.addStoredMark(s.create(p(p({},e),u)))):r.forEach(function(e){var o=e.$from.pos,i=e.$to.pos;t.doc.nodesBetween(o,i,function(e,t){var n=Math.max(t,o),r=Math.min(t+e.nodeSize,i);e.marks.find(function(e){return e.type===s})?e.marks.forEach(function(e){s===e.type&&a.addMark(n,r,s.create(p(p({},e.attrs),u)))}):a.addMark(n,r,s.create(u))})})),!0}},setMeta:function(t,n){return function(e){return e.tr.setMeta(t,n),!0}},setNode:function(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.state,n=e.dispatch,e=e.chain,r=ts(o,t.schema);return r.isTextblock?e().command(function(e){e=e.commands;return!!_a(r,i)(t)||e.clearNodes()}).command(function(e){e=e.state;return _a(r,i)(e,n)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(o){return function(e){var t,n,r=e.tr;return e.dispatch&&(t=r.doc,n=sn.atStart(t).from,e=sn.atEnd(t).to,e=As(o,n,e),e=mn.create(t,e),r.setSelection(e)),!0}},setTextSelection:function(a){return function(e){var t,n,r,o,i=e.tr;return e.dispatch&&(t=i.doc,r=(o="number"==typeof a?{from:a,to:a}:a).from,n=o.to,r=As(r,e=pn.atStart(t).from,o=pn.atEnd(t).to),o=As(n,e,o),o=pn.create(t,r,o),i.setSelection(o)),!0}},sinkListItem:function(n){return function(e){var t=e.state,e=e.dispatch,a=ts(n,t.schema);return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o,function(e){return 0<e.childCount&&e.firstChild.type==a});if(!i)return!1;n=i.startIndex;if(0==n)return!1;r=i.parent,o=r.child(n-1);return o.type==a&&(t&&(n=o.lastChild&&o.lastChild.type==r.type,o=ce.from(n?a.create():null),r=new ye(ce.from(a.create(null,ce.from(r.type.create(null,o)))),n?3:1,0),o=i.start,i=i.end,t(e.tr.step(new _t(o-(n?3:1),i,o,i,r,1,!0)).scrollIntoView())),!0)}(t,e)}},splitBlock:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).keepMarks,l=void 0===e||e;return function(e){var t=e.tr,n=e.state,r=e.dispatch,o=e.editor,i=t.selection,a=t.doc,s=i.$from,u=i.$to,e=zs(o.extensionManager.attributes,s.node().type.name,s.node().attrs);return i instanceof mn&&i.node.isBlock?!(!s.parentOffset||!ca(a,s.pos)||(r&&(l&&_s(n,o.extensionManager.splittableMarks),t.split(s.pos).scrollIntoView()),0)):!!s.parent.isBlock&&(r&&(a=u.parentOffset===u.parent.content.size,i instanceof pn&&t.deleteSelection(),r=0===s.depth?void 0:function(e){for(var t=0;t<e.edgeCount;t+=1){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(s.node(-1).contentMatchAt(s.indexAfter(-1))),u=a&&r?[{type:r,attrs:e}]:void 0,i=ca(t.doc,t.mapping.map(s.pos),1,u),u||i||!ca(t.doc,t.mapping.map(s.pos),1,r?[{type:r}]:void 0)||(i=!0,u=r?[{type:r,attrs:e}]:void 0),i&&(t.split(t.mapping.map(s.pos),1,u),r&&!a&&!s.parentOffset&&s.parent.type!==r)&&(a=t.mapping.map(s.before()),a=t.doc.resolve(a),s.node(-1).canReplaceWith(a.index(),a.index()+1,r)&&t.setNodeMarkup(t.mapping.map(s.before()),r)),l&&_s(n,o.extensionManager.splittableMarks),t.scrollIntoView()),!0)}},splitListItem:function(h){return function(e){var t=e.tr,n=e.state,r=e.dispatch,o=e.editor,i=ts(h,n.schema),a=n.selection,s=a.$from,u=a.$to,l=n.selection.node;if(l&&l.isBlock||s.depth<2||!s.sameParent(u))return!1;e=s.node(-1);if(e.type!==i)return!1;a=o.extensionManager.attributes;if(0===s.parent.content.size&&s.node(-1).childCount===s.indexAfter(-1)){if(2===s.depth||s.node(-3).type!==i||s.index(-2)!==s.node(-2).childCount-1)return!1;if(r){for(var c=ce.empty,n=s.index(-1)?1:s.index(-2)?2:3,f=s.depth-n;f>=s.depth-3;--f)c=ce.from(s.node(f).copy(c));var l=s.indexAfter(-1)<s.node(-2).childCount?1:s.indexAfter(-2)<s.node(-3).childCount?2:3,d=zs(a,s.node().type.name,s.node().attrs),d=(null===(o=i.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(d))||void 0,c=c.append(ce.from(i.createAndFill(null,d)||void 0)),d=s.before(s.depth-(n-1));t.replace(d,s.after(-l),new ye(c,4-n,0));var p=-1;t.doc.nodesBetween(d,t.doc.content.size,function(e,t){return!(-1<p)&&void(e.isTextblock&&0===e.content.size&&(p=t+1))}),-1<p&&t.setSelection(pn.near(t.doc.resolve(p))),t.scrollIntoView()}return!0}d=u.pos===s.end()?e.contentMatchAt(0).defaultType:null,e=zs(a,e.type.name,e.attrs),a=zs(a,s.node().type.name,s.node().attrs);t.delete(s.pos,u.pos);e=d?[{type:i,attrs:e},{type:d,attrs:a}]:[{type:i,attrs:e}];return!!ca(t.doc,s.pos,2)&&(r&&t.split(s.pos,2,e).scrollIntoView(),!0)}},toggleList:function(d,p){return function(e){var t=e.editor,n=e.tr,r=e.state,o=e.dispatch,i=e.chain,a=e.commands,s=e.can,u=t.extensionManager.extensions,l=ts(d,r.schema),c=ts(p,r.schema),e=r.selection,t=e.$from,r=e.$to,r=t.blockRange(r);if(!r)return!1;var f=Vs(function(e){return $s(e.type.name,u)})(e);if(1<=r.depth&&f&&r.depth-f.depth<=1){if(f.node.type===l)return a.liftListItem(c);if($s(f.node.type.name,u)&&l.validContent(f.node.content)&&o)return i().command(function(){return n.setNodeMarkup(f.pos,l),!0}).command(function(){return Hs(n,l)}).command(function(){return Us(n,l)}).run()}return i().command(function(){return!!s().wrapInList(l)||a.clearNodes()}).wrapInList(l).command(function(){return Hs(n,l)}).command(function(){return Us(n,l)}).run()}},toggleMark:function(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(e){var t=e.state,n=e.commands,r=a.extendEmptyMarkRange,e=void 0!==r&&r,r=Es(o,t.schema);return Ws(t,r,i)?n.unsetMark(r,{extendEmptyMarkRange:e}):n.setMark(r,i)}},toggleNode:function(o,i){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(e){var t=e.state,n=e.commands,r=ts(o,t.schema),e=ts(i,t.schema);return Ps(t,r,a)?n.setNode(e):n.setNode(r,a)}},toggleWrap:function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.state,n=e.commands,e=ts(r,t.schema);return Ps(t,e,o)?n.lift(e):n.wrapIn(e,o)}},undoInputRule:function(){return function(e){for(var t=e.state,n=e.dispatch,r=t.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(t))){if(n){for(var s=t.tr,u=a.transform,l=u.steps.length-1;0<=l;--l)s.step(u.steps[l].invert(u.docs[l]));a.text?(i=s.doc.resolve(a.from).marks(),s.replaceWith(a.from,a.to,t.schema.text(a.text,i))):s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(e){var t=e.tr,n=e.dispatch,r=t.selection,e=r.empty,r=r.ranges;return e||n&&r.forEach(function(e){t.removeMark(e.$from.pos,e.$to.pos)}),!0}},unsetMark:function(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.tr,n=e.state,r=e.dispatch,o=l.extendEmptyMarkRange,i=void 0!==o&&o,a=t.selection,s=Es(u,n.schema),e=a.$from,o=a.empty,n=a.ranges;return r&&(o&&i?(o=a.from,i=a.to,a=null===(a=e.marks().find(function(e){return e.type===s}))||void 0===a?void 0:a.attrs,(a=Cs(e,s,a))&&(o=a.from,i=a.to),t.removeMark(o,i,s)):n.forEach(function(e){t.removeMark(e.$from.pos,e.$to.pos,s)}),t.removeStoredMark(s)),!0}},updateAttributes:function(r){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var s=e.tr,t=e.state,n=e.dispatch,u=null,l=null,e=Rs("string"==typeof r?r:r.name,t.schema);return!!e&&("node"===e&&(u=ts(r,t.schema)),"mark"===e&&(l=Es(r,t.schema)),n&&s.selection.ranges.forEach(function(e){var i=e.$from.pos,a=e.$to.pos;t.doc.nodesBetween(i,a,function(r,o){u&&u===r.type&&s.setNodeMarkup(o,void 0,p(p({},r.attrs),c)),l&&r.marks.length&&r.marks.forEach(function(e){var t,n;l===e.type&&(t=Math.max(o,i),n=Math.min(o+r.nodeSize,a),s.addMark(t,n,l.create(p(p({},e.attrs),c))))})})}),!0)}},wrapIn:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.state,e=e.dispatch;return function(o,e){var i=1<arguments.length&&void 0!==e?e:null;return function(e,t){var n=e.selection,r=n.$from,n=n.$to,r=r.blockRange(n),n=r&&Ht(r,o,i);return!!n&&(t&&t(e.tr.wrap(r,n).scrollIntoView()),!0)}}(ts(n,t.schema),r)(t,e)}},wrapInList:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=e.state,e=e.dispatch;return Wa(ts(n,t.schema),r)(t,e)}}}),_n=Bn.create({name:"commands",addCommands:function(){return p({},qs)}}),t=Bn.create({name:"editable",addProseMirrorPlugins:function(){var e=this;return[new Mn({key:new Pn("editable"),props:{editable:function(){return e.editor.options.editable}}})]}}),Ln=Bn.create({name:"focusEvents",addProseMirrorPlugins:function(){var n=this.editor;return[new Mn({key:new Pn("focusEvents"),props:{handleDOMEvents:{focus:function(e,t){n.isFocused=!0;t=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(t),!1},blur:function(e,t){n.isFocused=!1;t=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(t),!1}}}})]}}),Rn=Bn.create({name:"keymap",addKeyboardShortcuts:function(){function e(){return t.editor.commands.first(function(e){var o=e.commands;return[function(){return o.undoInputRule()},function(){return o.command(function(e){var t=e.tr,n=t.selection,r=t.doc,e=n.empty,t=n.$anchor,n=t.pos,t=t.parent,n=sn.atStart(r).from===n;return!(!(e&&n&&t.type.isTextblock)||t.textContent.length)&&o.clearNodes()})},function(){return o.deleteSelection()},function(){return o.joinBackward()},function(){return o.selectNodeBackward()}]})}var t=this,n=function(){return t.editor.commands.first(function(e){var t=e.commands;return[function(){return t.deleteSelection()},function(){return t.joinForward()},function(){return t.selectNodeForward()}]})},r={Enter:function(){return t.editor.commands.first(function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]})},"Mod-Enter":function(){return t.editor.commands.exitCode()},Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":function(){return t.editor.commands.selectAll()}},o=p({},r),n=p(p({},r),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return t.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return t.editor.commands.selectTextblockEnd()}});return Ms()||Fs()?n:o},addProseMirrorPlugins:function(){var a=this;return[new Mn({key:new Pn("clearDocument"),appendTransaction:function(e,t,n){if(e.some(function(e){return e.docChanged})&&!t.doc.eq(n.doc)){var r=t.selection,o=r.empty,i=r.from,e=r.to,r=sn.atStart(t.doc).from,t=sn.atEnd(t.doc).to,e=i===r&&e===t,t=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(!o&&e&&t){t=n.tr,n=Ja({state:n,transaction:t});if(new Ka({editor:a.editor,state:n}).commands.clearNodes(),t.steps.length)return t}}}})]}}),In=Bn.create({name:"tabindex",addProseMirrorPlugins:function(){return[new Mn({key:new Pn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Js=Object.freeze({__proto__:null,ClipboardTextSerializer:zn,Commands:_n,Editable:t,FocusEvents:Ln,Keymap:Rn,Tabindex:In});function Ks(e,i){var t=Rs("string"==typeof i?i:i.name,e.schema);return"node"===t?function(e){var t=ts(i,e.schema),n=e.selection,r=n.from,n=n.to,o=[];e.doc.nodesBetween(r,n,function(e){o.push(e)});n=o.reverse().find(function(e){return e.type.name===t.name});return n?p({},n.attrs):{}}(e):"mark"===t?Ls(e,i):{}}var Qs=function(){m(r,Qa);var n=b(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return d(this,r),(e=n.call(this)).isFocused=!1,e.extensionStorage={},e.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null}},e.isCapturingTransaction=!1,e.capturedTransaction=null,e.setOptions(t),e.createExtensionManager(),e.createCommandManager(),e.createSchema(),e.on("beforeCreate",e.options.onBeforeCreate),e.emit("beforeCreate",{editor:c(e)}),e.createView(),e.injectCSS(),e.on("create",e.options.onCreate),e.on("update",e.options.onUpdate),e.on("selectionUpdate",e.options.onSelectionUpdate),e.on("transaction",e.options.onTransaction),e.on("focus",e.options.onFocus),e.on("blur",e.options.onBlur),e.on("destroy",e.options.onDestroy),window.setTimeout(function(){e.isDestroyed||(e.commands.focus(e.options.autofocus),e.emit("create",{editor:c(e)}))},0),e}return h(r,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(e){var t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.setAttribute("data-tiptap-style",""),t.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(t),t}(this.options.injectNonce))}},{key:"setOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=p(p({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(e){this.setOptions({editable:e})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(e,t){e=is(t)?t(e,M(this.state.plugins)):[].concat(M(this.state.plugins),[e]),e=this.state.reconfigure({plugins:e});this.view.updateState(e)}},{key:"unregisterPlugin",value:function(e){var t;this.isDestroyed||(t="string"==typeof e?"".concat(e,"$"):e.key,e=this.state.reconfigure({plugins:this.state.plugins.filter(function(e){return!e.key.startsWith(t)})}),this.view.updateState(e))}},{key:"createExtensionManager",value:function(){var e=this.options.enableCoreExtensions?Object.values(Js):[],e=[].concat(M(e),M(this.options.extensions)).filter(function(e){return["extension","node","mark"].includes(null==e?void 0:e.type)});this.extensionManager=new ms(e,this)}},{key:"createCommandManager",value:function(){this.commandManager=new Ka({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var e=Is(this.options.content,this.schema,this.options.parseOptions),t=js(e,this.options.autofocus);this.view=new Ai(this.options.element,p(p({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:An.create({doc:e,selection:t||void 0})}));t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"captureTransaction",value:function(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;e=this.capturedTransaction;return this.capturedTransaction=null,e}},{key:"dispatchTransaction",value:function(e){var n=this;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(function(e){var t;return null===(t=n.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);var t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});t=e.getMeta("focus"),r=e.getMeta("blur");t&&this.emit("focus",{editor:this,event:t.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}},{key:"getAttributes",value:function(e){return Ks(this.state,e)}},{key:"isActive",value:function(e,t){var n="string"==typeof e?e:null,e="string"==typeof e?t:e;return function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};if(!t)return Ps(e,null,r)||Ws(e,null,r);n=Rs(t,e.schema);return"node"===n?Ps(e,t,r):"mark"===n&&Ws(e,t,r)}(this.state,n,e)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return e=this.state.doc.content,t=this.schema,t=gt.fromSchema(t).serializeFragment(e),(e=document.implementation.createHTMLDocument().createElement("div")).appendChild(t),e.innerHTML;var e,t}},{key:"getText",value:function(e){var t=e||{},n=t.blockSeparator,e=void 0===n?"\n\n":n,n=t.textSerializers,t=void 0===n?{}:n;return n=this.state.doc,t={blockSeparator:e,textSerializers:p(p({},t),ws(this.schema))},ks(n,{from:0,to:n.content.size},t)}},{key:"isEmpty",get:function(){return e=this.state.doc,t=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),e=e.toJSON(),JSON.stringify(t)===JSON.stringify(e);var e,t}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}},{key:"isDestroyed",get:function(){var e;return!(null!==(e=this.view)&&void 0!==e&&e.docView)}}]),r}();function Gs(n,e,r){var o=[];return n===e?r.resolve(n).marks().forEach(function(e){var t=Cs(r.resolve(n-1),e.type);t&&o.push(p({mark:e},t))}):r.nodesBetween(n,e,function(t,n){o.push.apply(o,M(t.marks.map(function(e){return{from:n,to:n+t.nodeSize,mark:e}})))}),o}function Ys(e,t,n){var r=e.state.doc.content.size,o=As(t,0,r),t=As(n,0,r),n=e.coordsAtPos(o),r=e.coordsAtPos(t,-1),o=Math.min(n.top,r.top),e=Math.max(n.bottom,r.bottom),t=Math.min(n.left,r.left),r=Math.max(n.right,r.right),i={top:o,bottom:e,left:t,right:r,width:r-t,height:e-o,x:t,y:o};return p(p({},i),{},{toJSON:function(){return i}})}function Xs(i){return new ds({find:i.find,handler:function(e){var t=e.state,n=e.range,r=e.match,o=as(i.getAttributes,void 0,r)||{},e=t.tr.delete(n.from,n.to),t=e.doc.resolve(n.from).blockRange(),o=t&&function(e,t,n,r){var o,i,a=2<arguments.length&&void 0!==n?n:null,s=3<arguments.length&&void 0!==r?r:e,o=(i=t,n=(o=e).parent,r=o.startIndex,e=o.endIndex,(o=n.contentMatchAt(r).findWrapping(i))?(i=o.length?o[0]:i,n.canReplaceWith(r,e,i)?o:null):null),s=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,e=n.child(r);if(!(e=t.contentMatch.findWrapping(e.type)))return null;for(var i=(e.length?e[e.length-1]:t).contentMatch,a=r;i&&a<o;a++)i=i.matchType(n.child(a).type);return i&&i.validEnd?e:null}(s,t);return s?o.map(la).concat({type:t,attrs:a}).concat(s.map(la)):null}(t,i.type,o);if(!o)return null;e.wrap(t,o);o=e.doc.resolve(n.from-1).nodeBefore;o&&o.type===i.type&&fa(e.doc,n.from-1)&&(!i.joinPredicate||i.joinPredicate(r,o))&&e.join(n.from-1)}})}h(eu,[{key:"configure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=ys(this.options,e),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new eu(e);return((t.parent=this).child=t).name=e.name||t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=as(Xa(t,"addOptions",{name:t.name})),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}}],[{key:"create",value:function(){return new eu(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}]),Ln=eu,h(Zs,[{key:"configure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=ys(this.options,e),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}},{key:"extend",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new Zs(e);return((t.parent=this).child=t).name=e.name||t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=as(Xa(t,"addOptions",{name:t.name})),t.storage=as(Xa(t,"addStorage",{name:t.name,options:t.options})),t}}],[{key:"create",value:function(){return new Zs(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}]),Rn=Zs;function Zs(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,Zs),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=p(p({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=as(Xa(this,"addOptions",{name:this.name}))),this.storage=as(Xa(this,"addStorage",{name:this.name,options:this.options}))||{}}function eu(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,eu),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=p(p({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=as(Xa(this,"addOptions",{name:this.name}))),this.storage=as(Xa(this,"addStorage",{name:this.name,options:this.options}))||{}}function tu(e){if(null==e)return window;if("[object Window]"===e.toString())return e;e=e.ownerDocument;return e&&e.defaultView||window}function nu(e){return e instanceof tu(e).Element||e instanceof Element}function ru(e){return e instanceof tu(e).HTMLElement||e instanceof HTMLElement}function ou(e){return"undefined"!=typeof ShadowRoot&&(e instanceof tu(e).ShadowRoot||e instanceof ShadowRoot)}var iu=Math.max,au=Math.min,su=Math.round;function uu(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function lu(){return!/^((?!chrome|android).)*safari/i.test(uu())}function cu(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&ru(e)&&(o=0<e.offsetWidth&&su(r.width)/e.offsetWidth||1,i=0<e.offsetHeight&&su(r.height)/e.offsetHeight||1);t=(nu(e)?tu(e):window).visualViewport,e=!lu()&&n,n=(r.left+(e&&t?t.offsetLeft:0))/o,t=(r.top+(e&&t?t.offsetTop:0))/i,o=r.width/o,i=r.height/i;return{width:o,height:i,top:t,right:n+o,bottom:t+i,left:n,x:n,y:t}}function fu(e){e=tu(e);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function du(e){return e?(e.nodeName||"").toLowerCase():null}function pu(e){return((nu(e)?e.ownerDocument:e.document)||window.document).documentElement}function hu(e){return cu(pu(e)).left+fu(e).scrollLeft}function mu(e){return tu(e).getComputedStyle(e)}function vu(e){var t=mu(e),n=t.overflow,e=t.overflowX,t=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+t+e)}function gu(e){var t=cu(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function yu(e){return"html"===du(e)?e:e.assignedSlot||e.parentNode||(ou(e)?e.host:null)||pu(e)}function bu(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(du(t))?t.ownerDocument.body:ru(t)&&vu(t)?t:e(yu(t))}(e),e=n===(null==(r=e.ownerDocument)?void 0:r.body),r=tu(n),n=e?[r].concat(r.visualViewport||[],vu(n)?n:[]):n,t=t.concat(n);return e?t:t.concat(bu(yu(n)))}function ku(e){return ru(e)&&"fixed"!==mu(e).position?e.offsetParent:null}function wu(e){for(var t=tu(e),n=ku(e);n&&0<=["table","td","th"].indexOf(du(n))&&"static"===mu(n).position;)n=ku(n);return(!n||"html"!==du(n)&&("body"!==du(n)||"static"!==mu(n).position))&&(n||function(e){var t=/firefox/i.test(uu());if(/Trident/i.test(uu())&&ru(e)&&"fixed"===mu(e).position)return null;var n=yu(e);for(ou(n)&&(n=n.host);ru(n)&&["html","body"].indexOf(du(n))<0;){var r=mu(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e))||t}var xu="top",Du="bottom",Cu="right",Eu="left",Ou="auto",Su=[xu,Du,Cu,Eu],Au="start",ju="end",Mu="viewport",Nu="popper",Tu=Su.reduce(function(e,t){return e.concat([t+"-"+Au,t+"-"+ju])},[]),Fu=[].concat(Su,[Ou]).reduce(function(e,t){return e.concat([t,t+"-"+Au,t+"-"+ju])},[]),Pu=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ru(e){var n=new Map,r=new Set,o=[];return e.forEach(function(e){n.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||function t(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){r.has(e)||(e=n.get(e))&&t(e)}),o.push(e)}(e)}),o}var Bu={placement:"bottom",modifiers:[],strategy:"absolute"};function Iu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Lu={passive:!0};function zu(e){return e.split("-")[0]}function _u(e){return e.split("-")[1]}function Vu(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function $u(e){var t,n=e.reference,r=e.element,o=e.placement,e=o?zu(o):null,o=o?_u(o):null,i=n.x+n.width/2-r.width/2,a=n.y+n.height/2-r.height/2;switch(e){case xu:t={x:i,y:n.y-r.height};break;case Du:t={x:i,y:n.y+n.height};break;case Cu:t={x:n.x+n.width,y:a};break;case Eu:t={x:n.x-r.width,y:a};break;default:t={x:n.x,y:n.y}}var s=e?Vu(e):null;if(null!=s){var u="y"===s?"height":"width";switch(o){case Au:t[s]=t[s]-(n[u]/2-r[u]/2);break;case ju:t[s]=t[s]+(n[u]/2-r[u]/2)}}return t}var Hu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Uu(e){var t=e.popper,n=e.popperRect,r=e.placement,o=e.variation,i=e.offsets,a=e.position,s=e.gpuAcceleration,u=e.adaptive,l=e.roundOffsets,c=e.isFixed,f=i.x,d=void 0===f?0:f,p=i.y,h=void 0===p?0:p,m="function"==typeof l?l({x:d,y:h}):{x:d,y:h},d=m.x,h=m.y,v=i.hasOwnProperty("x"),g=i.hasOwnProperty("y"),y=Eu,e=xu,f=window;u&&(p="clientHeight",m="clientWidth",(i=wu(t))===tu(t)&&"static"!==mu(i=pu(t)).position&&"absolute"===a&&(p="scrollHeight",m="scrollWidth"),r!==xu&&(r!==Eu&&r!==Cu||o!==ju)||(e=Du,h-=(c&&i===f&&f.visualViewport?f.visualViewport.height:i[p])-n.height,h*=s?1:-1),r!==Eu&&(r!==xu&&r!==Du||o!==ju)||(y=Cu,d-=(c&&i===f&&f.visualViewport?f.visualViewport.width:i[m])-n.width,d*=s?1:-1));var b,a=Object.assign({position:a},u&&Hu),b=!0===l?(u=(b={x:d,y:h}).x,l=b.y,b=window.devicePixelRatio||1,{x:su(u*b)/b||0,y:su(l*b)/b||0}):{x:d,y:h};return d=b.x,h=b.y,s?Object.assign({},a,((s={})[e]=g?"0":"",s[y]=v?"0":"",s.transform=(f.devicePixelRatio||1)<=1?"translate("+d+"px, "+h+"px)":"translate3d("+d+"px, "+h+"px, 0)",s)):Object.assign({},a,((a={})[e]=g?h+"px":"",a[y]=v?d+"px":"",a.transform="",a))}var In={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var o=e.state;Object.keys(o.elements).forEach(function(e){var t=o.styles[e]||{},n=o.attributes[e]||{},r=o.elements[e];ru(r)&&du(r)&&(Object.assign(r.style,t),Object.keys(n).forEach(function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var r=e.state,o={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,o.popper),r.styles=o,r.elements.arrow&&Object.assign(r.elements.arrow.style,o.arrow),function(){Object.keys(r.elements).forEach(function(e){var t=r.elements[e],n=r.attributes[e]||{},e=Object.keys((r.styles.hasOwnProperty(e)?r.styles:o)[e]).reduce(function(e,t){return e[t]="",e},{});ru(t)&&du(t)&&(Object.assign(t.style,e),Object.keys(n).forEach(function(e){t.removeAttribute(e)}))})}},requires:["computeStyles"]},Wu={left:"right",right:"left",bottom:"top",top:"bottom"};function qu(e){return e.replace(/left|right|bottom|top/g,function(e){return Wu[e]})}var Ju={start:"end",end:"start"};function Ku(e){return e.replace(/start|end/g,function(e){return Ju[e]})}function Qu(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ou(n)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function Gu(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Yu(e,t,n){return t===Mu?Gu((a=n,s=tu(i=e),u=pu(i),l=s.visualViewport,c=u.clientWidth,f=u.clientHeight,s=d=0,l&&(c=l.width,f=l.height,((u=lu())||!u&&"fixed"===a)&&(d=l.offsetLeft,s=l.offsetTop)),{width:c,height:f,x:d+hu(i),y:s})):nu(t)?((o=cu(r=t,!1,"fixed"===n)).top=o.top+r.clientTop,o.left=o.left+r.clientLeft,o.bottom=o.top+r.clientHeight,o.right=o.left+r.clientWidth,o.width=r.clientWidth,o.height=r.clientHeight,o.x=o.left,o.y=o.top,o):Gu((s=pu(e),t=pu(s),n=fu(s),o=null==(r=s.ownerDocument)?void 0:r.body,e=iu(t.scrollWidth,t.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=iu(t.scrollHeight,t.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-n.scrollLeft+hu(s),n=-n.scrollTop,"rtl"===mu(o||t).direction&&(s+=iu(t.clientWidth,o?o.clientWidth:0)-e),{width:e,height:r,x:s,y:n}));var r,o,i,a,s,u,l,c,f,d}function Xu(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Zu(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function el(e,t){void 0===t&&(t={});var n,r,o,i,a,s=t.placement,u=void 0===s?e.placement:s,l=t.strategy,c=void 0===l?e.strategy:l,f=t.boundary,d=void 0===f?"clippingParents":f,p=t.rootBoundary,h=void 0===p?Mu:p,s=t.elementContext,l=void 0===s?Nu:s,f=t.altBoundary,p=void 0!==f&&f,s=t.padding,f=void 0===s?0:s,t=Xu("number"!=typeof f?f:Zu(f,Su)),s=l===Nu?"reference":Nu,f=e.rects.popper,s=e.elements[p?s:l],o=(n=nu(s)?s:s.contextElement||pu(e.elements.popper),h=h,r=c,c="clippingParents"===(c=d)?(o=bu(yu(d=n)),nu(i=0<=["absolute","fixed"].indexOf(mu(d).position)&&ru(d)?wu(d):d)?o.filter(function(e){return nu(e)&&Qu(e,i)&&"body"!==du(e)}):[]):[].concat(c),h=(c=[].concat(c,[h]))[0],(h=c.reduce(function(e,t){t=Yu(n,t,r);return e.top=iu(t.top,e.top),e.right=au(t.right,e.right),e.bottom=au(t.bottom,e.bottom),e.left=iu(t.left,e.left),e},Yu(n,h,r))).width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h),c=cu(e.elements.reference),h=$u({reference:c,element:f,strategy:"absolute",placement:u}),h=Gu(Object.assign({},f,h)),c=l===Nu?h:c,m={top:o.top-c.top+t.top,bottom:c.bottom-o.bottom+t.bottom,left:o.left-c.left+t.left,right:c.right-o.right+t.right},e=e.modifiersData.offset;return l===Nu&&e&&(a=e[u],Object.keys(m).forEach(function(e){var t=0<=[Cu,Du].indexOf(e)?1:-1,n=0<=[xu,Du].indexOf(e)?"y":"x";m[e]+=a[n]*t})),m}function tl(e,t,n){return iu(e,au(t,n))}function nl(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function rl(t){return[xu,Cu,Du,Eu].some(function(e){return 0<=t[e]})}var ol=function(e){void 0===e&&(e={});var t=e.defaultModifiers,f=void 0===t?[]:t,d=void 0===(e=e.defaultOptions)?Bu:e;return function(t,r,n){void 0===n&&(n=d);var o,i,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bu,d),modifiersData:{},elements:{reference:t,popper:r},attributes:{},styles:{}},s=[],u=!1,l={state:a,setOptions:function(e){e="function"==typeof e?e(a.options):e;c(),a.options=Object.assign({},d,a.options,e),a.scrollParents={reference:nu(t)?bu(t):t.contextElement?bu(t.contextElement):[],popper:bu(r)};var n,e=(n=Ru(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(f,a.options.modifiers))),Pu.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[]));return a.orderedModifiers=e.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,n=void 0===n?{}:n,e=e.effect;"function"==typeof e&&(n=e({state:a,name:t,instance:l,options:n}),s.push(n||function(){}))}),l.update()},forceUpdate:function(){if(!u){var e=a.elements,t=e.reference,e=e.popper;if(Iu(t,e)){a.rects={reference:function(e,t,n){void 0===n&&(n=!1);var r=ru(t),o=ru(t)&&(o=(a=t).getBoundingClientRect(),i=su(o.width)/a.offsetWidth||1,a=su(o.height)/a.offsetHeight||1,1!==i||1!==a),i=pu(t),a=cu(e,o,n),e={scrollLeft:0,scrollTop:0},o={x:0,y:0};return!r&&(r||n)||("body"===du(t)&&!vu(i)||(e=(n=t)!==tu(n)&&ru(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:fu(n)),ru(t)?((o=cu(t,!0)).x+=t.clientLeft,o.y+=t.clientTop):i&&(o.x=hu(i))),{x:a.left+e.scrollLeft-o.x,y:a.top+e.scrollTop-o.y,width:a.width,height:a.height}}(t,wu(e),"fixed"===a.options.strategy),popper:gu(e)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var n,r,o,i=0;i<a.orderedModifiers.length;i++)!0!==a.reset?(n=(o=a.orderedModifiers[i]).fn,r=void 0===(r=o.options)?{}:r,o=o.name,"function"==typeof n&&(a=n({state:a,options:r,name:o,instance:l})||a)):(a.reset=!1,i=-1)}}},update:(o=function(){return new Promise(function(e){l.forceUpdate(),e(a)})},function(){return i=i||new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(o())})})}),destroy:function(){c(),u=!0}};return Iu(t,r)&&l.setOptions(n).then(function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l;function c(){s.forEach(function(e){return e()}),s=[]}}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,e=r.scroll,o=void 0===e||e,r=r.resize,i=void 0===r||r,a=tu(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&s.forEach(function(e){e.addEventListener("scroll",n.update,Lu)}),i&&a.addEventListener("resize",n.update,Lu),function(){o&&s.forEach(function(e){e.removeEventListener("scroll",n.update,Lu)}),i&&a.removeEventListener("resize",n.update,Lu)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,e=e.name;t.modifiersData[e]=$u({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,e=void 0===r||r,r=n.adaptive,r=void 0===r||r,n=n.roundOffsets,n=void 0===n||n,e={placement:zu(t.placement),variation:_u(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Uu(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:n})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Uu(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},In,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var a=e.state,t=e.options,n=e.name,r=t.offset,s=void 0===r?[0,0]:r,e=Fu.reduce(function(e,t){return e[t]=(n=t,r=a.rects,o=s,i=zu(n),t=0<=[Eu,xu].indexOf(i)?-1:1,o=(o=(n="function"==typeof o?o(Object.assign({},r,{placement:n})):o)[0])||0,n=((n=n[1])||0)*t,0<=[Eu,Cu].indexOf(i)?{x:n,y:o}:{x:o,y:n}),e;var n,r,o,i},{}),t=e[a.placement],r=t.x,t=t.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=r,a.modifiersData.popperOffsets.y+=t),a.modifiersData[n]=e}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var o=t.mainAxis,i=void 0===o||o,e=t.altAxis,a=void 0===e||e,o=t.fallbackPlacements,s=t.padding,u=t.boundary,l=t.rootBoundary,c=t.altBoundary,e=t.flipVariations,f=void 0===e||e,d=t.allowedAutoPlacements,e=n.options.placement,t=zu(e),t=o||(t!==e&&f?function(e){if(zu(e)===Ou)return[];var t=qu(e);return[Ku(e),t,Ku(t)]}(e):[qu(e)]),p=[e].concat(t).reduce(function(e,t){return e.concat(zu(t)===Ou?function(n,e){void 0===e&&(e={});var t=e.placement,r=e.boundary,o=e.rootBoundary,i=e.padding,a=e.flipVariations,e=e.allowedAutoPlacements,s=void 0===e?Fu:e,u=_u(t),t=u?a?Tu:Tu.filter(function(e){return _u(e)===u}):Su,a=t.filter(function(e){return 0<=s.indexOf(e)});0===a.length&&(a=t);var l=a.reduce(function(e,t){return e[t]=el(n,{placement:t,boundary:r,rootBoundary:o,padding:i})[zu(t)],e},{});return Object.keys(l).sort(function(e,t){return l[e]-l[t]})}(n,{placement:t,boundary:u,rootBoundary:l,padding:s,flipVariations:f,allowedAutoPlacements:d}):t)},[]),h=n.rects.reference,m=n.rects.popper,v=new Map,g=!0,y=p[0],b=0;b<p.length;b++){var k=p[b],w=zu(k),x=_u(k)===Au,D=0<=[xu,Du].indexOf(w),C=D?"width":"height",E=el(n,{placement:k,boundary:u,rootBoundary:l,altBoundary:c,padding:s}),D=D?x?Cu:Eu:x?Du:xu;h[C]>m[C]&&(D=qu(D));x=qu(D),C=[];if(i&&C.push(E[w]<=0),a&&C.push(E[D]<=0,E[x]<=0),C.every(function(e){return e})){y=k,g=!1;break}v.set(k,C)}if(g)for(var O=f?3:1;0<O&&"break"!==function(t){var e=p.find(function(e){e=v.get(e);if(e)return e.slice(0,t).every(function(e){return e})});if(e)return y=e,"break"}(O);O--);n.placement!==y&&(n.modifiersData[r]._skip=!0,n.placement=y,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,o=e.options,i=e.name,a=o.mainAxis,s=void 0===a||a,u=o.altAxis,l=void 0!==u&&u,c=o.boundary,f=o.rootBoundary,d=o.altBoundary,p=o.padding,h=o.tether,m=void 0===h||h,v=o.tetherOffset,g=void 0===v?0:v,y=el(r,{boundary:c,rootBoundary:f,padding:p,altBoundary:d}),b=zu(r.placement),k=_u(r.placement),w=!k,x=Vu(b),D="x"===x?"y":"x",C=r.modifiersData.popperOffsets,E=r.rects.reference,e=r.rects.popper,a="function"==typeof g?g(Object.assign({},r.rects,{placement:r.placement})):g,u="number"==typeof a?{mainAxis:a,altAxis:a}:Object.assign({mainAxis:0,altAxis:0},a),h=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,o={x:0,y:0};C&&(s&&(v="y"===x?xu:Eu,c="y"===x?Du:Cu,f="y"===x?"height":"width",p=(n=C[x])+y[v],t=n-y[c],d=m?-e[f]/2:0,g=(k===Au?E:e)[f],a=k===Au?-e[f]:-E[f],s=r.elements.arrow,k=m&&s?gu(s):{width:0,height:0},v=(s=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0})[v],c=s[c],k=tl(0,E[f],k[f]),v=w?E[f]/2-d-k-v-u.mainAxis:g-k-v-u.mainAxis,a=w?-E[f]/2+d+k+c+u.mainAxis:a+k+c+u.mainAxis,c=(k=r.elements.arrow&&wu(r.elements.arrow))?"y"===x?k.clientTop||0:k.clientLeft||0:0,k=n+a-(a=null!=(k=null==h?void 0:h[x])?k:0),t=tl(m?au(p,n+v-a-c):p,n,m?iu(t,k):t),C[x]=t,o[x]=t-n),l&&(t="x"===x?xu:Eu,n="x"===x?Du:Cu,l="y"==D?"height":"width",t=(x=C[D])+y[t],y=x-y[n],n=-1!==[xu,Eu].indexOf(b),h=null!=(b=null==h?void 0:h[D])?b:0,b=n?t:x-E[l]-e[l]-h+u.altAxis,h=n?x+E[l]+e[l]-h-u.altAxis:y,y=m&&n?(n=tl(b,x,u=h),u<n?u:n):tl(m?b:t,x,m?h:y),C[D]=y,o[D]=y-x),r.modifiersData[i]=o)},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,o=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,u=zu(r.placement),l=Vu(u),c=0<=[Eu,Cu].indexOf(u)?"height":"width";a&&s&&(t=Xu("number"!=typeof(n="function"==typeof(n=i.padding)?n(Object.assign({},r.rects,{placement:r.placement})):n)?n:Zu(n,Su)),e=gu(a),u="y"===l?xu:Eu,i="y"===l?Du:Cu,n=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],s=s[l]-r.rects.reference[l],a=(a=wu(a))?"y"===l?a.clientHeight||0:a.clientWidth||0:0,s=n/2-s/2,u=t[u],i=a-e[c]-t[i],i=tl(u,s=a/2-e[c]/2+s,i),r.modifiersData[o]=((o={})[l]=i,o.centerOffset=i-s,o))},effect:function(e){var t=e.state,e=e.options.element,e=void 0===e?"[data-popper-arrow]":e;null!=e&&("string"!=typeof e||(e=t.elements.popper.querySelector(e)))&&Qu(t.elements.popper,e)&&(t.elements.arrow=e)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=el(t,{elementContext:"reference"}),e=el(t,{altBoundary:!0}),r=nl(a,r),e=nl(e,o,i),o=rl(r),i=rl(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:o,hasPopperEscaped:i},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":o,"data-popper-escaped":i})}}]}),il="tippy-content",al="tippy-backdrop",sl="tippy-arrow",ul="tippy-svg-arrow",ll={passive:!0,capture:!0},cl=function(){return document.body};function fl(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function dl(e,t){e={}.toString.call(e);return 0===e.indexOf("[object")&&-1<e.indexOf(t+"]")}function pl(e,t){return"function"==typeof e?e.apply(void 0,t):e}function hl(t,n){return 0===n?t:function(e){clearTimeout(r),r=setTimeout(function(){t(e)},n)};var r}function ml(e){return[].concat(e)}function vl(e,t){-1===e.indexOf(t)&&e.push(t)}function gl(e){return[].slice.call(e)}function yl(n){return Object.keys(n).reduce(function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e},{})}function bl(){return document.createElement("div")}function kl(t){return["Element","Fragment"].some(function(e){return dl(t,e)})}function wl(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function xl(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function Dl(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(e){t[r](e,n)})}function Cl(e,t){for(var n,r=t;r;){if(e.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var El={isTouch:!1},Ol=0;function Sl(){El.isTouch||(El.isTouch=!0,window.performance&&document.addEventListener("mousemove",Al))}function Al(){var e=performance.now();e-Ol<20&&(El.isTouch=!1,document.removeEventListener("mousemove",Al)),Ol=e}function jl(){var e,t=document.activeElement;(e=t)&&e._tippy&&e._tippy.reference===e&&(e=t._tippy,t.blur&&!e.state.isVisible&&t.blur())}var Ml=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Nl=Object.assign({appendTo:cl,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Tl=Object.keys(Nl);function Fl(r){var e=(r.plugins||[]).reduce(function(e,t){var n=t.name,t=t.defaultValue;return n&&(e[n]=void 0!==r[n]?r[n]:null!=(n=Nl[n])?n:t),e},{});return Object.assign({},r,e)}function Pl(e,t){var o,n,n=Object.assign({},t,{content:pl(t.content,[e])},t.ignoreAttributes?{}:(o=e,((n=t.plugins)?Object.keys(Fl(Object.assign({},Nl,{plugins:n}))):Tl).reduce(function(t,n){var r=(o.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})));return n.aria=Object.assign({},Nl.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function Rl(e,t){e.innerHTML=t}function Bl(e){var t=bl();return!0===e?t.className=sl:(t.className=ul,kl(e)?t.appendChild(e):Rl(t,e)),t}function Il(e,t){kl(t.content)?(Rl(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Rl(e,t.content):e.textContent=t.content)}function Ll(e){var t=e.firstElementChild,e=gl(t.children);return{box:t,content:e.find(function(e){return e.classList.contains(il)}),arrow:e.find(function(e){return e.classList.contains(sl)||e.classList.contains(ul)}),backdrop:e.find(function(e){return e.classList.contains(al)})}}function zl(i){var a=bl(),e=bl();e.className="tippy-box",e.setAttribute("data-state","hidden"),e.setAttribute("tabindex","-1");var t=bl();function n(e,t){var n=Ll(a),r=n.box,o=n.content,n=n.arrow;t.theme?r.setAttribute("data-theme",t.theme):r.removeAttribute("data-theme"),"string"==typeof t.animation?r.setAttribute("data-animation",t.animation):r.removeAttribute("data-animation"),t.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof t.maxWidth?t.maxWidth+"px":t.maxWidth,t.role?r.setAttribute("role",t.role):r.removeAttribute("role"),e.content===t.content&&e.allowHTML===t.allowHTML||Il(o,i.props),t.arrow?n?e.arrow!==t.arrow&&(r.removeChild(n),r.appendChild(Bl(t.arrow))):r.appendChild(Bl(t.arrow)):n&&r.removeChild(n)}return t.className=il,t.setAttribute("data-state","hidden"),Il(t,i.props),a.appendChild(e),e.appendChild(t),n(i.props,i.props),{popper:a,onUpdate:n}}zl.$$tippy=!0;var _l=1,Vl=[],$l=[];function Hl(a,e){var r,t,n,o,i,s,u,l,c=Pl(a,Object.assign({},Nl,Fl(yl(e)))),f=!1,d=!1,p=!1,h=!1,m=[],v=hl(W,c.interactiveDebounce),g=_l++,e=(l=c.plugins).filter(function(e,t){return l.indexOf(e)===t}),y={id:g,reference:a,popper:bl(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:e,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(t),cancelAnimationFrame(n)},setProps:function(e){var t,n;y.state.isDestroyed||(N("onBeforeUpdate",[y,e]),H(),t=y.props,n=Pl(a,Object.assign({},t,yl(e),{ignoreAttributes:!0})),y.props=n,$(),t.interactiveDebounce!==n.interactiveDebounce&&(P(),v=hl(W,n.interactiveDebounce)),t.triggerTarget&&!n.triggerTarget?ml(t.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):n.triggerTarget&&a.removeAttribute("aria-expanded"),F(),M(),k&&k(t,n),y.popperInstance&&(Q(),Y().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),N("onAfterUpdate",[y,e]))},setContent:function(e){y.setProps({content:e})},show:function(){var e,t=y.state.isVisible,n=y.state.isDestroyed,r=!y.state.isEnabled,o=El.isTouch&&!y.props.touch,i=fl(y.props.duration,0,Nl.duration);t||n||r||o||O().hasAttribute("disabled")||(N("onShow",[y],!1),!1!==y.props.onShow(y)&&(y.state.isVisible=!0,E()&&(b.style.visibility="visible"),M(),L(),y.state.isMounted||(b.style.transition="none"),E()&&wl([(e=A()).box,e.content],0),s=function(){var e,t;y.state.isVisible&&!h&&(h=!0,b.offsetHeight,b.style.transition=y.props.moveTransition,E()&&y.props.animation&&(wl([e=(t=A()).box,t=t.content],i),xl([e,t],"visible")),T(),F(),vl($l,y),null==(t=y.popperInstance)||t.forceUpdate(),N("onMount",[y]),y.props.animation&&E()&&_(i,function(){y.state.isShown=!0,N("onShown",[y])}))},o=y.props.appendTo,e=O(),(e=y.props.interactive&&o===cl||"parent"===o?e.parentNode:pl(o,[e])).contains(b)||e.appendChild(b),y.state.isMounted=!0,Q()))},hide:function(){var e,t=!y.state.isVisible,n=y.state.isDestroyed,r=!y.state.isEnabled,o=fl(y.props.duration,1,Nl.duration);t||n||r||(N("onHide",[y],!1),!1!==y.props.onHide(y)&&(y.state.isVisible=!1,y.state.isShown=!1,f=h=!1,E()&&(b.style.visibility="hidden"),P(),z(),M(!0),E()&&(r=(n=A()).box,n=n.content,y.props.animation&&(wl([r,n],o),xl([r,n],"hidden"))),T(),F(),y.props.animation?E()&&(e=y.unmount,_(o,function(){!y.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&e()})):y.unmount()))},hideWithInteractivity:function(e){S().addEventListener("mousemove",v),vl(Vl,v),v(e)},enable:function(){y.state.isEnabled=!0},disable:function(){y.hide(),y.state.isEnabled=!1},unmount:function(){y.state.isVisible&&y.hide(),y.state.isMounted&&(G(),Y().forEach(function(e){e._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),$l=$l.filter(function(e){return e!==y}),y.state.isMounted=!1,N("onHidden",[y]))},destroy:function(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),H(),delete a._tippy,y.state.isDestroyed=!0,N("onDestroy",[y]))}};if(!c.render)return y;var g=c.render(y),b=g.popper,k=g.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+y.id,y.popper=b,a._tippy=y,b._tippy=y;var w=e.map(function(e){return e.fn(y)}),x=a.hasAttribute("aria-expanded");return $(),F(),M(),N("onCreate",[y]),c.showOnCreate&&X(),b.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){y.props.interactive&&0<=y.props.trigger.indexOf("mouseenter")&&S().addEventListener("mousemove",v)}),y;function D(){var e=y.props.touch;return Array.isArray(e)?e:[e,0]}function C(){return"hold"===D()[0]}function E(){var e;return null!=(e=y.props.render)&&e.$$tippy}function O(){return u||a}function S(){var e,t=O().parentNode;return t?null!=(t=ml(t=t)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function A(){return Ll(b)}function j(e){return y.state.isMounted&&!y.state.isVisible||El.isTouch||o&&"focus"===o.type?0:fl(y.props.delay,e?0:1,Nl.delay)}function M(e){void 0===e&&(e=!1),b.style.pointerEvents=y.props.interactive&&!e?"":"none",b.style.zIndex=""+y.props.zIndex}function N(t,n,e){void 0===e&&(e=!0),w.forEach(function(e){e[t]&&e[t].apply(e,n)}),e&&(e=y.props)[t].apply(e,n)}function T(){var n,r,e=y.props.aria;e.content&&(n="aria-"+e.content,r=b.id,ml(y.props.triggerTarget||a).forEach(function(e){var t=e.getAttribute(n);y.state.isVisible?e.setAttribute(n,t?t+" "+r:r):(t=t&&t.replace(r,"").trim())?e.setAttribute(n,t):e.removeAttribute(n)}))}function F(){!x&&y.props.aria.expanded&&ml(y.props.triggerTarget||a).forEach(function(e){y.props.interactive?e.setAttribute("aria-expanded",y.state.isVisible&&e===O()?"true":"false"):e.removeAttribute("aria-expanded")})}function P(){S().removeEventListener("mousemove",v),Vl=Vl.filter(function(e){return e!==v})}function R(e){if(!El.isTouch||!p&&"mousedown"!==e.type){var t=e.composedPath&&e.composedPath()[0]||e.target;if(!y.props.interactive||!Cl(b,t)){if(ml(y.props.triggerTarget||a).some(function(e){return Cl(e,t)})){if(El.isTouch)return;if(y.state.isVisible&&0<=y.props.trigger.indexOf("click"))return}else N("onClickOutside",[y,e]);!0===y.props.hideOnClick&&(y.clearDelayTimeouts(),y.hide(),d=!0,setTimeout(function(){d=!1}),y.state.isMounted||z())}}}function B(){p=!0}function I(){p=!1}function L(){var e=S();e.addEventListener("mousedown",R,!0),e.addEventListener("touchend",R,ll),e.addEventListener("touchstart",I,ll),e.addEventListener("touchmove",B,ll)}function z(){var e=S();e.removeEventListener("mousedown",R,!0),e.removeEventListener("touchend",R,ll),e.removeEventListener("touchstart",I,ll),e.removeEventListener("touchmove",B,ll)}function _(e,t){var n=A().box;function r(e){e.target===n&&(Dl(n,"remove",r),t())}if(0===e)return t();Dl(n,"remove",i),Dl(n,"add",r),i=r}function V(t,n,r){void 0===r&&(r=!1),ml(y.props.triggerTarget||a).forEach(function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})})}function $(){C()&&(V("touchstart",U,{passive:!0}),V("touchend",q,{passive:!0})),y.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(V(e,U),e){case"mouseenter":V("mouseleave",q);break;case"focus":V(Ml?"focusout":"blur",J);break;case"focusin":V("focusout",J)}})}function H(){m.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,e=e.options;t.removeEventListener(n,r,e)}),m=[]}function U(t){var e,n=!1;!y.state.isEnabled||K(t)||d||(e="focus"===(null==o?void 0:o.type),u=(o=t).currentTarget,F(),!y.state.isVisible&&dl(t,"MouseEvent")&&Vl.forEach(function(e){return e(t)}),"click"===t.type&&(y.props.trigger.indexOf("mouseenter")<0||f)&&!1!==y.props.hideOnClick&&y.state.isVisible?n=!0:X(t),"click"===t.type&&(f=!n),n&&!e&&Z(t))}function W(e){var s,u,t=e.target,t=O().contains(t)||b.contains(t);"mousemove"===e.type&&t||(t=Y().concat(b).map(function(e){var t=null==(t=e._tippy.popperInstance)?void 0:t.state;return t?{popperRect:e.getBoundingClientRect(),popperState:t,props:c}:null}).filter(Boolean),s=e.clientX,u=e.clientY,t.every(function(e){var t=e.popperRect,n=e.popperState,r=e.props.interactiveBorder,o=n.placement.split("-")[0],i=n.modifiersData.offset;if(!i)return!0;var a="bottom"===o?i.top.y:0,e="top"===o?i.bottom.y:0,n="right"===o?i.left.x:0,i="left"===o?i.right.x:0,a=t.top-u+a>r,e=u-t.bottom-e>r,n=t.left-s+n>r,r=s-t.right-i>r;return a||e||n||r})&&(P(),Z(e)))}function q(e){K(e)||0<=y.props.trigger.indexOf("click")&&f||(y.props.interactive?y.hideWithInteractivity(e):Z(e))}function J(e){y.props.trigger.indexOf("focusin")<0&&e.target!==O()||y.props.interactive&&e.relatedTarget&&b.contains(e.relatedTarget)||Z(e)}function K(e){return El.isTouch&&C()!==0<=e.type.indexOf("touch")}function Q(){G();var e=y.props,t=e.popperOptions,n=e.placement,r=e.offset,o=e.getReferenceClientRect,i=e.moveTransition,e=E()?Ll(b).arrow:null,o=o?{getBoundingClientRect:o,contextElement:o.contextElement||O()}:a,i=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!i}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t,n=e.state;E()&&(t=A().box,["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?t.setAttribute("data-placement",n.placement):n.attributes.popper["data-popper-"+e]?t.setAttribute("data-"+e,""):t.removeAttribute("data-"+e)}),n.attributes.popper={})}}];E()&&e&&i.push({name:"arrow",options:{element:e,padding:3}}),i.push.apply(i,(null==t?void 0:t.modifiers)||[]),y.popperInstance=ol(o,b,Object.assign({},t,{placement:n,onFirstUpdate:s,modifiers:i}))}function G(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function Y(){return gl(b.querySelectorAll("[data-tippy-root]"))}function X(e){y.clearDelayTimeouts(),e&&N("onTrigger",[y,e]),L();var t=j(!0),n=D(),e=n[0],n=n[1];El.isTouch&&"hold"===e&&n&&(t=n),t?r=setTimeout(function(){y.show()},t):y.show()}function Z(e){y.clearDelayTimeouts(),N("onUntrigger",[y,e]),y.state.isVisible?0<=y.props.trigger.indexOf("mouseenter")&&0<=y.props.trigger.indexOf("click")&&0<=["mouseleave","mousemove"].indexOf(e.type)&&f||((e=j(!1))?t=setTimeout(function(){y.state.isVisible&&y.hide()},e):n=requestAnimationFrame(function(){y.hide()})):z()}}function Ul(e,t){void 0===t&&(t={});var n=Nl.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Sl,ll),window.addEventListener("blur",jl);var r=Object.assign({},t,{plugins:n}),n=(kl(n=e)?[n]:dl(n,"NodeList")?gl(n):Array.isArray(n)?n:gl(document.querySelectorAll(n))).reduce(function(e,t){t=t&&Hl(t,r);return t&&e.push(t),e},[]);return kl(e)?n[0]:n}Ul.defaultProps=Nl,Ul.setDefaultProps=function(t){Object.keys(t).forEach(function(e){Nl[e]=t[e]})},Ul.currentInput=El,Object.assign({},In,{effect:function(e){var t=e.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow)}}),Ul.setDefaultProps({render:zl});function Wl(e){return e=e.renderers,W.a.createElement(W.a.Fragment,null,Array.from(e).map(function(e){var t=q(e,2),e=t[0],t=t[1];return a.a.createPortal(t.reactElement,t.element,e)}))}var ql=Ul,Jl=(h(ec,[{key:"createTooltip",value:function(){var t=this,e=this.editor.options.element,n=!!e.parentElement;!this.tippy&&n&&(this.tippy=ql(e,p({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",function(e){t.blurHandler({event:e})}))}},{key:"update",value:function(t,e){var n,r,o=t.state,i=t.composing,a=o.doc,s=o.selection,a=e&&e.doc.eq(a)&&e.selection.eq(s);i||a||(this.createTooltip(),s=s.ranges,n=Math.min.apply(Math,M(s.map(function(e){return e.$from.pos}))),r=Math.max.apply(Math,M(s.map(function(e){return e.$to.pos}))),null!==(s=this.shouldShow)&&void 0!==s&&s.call(this,{editor:this.editor,view:t,state:o,oldState:e,from:n,to:r})?(null===(e=this.tippy)||void 0===e||e.setProps({getReferenceClientRect:(null===(e=this.tippyOptions)||void 0===e?void 0:e.getReferenceClientRect)||function(){if(Os(e=o.selection)&&e instanceof mn){e=t.nodeDOM(n);if(e)return e.getBoundingClientRect()}var e;return Ys(t,n,r)}}),this.show()):this.hide())}},{key:"show",value:function(){var e;null===(e=this.tippy)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.tippy)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e;null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}]),ec),Kl=(Bn.create({name:"bubbleMenu",addOptions:function(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins:function(){return this.options.element?[(t={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new Mn({key:"string"==typeof t.pluginKey?new Pn(t.pluginKey):t.pluginKey,view:function(e){return new Jl(p({view:e},t))}}))]:[];var t}}),h(Zl,[{key:"createTooltip",value:function(){var t=this,e=this.editor.options.element,n=!!e.parentElement;!this.tippy&&n&&(this.tippy=ql(e,p({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",function(e){t.blurHandler({event:e})}))}},{key:"update",value:function(e,t){var n=e.state,r=n.doc,o=n.selection,i=o.from,a=o.to;t&&t.doc.eq(r)&&t.selection.eq(o)||(this.createTooltip(),null!==(o=this.shouldShow)&&void 0!==o&&o.call(this,{editor:this.editor,view:e,state:n,oldState:t})?(null===(t=this.tippy)||void 0===t||t.setProps({getReferenceClientRect:(null===(t=this.tippyOptions)||void 0===t?void 0:t.getReferenceClientRect)||function(){return Ys(e,i,a)}}),this.show()):this.hide())}},{key:"show",value:function(){var e;null===(e=this.tippy)||void 0===e||e.show()}},{key:"hide",value:function(){var e;null===(e=this.tippy)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e;null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}]),Zl),Ql=(Bn.create({name:"floatingMenu",addOptions:function(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins:function(){return this.options.element?[(t={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new Mn({key:"string"==typeof t.pluginKey?new Pn(t.pluginKey):t.pluginKey,view:function(e){return new Kl(p({view:e},t))}}))]:[];var t}}),["editor"]),Gl=function(){m(n,Qs);var t=b(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).contentComponent=null,e}return h(n)}(),In=function(){m(n,W.a.Component);var t=b(n);function n(e){return d(this,n),(e=t.call(this,e)).editorContentRef=W.a.createRef(),e.state={renderers:new Map},e}return h(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"init",value:function(){var e,t=this.props.editor;t&&t.options.element&&(t.contentComponent||((e=this.editorContentRef.current).append.apply(e,M(t.options.element.childNodes)),t.setOptions({element:e}),t.contentComponent=this,t.createNodeViews()))}},{key:"componentWillUnmount",value:function(){var e,t=this.props.editor;t&&(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,t.options.element.firstChild)&&((e=document.createElement("div")).append.apply(e,M(t.options.element.childNodes)),t.setOptions({element:e}))}},{key:"render",value:function(){var e=this.props,e=(e.editor,H(e,Ql));return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",p({ref:this.editorContentRef},e)),W.a.createElement(Wl,{renderers:this.state.renderers}))}}]),n}(),Yl=W.a.memo(In),Xl=Object(U.createContext)({onDragStart:void 0});function Zl(e){var n=this,t=e.editor,r=e.element,o=e.view,i=e.tippyOptions,i=void 0===i?{}:i,e=e.shouldShow;d(this,Zl),this.preventHide=!1,this.shouldShow=function(e){var t=e.view,n=e.state.selection,r=n.$anchor,e=n.empty,n=1===r.depth,r=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(t.hasFocus()&&e&&n&&r)},this.mousedownHandler=function(){n.preventHide=!0},this.focusHandler=function(){setTimeout(function(){return n.update(n.editor.view)})},this.blurHandler=function(e){var t,e=e.event;n.preventHide?n.preventHide=!1:null!=e&&e.relatedTarget&&null!==(t=n.element.parentNode)&&void 0!==t&&t.contains(e.relatedTarget)||n.hide()},this.editor=t,this.element=r,this.view=o,e&&(this.shouldShow=e),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}function ec(e){var n=this,t=e.editor,r=e.element,o=e.view,i=e.tippyOptions,i=void 0===i?{}:i,e=e.shouldShow;d(this,ec),this.preventHide=!1,this.shouldShow=function(e){var t=e.view,n=e.state,r=e.from,o=e.to,i=n.doc,e=n.selection.empty,n=!i.textBetween(r,o).length&&Ss(n.selection);return!(!t.hasFocus()||e||n)},this.mousedownHandler=function(){n.preventHide=!0},this.dragstartHandler=function(){n.hide()},this.focusHandler=function(){setTimeout(function(){return n.update(n.editor.view)})},this.blurHandler=function(e){var t,e=e.event;n.preventHide?n.preventHide=!1:null!=e&&e.relatedTarget&&null!==(t=n.element.parentNode)&&void 0!==t&&t.contains(e.relatedTarget)||n.hide()},this.editor=t,this.element=r,this.view=o,e&&(this.shouldShow=e),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}W.a.forwardRef(function(e,t){var n=Object(U.useContext)(Xl).onDragStart,r=e.as||"div";return W.a.createElement(r,p(p({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:p({whiteSpace:"normal"},e.style)}))});function tc(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=q(Object(U.useState)(null),2),o=r[0],i=r[1],a=(e=q(Object(U.useState)(0),2)[1],function(){return e(function(e){return e+1})});return Object(U.useEffect)(function(){var e=!0,t=new Gl(n);return i(t),t.on("transaction",function(){requestAnimationFrame(function(){requestAnimationFrame(function(){e&&a()})})}),function(){t.destroy(),e=!1}},t),o}var nc=Bn.create({name:"placeholder",addOptions:function(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins:function(){var a=this;return[new Mn({props:{decorations:function(e){var t=e.doc,n=e.selection,e=a.editor.isEditable||!a.options.showOnlyWhenEditable,o=n.anchor,i=[];return e?(t.descendants(function(e,t){var n=t<=o&&o<=t+e.nodeSize,r=!e.isLeaf&&!e.childCount;return!n&&a.options.showOnlyCurrent||!r||(r=[a.options.emptyNodeClass],a.editor.isEmpty&&r.push(a.options.emptyEditorClass),n=Xo.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof a.options.placeholder?a.options.placeholder({editor:a.editor,node:e,pos:t,hasAnchor:n}):a.options.placeholder}),i.push(n)),a.options.includeChildren}),ti.create(t,i)):null}}})]}}),rc=Rn.create({name:"text",group:"inline"});function oc(e){this.j={},this.jr=[],this.jd=null,this.t=e}oc.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t;var n=t,r=this.j[e];if(r)return n&&(r.t=n),r;r=ic();t=lc(this,e);return t?(Object.assign(r.j,t.j),r.jr.append(t.jr),r.jr=t.jd,r.t=n||t.t):r.t=n,this.j[e]=r}};var ic=function(){return new oc},ac=function(e){return new oc(e)},sc=function(e,t,n){e.j[t]||(e.j[t]=n)},uc=function(e,t,n){e.jr.push([t,n])},lc=function(e,t){var n=e.j[t];if(n)return n;for(var r=0;r<e.jr.length;r++){var o=e.jr[r][0],i=e.jr[r][1];if(o.test(t))return i}return e.jd},cc=function(e,t,n){for(var r=0;r<t.length;r++)sc(e,t[r],n)},fc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0],o=t[n][1];sc(e,r,o)}},dc=function(e,t,n,r){for(var o,i=0,a=t.length;i<a&&(o=e.j[t[i]]);)e=o,i++;if(a<=i)return[];for(;i<a-1;)o=r(),sc(e,t[i],o),e=o,i++;sc(e,t[a-1],n)},pc="DOMAIN",hc="LOCALHOST",mc="TLD",vc="NUM",gc="PROTOCOL",yc="MAILTO",bc="WS",kc="NL",wc="OPENBRACE",xc="OPENBRACKET",Dc="OPENANGLEBRACKET",Cc="OPENPAREN",Ec="CLOSEBRACE",Oc="CLOSEBRACKET",Sc="CLOSEANGLEBRACKET",Ac="CLOSEPAREN",jc="AMPERSAND",Mc="APOSTROPHE",Nc="ASTERISK",Tc="AT",Fc="BACKSLASH",Pc="BACKTICK",Rc="CARET",Bc="COLON",Ic="COMMA",Lc="DOLLAR",zc="DOT",_c="EQUALS",Vc="EXCLAMATION",$c="HYPHEN",Hc="PERCENT",Uc="PIPE",Wc="PLUS",qc="POUND",Jc="QUERY",Kc="QUOTE",Qc="SEMI",Gc="SLASH",Yc="TILDE",Xc="UNDERSCORE",Zc="SYM",ef=Object.freeze({__proto__:null,DOMAIN:pc,LOCALHOST:hc,TLD:mc,NUM:vc,PROTOCOL:gc,MAILTO:yc,WS:bc,NL:kc,OPENBRACE:wc,OPENBRACKET:xc,OPENANGLEBRACKET:Dc,OPENPAREN:Cc,CLOSEBRACE:Ec,CLOSEBRACKET:Oc,CLOSEANGLEBRACKET:Sc,CLOSEPAREN:Ac,AMPERSAND:jc,APOSTROPHE:Mc,ASTERISK:Nc,AT:Tc,BACKSLASH:Fc,BACKTICK:Pc,CARET:Rc,COLON:Bc,COMMA:Ic,DOLLAR:Lc,DOT:zc,EQUALS:_c,EXCLAMATION:Vc,HYPHEN:$c,PERCENT:Hc,PIPE:Uc,PLUS:Wc,POUND:qc,QUERY:Jc,QUOTE:Kc,SEMI:Qc,SLASH:Gc,TILDE:Yc,UNDERSCORE:Xc,SYM:Zc}),tf="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermgensberater-ctb vermgensberatung-pwb                                                                                                                                                        ".split(" "),nf=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,rf=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,of=/\uFE0F/,af=/\d/,sf=/\s/;function uf(e){function n(){var e=ac(pc);return e.j={"-":s},e.jr=[].concat(l),e}function t(e){var t=n();return t.t=e,t}var r=0<arguments.length&&void 0!==e?e:[],o=ic(),i=ac(vc),a=ac(pc),s=ic(),u=ac(bc),l=[[af,a],[nf,a],[rf,a],[of,a]];fc(o,[["'",ac(Mc)],["{",ac(wc)],["[",ac(xc)],["<",ac(Dc)],["(",ac(Cc)],["}",ac(Ec)],["]",ac(Oc)],[">",ac(Sc)],[")",ac(Ac)],["&",ac(jc)],["*",ac(Nc)],["@",ac(Tc)],["`",ac(Pc)],["^",ac(Rc)],[":",ac(Bc)],[",",ac(Ic)],["$",ac(Lc)],[".",ac(zc)],["=",ac(_c)],["!",ac(Vc)],["-",ac($c)],["%",ac(Hc)],["|",ac(Uc)],["+",ac(Wc)],["#",ac(qc)],["?",ac(Jc)],['"',ac(Kc)],["/",ac(Gc)],[";",ac(Qc)],["~",ac(Yc)],["_",ac(Xc)],["\\",ac(Fc)]]),sc(o,"\n",ac(kc)),uc(o,sf,u),sc(u,"\n",ic()),uc(u,sf,u);for(var c=0;c<tf.length;c++)dc(o,tf[c],t(mc),n);var f=n(),d=n(),p=n(),h=n();dc(o,"file",f,n),dc(o,"ftp",d,n),dc(o,"http",p,n),dc(o,"mailto",h,n);var m=n(),e=ac(gc),u=ac(yc);sc(d,"s",m),sc(d,":",e),sc(p,"s",m),sc(p,":",e),sc(f,":",e),sc(m,":",e),sc(h,":",u);for(var v=n(),g=0;g<r.length;g++)dc(o,r[g],v,n);return sc(v,":",e),dc(o,"localhost",t(hc),n),uc(o,af,i),uc(o,nf,a),uc(o,rf,a),uc(o,of,a),uc(i,af,i),uc(i,nf,a),uc(i,rf,a),uc(i,of,a),sc(i,"-",s),sc(a,"-",s),sc(s,"-",s),uc(a,af,a),uc(a,nf,a),uc(a,rf,a),uc(a,of,a),uc(s,af,a),uc(s,nf,a),uc(s,rf,a),uc(s,of,a),o.jd=ac(Zc),o}var lf={defaultProtocol:"http",events:null,format:cf,formatHref:cf,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function cf(e){return e}function ff(){}function df(n,e){function t(e,t){this.t=n,this.v=e,this.tk=t}return function(e,t,n){var r,o=2<arguments.length&&void 0!==n?n:{},i=Object.create(e.prototype);for(r in o)i[r]=o[r];(i.constructor=t).prototype=i}(ff,t,e),t}ff.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:lf.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};var pf=df("email",{isLink:!0}),hf=df("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),mf=df("text"),vf=df("nl"),gf=df("url",{isLink:!0,toHref:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:lf.defaultProtocol,t=this.tk,n=!1,r=!1,o=[],i=0;t[i].t===gc;)n=!0,o.push(t[i].v),i++;for(;t[i].t===Gc;)r=!0,o.push(t[i].v),i++;for(;i<t.length;i++)o.push(t[i].v);return o=o.join(""),n||r||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===gc}}),yf=Object.freeze({__proto__:null,MultiToken:ff,Base:ff,createTokenClass:df,MailtoEmail:pf,Email:hf,Text:mf,Nl:vf,Url:gf});function bf(e,t,n){var r=n[0].s,o=n[n.length-1].e;return new e(t.substr(r,o-r),n)}var kf="undefined"!=typeof console&&console&&console.warn||function(){},wf={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function xf(e){if(wf.initialized&&kf('linkifyjs: already initialized - will not register custom protocol "'.concat(e,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(e))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");wf.customProtocols.push(e)}function Df(e){return wf.initialized||function(){var e,t,n,r,o,i,a,s,u,l,c,f,d,p,h,m,v,g,y,b,k,w,x,D,C,E,O,S,A,j,M,N,T,F,P;wf.scanner={start:uf(wf.customProtocols),tokens:ef},wf.parser={start:(e=ic(),t=ic(),n=ic(),r=ic(),o=ic(),i=ic(),a=ic(),s=ac(gf),u=ic(),l=ac(gf),c=ac(gf),f=ic(),d=ic(),p=ic(),h=ic(),m=ic(),v=ac(gf),g=ac(gf),y=ac(gf),b=ac(gf),k=ic(),w=ic(),x=ic(),D=ic(),C=ic(),E=ic(),O=ac(hf),S=ic(),A=ac(hf),j=ac(pf),M=ic(),N=ic(),T=ic(),F=ic(),P=ac(vf),sc(e,kc,P),sc(e,gc,t),sc(e,yc,n),sc(t,Gc,r),sc(r,Gc,o),sc(e,mc,i),sc(e,pc,i),sc(e,hc,s),sc(e,vc,i),sc(o,mc,c),sc(o,pc,c),sc(o,vc,c),sc(o,hc,c),sc(i,zc,a),sc(C,zc,E),sc(a,mc,s),sc(a,pc,i),sc(a,vc,i),sc(a,hc,i),sc(E,mc,O),sc(E,pc,C),sc(E,vc,C),sc(E,hc,C),sc(s,zc,a),sc(O,zc,E),sc(s,Bc,u),sc(s,Gc,c),sc(u,vc,l),sc(l,Gc,c),sc(O,Bc,S),sc(S,vc,A),S=[jc,Nc,Tc,Fc,Pc,Rc,Lc,pc,_c,$c,hc,vc,Hc,Uc,Wc,qc,gc,Gc,Zc,Yc,mc,Xc],A=[Mc,Sc,Ec,Oc,Ac,Bc,Ic,zc,Vc,Dc,wc,xc,Cc,Jc,Kc,Qc],sc(c,wc,d),sc(c,xc,p),sc(c,Dc,h),sc(c,Cc,m),sc(f,wc,d),sc(f,xc,p),sc(f,Dc,h),sc(f,Cc,m),sc(d,Ec,c),sc(p,Oc,c),sc(h,Sc,c),sc(m,Ac,c),sc(v,Ec,c),sc(g,Oc,c),sc(y,Sc,c),sc(b,Ac,c),sc(k,Ec,c),sc(w,Oc,c),sc(x,Sc,c),sc(D,Ac,c),cc(d,S,v),cc(p,S,g),cc(h,S,y),cc(m,S,b),cc(d,A,k),cc(p,A,w),cc(h,A,x),cc(m,A,D),cc(v,S,v),cc(g,S,g),cc(y,S,y),cc(b,S,b),cc(v,A,v),cc(g,A,g),cc(y,A,y),cc(b,A,b),cc(k,S,v),cc(w,S,g),cc(x,S,y),cc(D,S,b),cc(k,A,k),cc(w,A,w),cc(x,A,x),cc(D,A,D),cc(c,S,c),cc(f,S,c),cc(c,A,f),cc(f,A,f),sc(n,mc,j),sc(n,pc,j),sc(n,vc,j),sc(n,hc,j),cc(j,S,j),cc(j,A,M),cc(M,S,j),cc(M,A,M),cc(i,M=[jc,Mc,Nc,Fc,Pc,Rc,Ec,Lc,pc,_c,$c,vc,wc,Hc,Uc,Wc,qc,Jc,Gc,Zc,Yc,mc,Xc],N),sc(i,Tc,T),cc(s,M,N),sc(s,Tc,T),cc(a,M,N),cc(N,M,N),sc(N,Tc,T),sc(N,zc,F),cc(F,M,N),sc(T,mc,C),sc(T,pc,C),sc(T,vc,C),sc(T,hc,O),e),tokens:yf};for(var R={createTokenClass:df},B=0;B<wf.pluginQueue.length;B++)wf.pluginQueue[B][1]({scanner:wf.scanner,parser:wf.parser,utils:R});wf.initialized=!0}(),function(e,t,n){for(var r=n.length,o=0,i=[],a=[];o<r;){for(var s=e,u=null,l=null,c=0,f=null,d=-1;o<r&&!(u=lc(s,n[o].t));)a.push(n[o++]);for(;o<r&&(l=u||lc(s,n[o].t));)u=null,(s=l).accepts()?(d=0,f=s):0<=d&&d++,o++,c++;if(d<0)for(var p=o-c;p<o;p++)a.push(n[p]);else{0<a.length&&(i.push(bf(mf,t,a)),a=[]),o-=d,c-=d;var h=f.t,m=n.slice(o-c,o);i.push(bf(h,t,m))}}return 0<a.length&&i.push(bf(mf,t,a)),i}(wf.parser.start,e,function(e,t){for(var n=function(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.charCodeAt(r),i=void 0,i=o<55296||56319<o||r+1===n||(i=e.charCodeAt(r+1))<56320||57343<i?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}(t.replace(/[A-Z]/g,function(e){return e.toLowerCase()})),r=n.length,o=[],i=0,a=0;a<r;){for(var s=e,u=null,l=0,c=null,f=-1,d=-1;a<r&&(u=lc(s,n[a]));)(s=u).accepts()?(d=f=0,c=s):0<=f&&(f+=n[a].length,d++),l+=n[a].length,i+=n[a].length,a++;i-=f,a-=d,l-=f,o.push({t:c.t,v:t.substr(i-l,l),s:i-l,e:i})}return o}(wf.scanner.start,e))}function Cf(e,t){for(var n=1<arguments.length&&void 0!==t?t:null,r=Df(e),o=[],i=0;i<r.length;i++){var a=r[i];!a.isLink||n&&a.t!==n||o.push(a.toObject())}return o}function Ef(e,t){t=1<arguments.length&&void 0!==t?t:null,e=Df(e);return 1===e.length&&e[0].isLink&&(!t||e[0].t===t)}function Of(d){return new Mn({key:new Pn("autolink"),appendTransaction:function(e,o,i){var r,a,s,u,t,n=e.some(function(e){return e.docChanged})&&!o.doc.eq(i.doc),l=e.some(function(e){return e.getMeta("preventAutolink")});if(n&&!l){var c=i.tr,e=(l=o.doc,e=M(e),t=new Da(l),e.forEach(function(e){e.steps.forEach(function(e){t.step(e)})}),t),f=e.mapping;if((a=e.mapping,s=e.steps,u=[],a.maps.forEach(function(e,o){var n=[];if(e.ranges.length)e.forEach(function(e,t){n.push({from:e,to:t})});else{var t=s[o],e=t.from,t=t.to;if(void 0===e||void 0===t)return;n.push({from:e,to:t})}n.forEach(function(e){var t=e.from,n=e.to,r=a.slice(o).map(t,-1),e=a.slice(o).map(n),t=a.invert().map(r,-1),n=a.invert().map(e);u.push({oldRange:{from:t,to:n},newRange:{from:r,to:e}})})}),1===(r=function(e,t){var n=1<arguments.length&&void 0!==t?t:JSON.stringify,r={};return e.filter(function(e){e=n(e);return!Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=!0)})}(u)).length?r:r.filter(function(t,n){return!r.filter(function(e,t){return t!==n}).some(function(e){return t.oldRange.from>=e.oldRange.from&&t.oldRange.to<=e.oldRange.to&&t.newRange.from>=e.newRange.from&&t.newRange.to<=e.newRange.to})})).forEach(function(e){var n,t=e.oldRange,r=e.newRange;Gs(t.from,t.to,o.doc).filter(function(e){return e.mark.type===d.type}).forEach(function(e){var t,n=Gs(f.map(e.from),f.map(e.to),i.doc).filter(function(e){return e.mark.type===d.type});n.length&&(t=n[0],n=o.doc.textBetween(e.from,e.to,void 0," "),e=i.doc.textBetween(t.from,t.to,void 0," "),n=Ef(n),e=Ef(e),n&&!e&&c.removeMark(t.from,t.to,d.type))}),t=i.doc,n=[],t.nodesBetween(r.from,r.to,function(e,t){e.isTextblock&&n.push({node:e,pos:t})}),n.forEach(function(t){Cf(i.doc.textBetween(t.pos,t.pos+t.node.nodeSize,void 0," ")).filter(function(e){return e.isLink}).filter(function(e){return!d.validate||d.validate(e.value)}).map(function(e){return p(p({},e),{},{from:t.pos+e.start+1,to:t.pos+e.end+1})}).filter(function(e){var t=r.from>=e.from&&r.from<=e.to,e=r.to>=e.from&&r.to<=e.to;return t||e}).forEach(function(e){c.addMark(e.from,e.to,d.type.create({href:e.href}))})})}),c.steps.length)return c}}})}var Sf=Ln.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate:function(){this.options.protocols.forEach(xf)},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes:function(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML:function(e){e=e.HTMLAttributes;return["a",ns(this.options.HTMLAttributes,e),0]},addCommands:function(){var n=this;return{setLink:function(t){return function(e){return(0,e.chain)().setMark(n.name,t).setMeta("preventAutolink",!0).run()}},toggleLink:function(t){return function(e){return(0,e.chain)().toggleMark(n.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(e){return(0,e.chain)().unsetMark(n.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){var l,t=this;return[(l={find:function(e){return Cf(e).filter(function(e){return!t.options.validate||t.options.validate(e.value)}).filter(function(e){return e.isLink}).map(function(e){return{text:e.value,index:e.start,data:e}})},type:this.type,getAttributes:function(e){return{href:null===(e=e.data)||void 0===e?void 0:e.href}}},new hs({find:l.find,handler:function(e){var t=e.state,n=e.range,r=e.match,o=as(l.getAttributes,void 0,r);if(!1===o||null===o)return null;var i=t.tr,a=r[r.length-1],s=r[0],e=n.to;if(a){var r=s.search(/\S/),u=n.from+s.indexOf(a),s=u+a.length;if(Gs(n.from,n.to,t.doc).filter(function(t){return t.mark.type.excluded.find(function(e){return e===l.type&&e!==t.mark.type})}).filter(function(e){return e.to>u}).length)return null;s<n.to&&i.delete(s,n.to),u>n.from&&i.delete(n.from+r,u),e=n.from+r+a.length,i.addMark(n.from+r,e,l.type.create(o||{})),i.removeStoredMark(l.type)}}}))]},addProseMirrorPlugins:function(){var r,o,e=[];return this.options.autolink&&e.push(Of({type:this.type,validate:this.options.validate})),this.options.openOnClick&&e.push((r={type:this.type},new Mn({key:new Pn("handleClickLink"),props:{handleClick:function(e,t,n){e=Ks(e.state,r.type.name);return!(null===(n=n.target)||void 0===n||!n.closest("a")||!e.href||(window.open(e.href,e.target),0))}}}))),this.options.linkOnPaste&&e.push((o={editor:this.editor,type:this.type},new Mn({key:new Pn("handlePasteLink"),props:{handlePaste:function(e,t,n){if(e.state.selection.empty)return!1;var r="";n.content.forEach(function(e){r+=e.textContent});n=Cf(r).find(function(e){return e.isLink&&e.value===r});return!(!r||!n||(o.editor.commands.setMark(o.type,{href:n.href}),0))}}}))),e}}),Af=Rn.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"}]},renderHTML:function(e){e=e.HTMLAttributes;return["p",ns(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setParagraph:function(){return function(e){return e.commands.setNode(t.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Alt-0":function(){return e.editor.commands.setParagraph()}}}}),jf=Rn.create({name:"doc",topNode:!0,content:"block+"}),Mf=/^\s*>\s$/,Nf=Rn.create({name:"blockquote",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(e){e=e.HTMLAttributes;return["blockquote",ns(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setBlockquote:function(){return function(e){return e.commands.wrapIn(t.name)}},toggleBlockquote:function(){return function(e){return e.commands.toggleWrap(t.name)}},unsetBlockquote:function(){return function(e){return e.commands.lift(t.name)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-b":function(){return e.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[Xs({find:Mf,type:this.type})]}}),Tf=Rn.create({name:"hardBreak",addOptions:function(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(e){e=e.HTMLAttributes;return["br",ns(this.options.HTMLAttributes,e)]},renderText:function(){return"\n"},addCommands:function(){var u=this;return{setHardBreak:function(){return function(e){var t=e.commands,i=e.chain,a=e.state,s=e.editor;return t.first([function(){return t.exitCode()},function(){return t.command(function(){var e=a.selection,t=a.storedMarks;if(e.$from.parent.type.spec.isolating)return!1;var n=u.options.keepMarks,r=s.extensionManager.splittableMarks,o=t||e.$to.parentOffset&&e.$from.marks();return i().insertContent({type:u.name}).command(function(e){var t=e.tr;return e.dispatch&&o&&n&&(e=o.filter(function(e){return r.includes(e.type.name)}),t.ensureMarks(e)),!0}).run()})}])}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Enter":function(){return e.editor.commands.setHardBreak()},"Shift-Enter":function(){return e.editor.commands.setHardBreak()}}}});function Ff(e){var t=e.placeholder,n=e.autofocus,n=void 0!==n&&n,e=e.content,e=void 0===e?"":e;return{extensions:[jf,rc,Af,Sf.configure({openOnClick:!1}),nc.configure({placeholder:t,showOnlyWhenEditable:!1}),Nf.configure({}),Tf.configure({})],content:e,autofocus:n,editorProps:{attributes:{class:"gh-comment-content focus:outline-0"}},parseOptions:{preserveWhitespace:"full"}}}function Pf(e,t){if(e in t){for(var n=t[e],r=arguments.length,o=new Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return"function"==typeof n?n.apply(void 0,o):n}t=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(function(e){return'"'.concat(e,'"')}).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Pf),t}var Rf=["static"],Bf=["unmount"],If=["as","children","refName"],Rn=((Ln={})[Ln.None=0]="None",Ln[Ln.RenderStrategy=1]="RenderStrategy",Ln[Ln.Static=2]="Static",Ln),Lf=((Ln={})[Ln.Unmount=0]="Unmount",Ln[Ln.Hidden=1]="Hidden",Ln);function zf(e){var t=e.ourProps,n=e.theirProps,r=e.slot,o=e.defaultTag,i=e.features,a=e.visible,a=void 0===a||a,s=e.name,n=Vf(n,t);if(a)return _f(n,r,o,s);t=null!=i?i:0;if(2&t){a=n.static,i=void 0!==a&&a,a=H(n,Rf);if(i)return _f(a,r,o,s)}if(1&t){var t=n.unmount,t=void 0===t||t,u=H(n,Bf);return Pf(t?0:1,($(t={},0,function(){return null}),$(t,1,function(){return _f(p(p({},u),{},{hidden:!0,style:{display:"none"}}),r,o,s)}),t))}return _f(n,r,o,s)}function _f(e,t,n,r){var o=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length?n:void 0,a=3<arguments.length?r:void 0,t=Uf(e,["unmount","static"]),n=t.as,r=void 0===n?i:n,i=t.children,n=t.refName,n=void 0===n?"ref":n,t=H(t,If),e=void 0!==e.ref?$({},n,e.ref):{},i="function"==typeof i?i(o):i;t.className&&"function"==typeof t.className&&(t.className=t.className(o));o={};if(r===U.Fragment&&0<Object.keys(Hf(t)).length){if(!Object(U.isValidElement)(i)||Array.isArray(i)&&1<i.length)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(a,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(t).map(function(e){return"  - ".concat(e)}).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(function(e){return"  - ".concat(e)}).join("\n")].join("\n"));return Object(U.cloneElement)(i,Object.assign({},Vf(i.props,Hf(Uf(t,["ref"]))),o,e))}return Object(U.createElement)(r,Object.assign({},Uf(t,["ref"]),r!==U.Fragment&&e,r!==U.Fragment&&o),i)}function Vf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];for(var r={},u={},o=0,i=t;o<i.length;o++){var a,s=i[o];for(a in s)a.startsWith("on")&&"function"==typeof s[a]?(null!=u[a]||(u[a]=[]),u[a].push(s[a])):r[a]=s[a]}if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(u).map(function(e){return[e,void 0]})));for(var l in u)!function(s){Object.assign(r,$({},s,function(e){for(var t=u[s],n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=Y(t);try{for(i.s();!(a=i.n()).done;){var a=a.value;if(e.defaultPrevented)return;a.apply(void 0,[e].concat(r))}}catch(e){i.e(e)}finally{i.f()}}))}(l);return r}function $f(e){var t;return Object.assign(Object(U.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function Hf(e){var t,n=Object.assign({},e);for(t in n)void 0===n[t]&&delete n[t];return n}function Uf(e,t){var t=1<arguments.length&&void 0!==t?t:[],n=Object.assign({},e),r=Y(t);try{for(r.s();!(o=r.n()).done;){var o=o.value;o in n&&delete n[o]}}catch(e){r.e(e)}finally{r.f()}return n}var Wf=Object(U.createContext)(null);Wf.displayName="OpenClosedContext";var qf=((Ln={})[Ln.Open=0]="Open",Ln[Ln.Closed=1]="Closed",Ln);function Jf(){return Object(U.useContext)(Wf)}function Kf(e){var t=e.value,e=e.children;return W.a.createElement(Wf.Provider,{value:t},e)}var Qf="undefined"!=typeof window?U.useLayoutEffect:U.useEffect,Gf={serverHandoffComplete:!1};function Yf(){var e=q(Object(U.useState)(Gf.serverHandoffComplete),2),t=e[0],n=e[1];return Object(U.useEffect)(function(){!0!==t&&n(!0)},[t]),Object(U.useEffect)(function(){!1===Gf.serverHandoffComplete&&(Gf.serverHandoffComplete=!0)},[]),t}var Xf=0;function Zf(){return++Xf}var ed=null!=(Ln=W.a.useId)?Ln:function(){var e=Yf(),e=q(W.a.useState(e?Zf:null),2),t=e[0],n=e[1];return Qf(function(){null===t&&n(++Xf)},[t]),null!=t?""+t:void 0};function td(){var e=Object(U.useRef)(!1);return Qf(function(){return e.current=!0,function(){e.current=!1}},[]),e}function nd(e){var t=Object(U.useRef)(e);return Qf(function(){t.current=e},[e]),t}function rd(e){var t=nd(e);return W.a.useCallback(function(){return t.current.apply(t,arguments)},[t])}var od=Symbol();function id(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object(U.useRef)(t);Object(U.useEffect)(function(){r.current=t},[t]);var o=rd(function(e){var t=Y(r.current);try{for(t.s();!(n=t.n()).done;){var n=n.value;null!=n&&("function"==typeof n?n(e):n.current=e)}}catch(e){t.e(e)}finally{t.f()}});return t.every(function(e){return null==e||(null==e?void 0:e[od])})?void 0:o}function ad(){var e,t,n=[],r=[],o={enqueue:function(e){r.push(e)},addEventListener:function(e,t,n,r){return e.addEventListener(t,n,r),o.add(function(){return e.removeEventListener(t,n,r)})},requestAnimationFrame:(t=function(){var e=requestAnimationFrame.apply(void 0,arguments);return o.add(function(){return cancelAnimationFrame(e)})},a.toString=function(){return t.toString()},a),nextFrame:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.requestAnimationFrame(function(){return o.requestAnimationFrame.apply(o,t)})},setTimeout:(e=function(){var e=setTimeout.apply(void 0,arguments);return o.add(function(){return clearTimeout(e)})},i.toString=function(){return e.toString()},i),add:function(t){return n.push(t),function(){var e=n.indexOf(t);0<=e&&(0,q(n.splice(e,1),1)[0])()}},dispose:function(){var e,t=Y(n.splice(0));try{for(t.s();!(e=t.n()).done;)(0,e.value)()}catch(e){t.e(e)}finally{t.f()}},workQueue:function(){return g(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Y(r.splice(0)),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return n=n.value,e.next=7,n();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))()}};function i(){return e.apply(this,arguments)}function a(){return t.apply(this,arguments)}return o}function sd(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&0<n.length&&(e=e.classList).add.apply(e,n)}function ud(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&0<n.length&&(e=e.classList).remove.apply(e,n)}var ld=((Ln={}).Ended="ended",Ln.Cancelled="cancelled",Ln);function cd(t,n,e,r){var o,i,a=e?"enter":"leave",e=ad(),s=void 0!==r?(o=r,i={called:!1},function(){if(!i.called)return i.called=!0,o.apply(void 0,arguments)}):function(){},u=Pf(a,{enter:function(){return n.enter},leave:function(){return n.leave}}),l=Pf(a,{enter:function(){return n.enterTo},leave:function(){return n.leaveTo}}),c=Pf(a,{enter:function(){return n.enterFrom},leave:function(){return n.leaveFrom}});return ud.apply(void 0,[t].concat(M(n.enter),M(n.enterTo),M(n.enterFrom),M(n.leave),M(n.leaveFrom),M(n.leaveTo),M(n.entered))),sd.apply(void 0,[t].concat(M(u),M(c))),e.nextFrame(function(){ud.apply(void 0,[t].concat(M(c))),sd.apply(void 0,[t].concat(M(l))),function(t,n){var r=ad();if(!t)return r.dispose;var o,e=[(e=getComputedStyle(t)).transitionDuration,e.transitionDelay].map(function(e){e=q(e.split(",").filter(Boolean).map(function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)}).sort(function(e,t){return t-e}),1)[0];return void 0===e?0:e});(e=q(e,2))[0]+e[1]!==0?(o=[]).push(r.addEventListener(t,"transitionrun",function(e){e.target===e.currentTarget&&(o.splice(0).forEach(function(e){return e()}),o.push(r.addEventListener(t,"transitionend",function(e){e.target===e.currentTarget&&(n("ended"),o.splice(0).forEach(function(e){return e()}))}),r.addEventListener(t,"transitioncancel",function(e){e.target===e.currentTarget&&(n("cancelled"),o.splice(0).forEach(function(e){return e()}))})))})):n("ended"),r.add(function(){return n("cancelled")}),r.dispose}(t,function(e){return"ended"===e&&(ud.apply(void 0,[t].concat(M(u))),sd.apply(void 0,[t].concat(M(n.entered)))),s(e)})}),e.dispose}var fd=["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],dd=["show","appear","unmount"];function pd(e){return(0<arguments.length&&void 0!==e?e:"").split(" ").filter(function(e){return 1<e.trim().length})}var hd=Object(U.createContext)(null);hd.displayName="TransitionContext";(Ln={}).Visible="visible",Ln.Hidden="hidden";var md=Object(U.createContext)(null);function vd(e){return"children"in e?vd(e.children):0<e.current.filter(function(e){return"visible"===e.state}).length}function gd(e){var r=nd(e),o=Object(U.useRef)([]),i=td(),n=rd(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Lf.Hidden,n=o.current.findIndex(function(e){return e.id===t});-1!==n&&(Pf(e,($(e={},Lf.Unmount,function(){o.current.splice(n,1)}),$(e,Lf.Hidden,function(){o.current[n].state="hidden"}),e)),e=function(){var e;!vd(o)&&i.current&&(null==(e=r.current)||e.call(r))},"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})}))}),t=rd(function(t){var e=o.current.find(function(e){return e.id===t});return e?"visible"!==e.state&&(e.state="visible"):o.current.push({id:t,state:"visible"}),function(){return n(t,Lf.Unmount)}});return Object(U.useMemo)(function(){return{children:o,register:t,unregister:n}},[t,n,o])}function yd(){}md.displayName="NestingContext";var bd=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function kd(e){var t={},n=Y(bd);try{for(n.s();!(r=n.n()).done;){var r=r.value;t[r]=null!=(r=e[r])?r:yd}}catch(e){n.e(e)}finally{n.f()}return t}var wd,xd=Rn.RenderStrategy,Dd=$f(function(e,t){var n=e.beforeEnter,r=e.afterEnter,o=e.beforeLeave,i=e.afterLeave,a=e.enter,s=e.enterFrom,u=e.enterTo,l=e.entered,c=e.leave,f=e.leaveFrom,d=e.leaveTo,p=H(e,fd),h=Object(U.useRef)(null),m=id(h,t),v=q(Object(U.useState)("visible"),2),g=v[0],y=v[1],b=p.unmount?Lf.Unmount:Lf.Hidden,e=function(){var e=Object(U.useContext)(hd);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),k=e.show,t=e.appear,v=e.initial,e=function(){var e=Object(U.useContext)(md);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),w=e.register,x=e.unregister,D=Object(U.useRef)(null),C=ed();Object(U.useEffect)(function(){if(C)return w(C)},[w,C]),Object(U.useEffect)(function(){var e;b===Lf.Hidden&&C&&(k&&"visible"!==g?y("visible"):Pf(g,($(e={},"hidden",function(){return x(C)}),$(e,"visible",function(){return w(C)}),e)))},[g,C,w,x,k,b]);var E,O,d=nd({enter:pd(a),enterFrom:pd(s),enterTo:pd(u),entered:pd(l),leave:pd(c),leaveFrom:pd(f),leaveTo:pd(d)}),i=(E={beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:i},O=Object(U.useRef)(kd(E)),Object(U.useEffect)(function(){O.current=kd(E)},[E]),O),S=Yf();Object(U.useEffect)(function(){if(S&&"visible"===g&&null===h.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[h,g,S]);var A,j,M,N,T,F,P,R,B,I,L,z=v&&!t,t=!S||z||D.current===k?"idle":k?"enter":"leave",_=Object(U.useRef)(!1),V=gd(function(){_.current||(y("hidden"),x(C))});i={container:h,classes:d,events:i,direction:t,onStart:nd(function(){_.current=!0}),onStop:nd(function(e){_.current=!1,"leave"!==e||vd(V)||(y("hidden"),x(C))})},j=i.container,t=i.direction,M=i.classes,N=i.events,T=i.onStart,F=i.onStop,P=td(),A=q(Object(U.useState)(ad),1)[0],Object(U.useEffect)(function(){return function(){return A.dispose()}},[A]),R=A,B=nd(t),I=rd(function(){return Pf(B.current,{enter:function(){return N.current.beforeEnter()},leave:function(){return N.current.beforeLeave()},idle:function(){}})}),L=rd(function(){return Pf(B.current,{enter:function(){return N.current.afterEnter()},leave:function(){return N.current.afterLeave()},idle:function(){}})}),Qf(function(){var t=ad();R.add(t.dispose);var e=j.current;if(e&&"idle"!==B.current&&P.current)return t.dispose(),I(),T.current(B.current),t.add(cd(e,M.current,"enter"===B.current,function(e){t.dispose(),Pf(e,($(e={},ld.Ended,function(){L(),F.current(B.current)}),$(e,ld.Cancelled,function(){}),e))})),t.dispose},[t]),Object(U.useEffect)(function(){z&&(b===Lf.Hidden?D.current=null:D.current=k)},[k,z,g]);t=p,p={ref:m};return W.a.createElement(md.Provider,{value:V},W.a.createElement(Kf,{value:Pf(g,($(m={},"visible",qf.Open),$(m,"hidden",qf.Closed),m))},zf({ourProps:p,theirProps:t,defaultTag:"div",features:xd,visible:"visible"===g,name:"Transition.Child"})))}),Cd=$f(function(e,t){var n=e.show,r=e.appear,o=void 0!==r&&r,i=e.unmount,r=H(e,dd),a=Object(U.useRef)(null),e=id(a,t);Yf();t=Jf();if(void 0===n&&null!==t&&(n=Pf(t,($(s={},qf.Open,!0),$(s,qf.Closed,!1),s))),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var t=q(Object(U.useState)(n?"visible":"hidden"),2),s=t[0],u=t[1],l=gd(function(){u("hidden")}),t=q(Object(U.useState)(!0),2),c=t[0],f=t[1],d=Object(U.useRef)([n]);Qf(function(){!1!==c&&d.current[d.current.length-1]!==n&&(d.current.push(n),f(!1))},[d,n]);t=Object(U.useMemo)(function(){return{show:n,appear:o,initial:c}},[n,o,c]);Object(U.useEffect)(function(){var e;n?u("visible"):vd(l)?!(e=a.current)||0===(e=e.getBoundingClientRect()).x&&0===e.y&&0===e.width&&0===e.height&&u("hidden"):u("hidden")},[n,l]);i={unmount:i};return W.a.createElement(md.Provider,{value:l},W.a.createElement(hd.Provider,{value:t},zf({ourProps:p(p({},i),{},{as:U.Fragment,children:W.a.createElement(Dd,p(p({ref:e},i),r))}),theirProps:{},defaultTag:U.Fragment,features:xd,visible:"visible"===s,name:"Transition"})))}),Rn=$f(function(e,t){var n=null!==Object(U.useContext)(hd),r=null!==Jf();return W.a.createElement(W.a.Fragment,null,!n&&r?W.a.createElement(Cd,p({ref:t},e)):W.a.createElement(Dd,p({ref:t},e)))}),Ed=Object.assign(Cd,{Child:Rn,Root:Cd}),Od=["title","titleId"];function Sd(){return(Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ad,jd=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Od);return U.createElement("svg",Sd({xmlns:"http://www.w3.org/2000/svg",height:24,width:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,wd=wd||U.createElement("g",{strokeLinecap:"round",strokeWidth:2,fill:"none",strokeLinejoin:"round",className:"nc-icon-wrapper"},U.createElement("polygon",{points:"7 21 2 22 3 17 18 2 22 6 7 21"})))}),Md=(n.p,["title","titleId"]);function Nd(){return(Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Td,Fd,Pd,Rd=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Md);return U.createElement("svg",Nd({id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:{enableBackground:"new 0 0 50 50"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Ad=Ad||U.createElement("path",{d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"},U.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})))}),Bd=(n.p,["title","titleId"]);function Id(){return(Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ld=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Bd);return U.createElement("svg",Id({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Td=Td||U.createElement("path",{d:"M7 9.5C7 10.1566 7.12933 10.8068 7.3806 11.4134C7.63188 12.02 8.00017 12.5712 8.46447 13.0355C8.92876 13.4998 9.47995 13.8681 10.0866 14.1194C10.6932 14.3707 11.3434 14.5 12 14.5C12.6566 14.5 13.3068 14.3707 13.9134 14.1194C14.52 13.8681 15.0712 13.4998 15.5355 13.0355C15.9998 12.5712 16.3681 12.02 16.6194 11.4134C16.8707 10.8068 17 10.1566 17 9.5C17 8.84339 16.8707 8.19321 16.6194 7.58658C16.3681 6.97995 15.9998 6.42876 15.5355 5.96447C15.0712 5.50017 14.52 5.13188 13.9134 4.8806C13.3068 4.62933 12.6566 4.5 12 4.5C11.3434 4.5 10.6932 4.62933 10.0866 4.8806C9.47995 5.13188 8.92876 5.50017 8.46447 5.96447C8.00017 6.42876 7.63188 6.97995 7.3806 7.58658C7.12933 8.19321 7 8.84339 7 9.5V9.5Z",stroke:"white",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),Fd=Fd||U.createElement("circle",{cx:12,cy:12,r:11.375,stroke:"white",strokeWidth:1.25}),Pd=Pd||U.createElement("path",{d:"M19.5 20C19.092 19.6069 18.4941 19.2498 17.7403 18.9489C16.9864 18.6481 16.0915 18.4094 15.1066 18.2466C14.1217 18.0838 13.0661 18 12 18C10.9339 18 9.87831 18.0838 8.8934 18.2466C7.90848 18.4094 7.01357 18.6481 6.25975 18.9489C5.50593 19.2498 4.90796 19.6069 4.5 20",stroke:"white",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}))});n.p;var zd=function(){var e="w-9 h-9 sm:w-[40px] sm:h-[40px]";return Object(S.jsx)("figure",{className:"relative ".concat(e),children:Object(S.jsx)("div",{className:"flex items-center justify-center rounded-full bg-[rgba(0,0,0,0.085)] dark:bg-[rgba(255,255,255,0.15)] ".concat(e),children:Object(S.jsx)(Ld,{className:"stroke-white opacity-80"})})})},_d=function(e){function o(e,t,n){return Math.floor(e%(n-t)+t)}var i=e.comment,t=Object(U.useContext)(O),a=t.member,s=t.avatarSaturation,n="w-9 h-9 sm:w-[40px] sm:h-[40px]",t=null!==(e=null==a?void 0:a.name)&&void 0!==e?e:null==i||null===(r=i.member)||void 0===r?void 0:r.name,e=i?i.member:a,r={background:(r=function(){var e=i?i.member:a;if(!e||!e.name)return[0,0,10];var t=isNaN(s)?50:s,n=[0,360],r=Math.round(t/(100/30))+30,r=[r-20,r],e=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return Math.abs(t)}(e.name);return[o(e,n[0],n[1]),t,o(e,r[0],r[1])]}(),"hsl(".concat(r[0],", ").concat(r[1],"%, ").concat(r[2],"%)"))},e=Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsx)("div",{className:"flex items-center justify-center rounded-full ".concat(n),style:r,children:Object(S.jsx)("p",{className:"font-sans text-lg font-semibold text-white",children:function(){if(i&&!i.member)return X("Deleted member");var e=i?i.member:a;return e&&e.name?X(e.name):X("Anonymous")}()})}):Object(S.jsx)("div",{className:"flex items-center justify-center rounded-full bg-neutral-900 dark:bg-[rgba(255,255,255,0.7)] ".concat(n),children:Object(S.jsx)(Ld,{className:"stroke-white dark:stroke-[rgba(0,0,0,0.6)]"})}),e&&Object(S.jsx)("img",{className:"absolute top-0 left-0 rounded-full ".concat(n),src:e.avatar_image,alt:"Avatar"})]});return Object(S.jsx)("figure",{className:"relative ".concat(n),children:e})};function Vd(e){var t=e.submit,n=e.progress,r=e.setProgress,o=e.close,i=e.reduced,a=e.isOpen,s=e.editor,u=e.submitText,l=e.submitSize,e=null;"sending"===n&&(u=null,e=Object(S.jsx)(Rd,{className:"h-[24px] w-[24px] fill-white dark:fill-black"}));var n=Object(U.useCallback)(function(e){null!=s&&s.isFocused&&e.stopPropagation()},[s]),c=Object(U.useCallback)(g(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.isEmpty)return e.abrupt("return");e.next=2;break;case 2:return r("sending"),e.prev=3,e.next=6,t({html:s.getHTML()});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),r("error"),e.abrupt("return");case 12:return o?o():(r("sent"),s.chain().clearContent().blur().run()),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,null,[[3,8]])})),[r,s,t,o]);return Object(U.useEffect)(function(){function e(e){e.metaKey||e.ctrlKey?"Enter"===e.key&&null!=s&&s.isFocused&&(c(),null==s||s.commands.blur()):"Escape"!==e.key||null!=s&&s.isFocused&&(o?o():null==s||s.commands.blur())}return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e,{passive:!0})}},[s,o,c]),Object(S.jsxs)("div",{className:"relative w-full pl-[52px] transition-[padding] delay-100 duration-150 ".concat(i&&"pl-0"," ").concat(a&&"pt-[64px] pl-[1px] sm:pl-[52px]"),children:[Object(S.jsx)("div",{className:"w-full rounded-md border border-none border-slate-50 bg-[rgba(255,255,255,0.9)] px-3 py-4 font-sans text-[16.5px] leading-normal shadow-form transition-all delay-100 duration-150 hover:shadow-formxl focus:outline-0 dark:border-none dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-300 dark:shadow-transparent ".concat(a?"min-h-[144px] cursor-text pb-[68px] pt-2":"min-h-[48px] cursor-pointer overflow-hidden hover:border-slate-300","\n            "),children:Object(S.jsx)(Yl,{onMouseDown:n,onTouchStart:n,editor:s})}),Object(S.jsxs)("div",{className:"absolute right-[9px] bottom-[9px] flex space-x-4 transition-[opacity] duration-150",children:[o&&Object(S.jsx)("button",{type:"button",onClick:o,className:"ml-2.5 font-sans text-sm font-medium text-neutral-500 outline-0 dark:text-neutral-400",children:"Annulla"}),Object(S.jsxs)("button",{className:"flex w-auto items-center justify-center sm:w-[128px] ".concat("medium"===l&&"sm:w-[100px]"," ").concat("small"===l&&"sm:w-[64px]"," h-[39px] rounded-[6px] border bg-neutral-900 py-2 px-3 text-center font-sans text-sm font-semibold text-white outline-0 transition-[opacity] duration-150 dark:bg-[rgba(255,255,255,0.9)] dark:text-neutral-800"),type:"button","data-testid":"submit-form-button",onClick:c,children:[Object(S.jsx)("span",{children:e}),u&&Object(S.jsx)("span",{children:u})]})]})]})}function $d(e){var t=e.show,n=e.name,r=e.expertise,o=e.editName,e=e.editExpertise;return Object(S.jsxs)(Ed,{show:t,enter:"transition duration-500 delay-100 ease-in-out",enterFrom:"opacity-0 -translate-x-2",enterTo:"opacity-100 translate-x-0",leave:"transition-none duration-0",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[Object(S.jsx)("div",{className:"font-sans text-[17px] font-bold tracking-tight text-[rgb(23,23,23)] dark:text-[rgba(255,255,255,0.85)]",onClick:o,"data-testid":"member-name",children:n||"Anonymous"}),Object(S.jsx)("div",{className:"flex items-baseline justify-start",children:Object(S.jsxs)("button",{type:"button",className:"group flex max-w-[80%] items-center justify-start whitespace-nowrap text-left font-sans text-[14px] tracking-tight text-[rgba(0,0,0,0.5)] transition duration-150 hover:text-[rgba(0,0,0,0.75)] dark:text-[rgba(255,255,255,0.5)] dark:hover:text-[rgba(255,255,255,0.4)] sm:max-w-[90%] ".concat(!r&&"text-[rgba(0,0,0,0.3)] hover:text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.3)]"),onClick:e,children:[Object(S.jsx)("span",{className:"... overflow-hidden text-ellipsis",children:r||"Aggiungi qualifica"}),r&&Object(S.jsx)(jd,{className:"ml-1 h-[12px] w-[12px] -translate-x-[6px] stroke-[rgba(0,0,0,0.5)] opacity-0 transition-all duration-100 ease-out group-hover:translate-x-0 group-hover:stroke-[rgba(0,0,0,0.75)] group-hover:opacity-100 dark:stroke-[rgba(255,255,255,0.5)] dark:group-hover:stroke-[rgba(255,255,255,0.3)]"})]})})]})}function Hd(e){var t=e.comment,n=e.submit,r=e.submitText,o=e.submitSize,i=e.close,a=e.editor,s=e.reduced,u=e.isOpen,l=Object(U.useContext)(O),c=l.member,f=l.dispatchAction,e="addDetailsPopup"===(null==(p=Object(U.useContext)(O).popup)?void 0:p.type),d=(l=q(Object(U.useState)("default"),2))[0],p=l[1],h=Object(U.useRef)(null),m=null!==(l=null==c?void 0:c.name)&&void 0!==l?l:null==t||null===(v=t.member)||void 0===v?void 0:v.name,c=null!==(v=null==c?void 0:c.expertise)&&void 0!==v?v:null==t||null===(b=t.member)||void 0===b?void 0:b.expertise;("sending"===d||m&&e)&&(u=!0);var v=function(e){null!=a&&a.isFocused&&e.preventDefault()},g=Object(U.useCallback)(function(e){var t;null==a||null===(t=a.commands)||void 0===t||t.blur(),f("openPopup",{type:"addDetailsPopup",expertiseAutofocus:null!==(e=e.expertiseAutofocus)&&void 0!==e&&e,callback:function(e){a&&h.current&&e&&(a.setEditable(!0),a.commands.focus())}})},[a,f,h]),y=Object(U.useCallback)(function(){g({expertiseAutofocus:!1})},[g]),b=Object(U.useCallback)(function(){g({expertiseAutofocus:!0})},[g]),e=Object(U.useCallback)(function(){a.isFocused||(m?a.commands.focus():y())},[a,y,m]);return Object(U.useEffect)(function(){a&&a.setEditable(!!m&&"sending"!==d)},[a,m,d]),Object(S.jsx)("form",{ref:h,"data-testid":"form",onClick:e,onMouseDown:v,onTouchStart:v,className:"-mx-3 -mt-[14px] mb-10 rounded-md px-3 pt-3 pb-2 transition duration-200 ".concat(u?"cursor-default":"cursor-pointer"," ").concat(s&&"pl-1","\n        "),children:Object(S.jsxs)("div",{className:"relative w-full",children:[Object(S.jsx)("div",{className:"pr-[1px] font-sans leading-normal dark:text-neutral-300",children:Object(S.jsx)(Vd,{close:i,reduced:s,isOpen:u,editor:a,submitText:r,submitSize:o,submit:n,setProgress:p,progress:d})}),Object(S.jsxs)("div",{className:"absolute top-1 left-0 flex h-12 w-full items-center justify-start",children:[Object(S.jsx)("div",{className:"mr-3 grow-0",children:Object(S.jsx)(_d,{comment:t,className:"pointer-events-none"})}),Object(S.jsx)("div",{className:"grow-1 w-full",children:Object(S.jsx)($d,{show:u,name:m,expertise:c,editExpertise:b,editName:y})})]})]})})}function Ud(e){e.commentsCount;var t,n=Object(U.useContext)(O),r=n.postId,o=n.dispatchAction,i=tc(p({},Ff({placeholder:"Lascia un commento!",autofocus:!1}))),e=Object(U.useCallback)((t=g(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.html,e.next=3,o("addComment",{post_id:r,status:"published",html:n});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[r,o]),a=Object(U.useRef)(null);return Object(U.useEffect)(function(){if(i){var e=function(e){if(i&&!e.metaKey&&!e.ctrlKey){for(var t=document.activeElement;t&&"IFRAME"===t.tagName&&t.contentDocument;)t=t.contentDocument.activeElement;var n=t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"IFRAME"===t.tagName||"true"===t.contentEditable);return"c"!==e.key||null!=i&&i.isFocused||n?void 0:(null==i||i.commands.focus(),void(a.current&&ee(a.current)))}};return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e,{passive:!0})}}},[i]),n={submitText:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"hidden sm:inline",children:"Invia "}),Object(S.jsx)("span",{className:"capitalize sm:normal-case",children:"Invia"})]}),submitSize:"large",submit:e},e=null!==(e=null==i?void 0:i.isFocused)&&void 0!==e&&e,Object(S.jsx)("div",{className:"-mt-[4px]",ref:a,"data-testid":"main-form",children:Object(S.jsx)(Hd,p({editor:i,reduced:!1,isOpen:e},n))})}var Wd,qd=["title","titleId"];function Jd(){return(Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Kd=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,qd);return U.createElement("svg",Jd({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"black",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Wd=Wd||U.createElement("path",{d:"M8.00025 13.8739L2.46073 8.09636C1.97388 7.60989 1.65255 6.98248 1.54231 6.30312C1.43208 5.62376 1.53853 4.92694 1.84658 4.31148V4.31148C2.07887 3.84703 2.41819 3.44443 2.83659 3.13684C3.25499 2.82925 3.74049 2.62547 4.25308 2.54231C4.76567 2.45914 5.29069 2.49896 5.78488 2.65849C6.27906 2.81802 6.72827 3.09269 7.09549 3.45987L8.00025 4.36406L8.90502 3.45987C9.27224 3.09269 9.72145 2.81802 10.2156 2.65849C10.7098 2.49896 11.2348 2.45914 11.7474 2.54231C12.26 2.62547 12.7455 2.82925 13.1639 3.13684C13.5823 3.44443 13.9216 3.84703 14.1539 4.31148C14.4616 4.9267 14.5678 5.62311 14.4577 6.30208C14.3476 6.98105 14.0267 7.60817 13.5404 8.09462L8.00025 13.8739Z",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}))});n.p;var Qd,Gd=function(e){var t=e.comment,n=Object(U.useContext)(O),r=n.dispatchAction,o=n.member,i=n.commentsEnabled,e=q(Object(U.useState)(""),2),n=e[0],a=e[1],e="paid"===i,i=o&&!!o.paid,s=o&&(i||!e),i=s?"button":"span",e=s?"cursor-pointer":"cursor-text";return Object(S.jsxs)(i,{type:"button",className:"group duration-50 flex items-center font-sans text-sm outline-0 transition-all ease-linear ".concat(t.liked?"text-[rgba(0,0,0,0.9)] dark:text-[rgba(255,255,255,0.9)]":"text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]"," ").concat(!t.liked&&s&&"hover:text-[rgba(0,0,0,0.75)] hover:dark:text-[rgba(255,255,255,0.25)]"," ").concat(e),onClick:function(){s&&(t.liked?r("unlikeComment",t):(r("likeComment",t),a("animate-heartbeat"),setTimeout(function(){a("")},400)))},"data-testid":"like-button",children:[Object(S.jsx)(Kd,{className:n+" mr-[6px] ".concat(t.liked?"fill-[rgba(0,0,0,0.9)] stroke-[rgba(0,0,0,0.9)] dark:fill-[rgba(255,255,255,0.9)] dark:stroke-[rgba(255,255,255,0.9)]":"stroke-[rgba(0,0,0,0.5)] dark:stroke-[rgba(255,255,255,0.5)]"," ").concat(!t.liked&&s&&"group-hover:stroke-[rgba(0,0,0,0.75)] dark:group-hover:stroke-[rgba(255,255,255,0.25)]"," transition duration-50 ease-linear")}),t.count.likes]})},Yd=["title","titleId"];function Xd(){return(Xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zd=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Yd);return U.createElement("svg",Xd({width:16,height:16,viewBox:"0 0 16 16",fill:"none",stroke:"black",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Qd=Qd||U.createElement("path",{d:"M7.17463 2.98741C7.17439 2.7888 7.11434 2.59487 7.00229 2.43088C6.89025 2.26689 6.73141 2.14046 6.54647 2.06805C6.36153 1.99564 6.15907 1.98061 5.96546 2.02492C5.77186 2.06923 5.5961 2.17083 5.46107 2.31648L1.86192 6.21418C1.69351 6.39677 1.60001 6.63606 1.60001 6.88445C1.60001 7.13284 1.69351 7.37213 1.86192 7.55472L5.45909 11.4524C5.59412 11.5981 5.76988 11.6997 5.96349 11.744C6.15709 11.7883 6.35955 11.7733 6.54449 11.7009C6.72943 11.6284 6.88827 11.502 7.00032 11.338C7.11236 11.174 7.17242 10.9801 7.17265 10.7815V8.86164H9.12703C10.438 8.86164 11.6953 9.38241 12.6222 10.3094C13.5492 11.2364 14.07 12.4937 14.07 13.8046V9.85023C14.07 8.53927 13.5492 7.28201 12.6222 6.35502C11.6953 5.42803 10.438 4.90726 9.12703 4.90726H7.17265L7.17463 2.98741Z",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}))});n.p;function ep(e){var t=e.comment,n=e.close,r=Object(U.useContext)(O).dispatchAction,e="published"!==t.status;return Object(S.jsx)("div",{className:"flex flex-col",children:e?Object(S.jsxs)("button",{type:"button",className:"w-full text-left text-[14px]",onClick:function(){r("showComment",t),n()},children:[Object(S.jsx)("span",{children:"Mostra "}),Object(S.jsx)("span",{className:"hidden sm:inline",children:"commento"})]}):Object(S.jsxs)("button",{type:"button",className:"w-full text-left text-[14px]",onClick:function(){r("hideComment",t),n()},children:[Object(S.jsx)("span",{children:"Nascondi "}),Object(S.jsx)("span",{className:"hidden sm:inline",children:"commento"})]})})}function tp(e){var t=e.comment,n=e.close,e=e.toggleEdit,r=Object(U.useContext)(O).dispatchAction;return Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("button",{type:"button",className:"mb-3 w-full text-left text-[14px]",onClick:e,"data-testid":"edit",children:"Modifica"}),Object(S.jsx)("button",{type:"button",className:"w-full text-left text-[14px] text-red-600",onClick:function(e){r("deleteComment",t),n()},children:"Elimina"})]})}function np(e){var t=e.comment,n=e.close,r=Object(U.useContext)(O).dispatchAction;return Object(S.jsx)("div",{className:"flex flex-col",children:Object(S.jsxs)("button",{type:"button",className:"w-full text-left text-[14px]",onClick:function(){r("openPopup",{type:"reportPopup",comment:t}),n()},children:[Object(S.jsx)("span",{children:"Segnala "}),Object(S.jsx)("span",{className:"hidden sm:inline",children:""})]})})}function rp(e){var t=e.comment,o=e.close,n=e.toggleEdit,e=(r=Object(U.useContext)(O)).member,r=r.admin,i=e&&(null===(i=t.member)||void 0===i?void 0:i.uuid)===(null==e?void 0:e.uuid),e=!!r,a=Object(U.useRef)();if(Object(U.useEffect)(function(){function e(){o()}var t,n;window.addEventListener("click",e,{passive:!0});var r=null===(t=a.current)||void 0===t||null===(n=t.ownerDocument)||void 0===n?void 0:n.defaultView;return r&&r!==window&&r.addEventListener("click",e,{passive:!0}),function(){window.removeEventListener("click",e,{passive:!0}),r&&r!==window&&r.removeEventListener("click",e,{passive:!0})}},[o]),Object(U.useEffect)(function(){function e(e){"Escape"===e.key&&o()}return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e,{passive:!0})}},[o]),r=null,"published"===t.status)r=i?Object(S.jsx)(tp,{comment:t,close:o,toggleEdit:n}):e?Object(S.jsx)(ep,{comment:t,close:o}):Object(S.jsx)(np,{comment:t,close:o});else{if(!e)return null;r=Object(S.jsx)(ep,{comment:t,close:o})}return Object(S.jsx)("div",{ref:a,onClick:function(e){e.stopPropagation()},children:Object(S.jsx)("div",{className:"absolute z-10 min-w-min whitespace-nowrap rounded bg-white py-3 pl-4 pr-8 font-sans text-sm shadow-lg outline-0 dark:bg-zinc-900 dark:text-white sm:min-w-[150px]",children:r})})}var op,ip,ap,sp=function(e){var t=e.disabled,n=e.isReplying,e=e.toggleReply;return Object(U.useContext)(O).member?Object(S.jsxs)("button",{disabled:!!t,type:"button",className:"group duration-50 flex items-center font-sans text-sm outline-0 transition-all ease-linear ".concat(n?"text-[rgba(0,0,0,0.9)] dark:text-[rgba(255,255,255,0.9)]":"text-[rgba(0,0,0,0.5)] hover:text-[rgba(0,0,0,0.75)] dark:text-[rgba(255,255,255,0.5)] dark:hover:text-[rgba(255,255,255,0.25)]"),onClick:e,"data-testid":"reply-button",children:[Object(S.jsx)(Zd,{className:"mr-[6px] ".concat(n?"fill-[rgba(0,0,0,0.9)] stroke-[rgba(0,0,0,0.9)] dark:fill-[rgba(255,255,255,0.9)] dark:stroke-[rgba(255,255,255,0.9)]":"stroke-[rgba(0,0,0,0.5)] group-hover:stroke-[rgba(0,0,0,0.75)] dark:stroke-[rgba(255,255,255,0.5)] dark:group-hover:stroke-[rgba(255,255,255,0.25)]"," duration-50 transition ease-linear")}),"Rispondi"]}):null},up=["title","titleId"];function lp(){return(lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function cp(e){var t=e.loadMore,e=e.count;return Object(S.jsx)("div",{className:"flex w-full items-center justify-start",children:Object(S.jsx)("button",{type:"button",className:"group ml-[48px] mb-10 flex w-auto items-center px-0 pt-0 pb-2 text-left font-sans text-md font-semibold text-neutral-700 dark:text-white sm:mb-12 ",onClick:t,"data-testid":"reply-pagination-button",children:Object(S.jsxs)("span",{className:"flex h-[39px] w-auto items-center justify-center whitespace-nowrap rounded-[6px] bg-[rgba(0,0,0,0.05)] py-2 px-4 text-center font-sans text-sm font-semibold text-neutral-700 outline-0 transition-[opacity,background] duration-150 hover:bg-[rgba(0,0,0,0.1)] dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-100 dark:hover:bg-[rgba(255,255,255,0.1)]",children:[" Show ",e," more ",1===e?"reply":"replies"]})})})}function fp(e){var t,n=e.editor,r=e.submit,o=e.close,i=e.closeIfNotChanged,a=e.submitText,s=e.submitSize,u=(e=Object(U.useContext)(O)).dispatchAction,l=e.secundaryFormCount;return Object(U.useEffect)(function(){return u("increaseSecundaryFormCount"),function(){u("decreaseSecundaryFormCount")}},[u]),e=[l],t=Object(U.useRef)(0),Object(U.useEffect)(function(){2<=t.current?1<l&&i():t.current+=1},e),e=Z(),Object(S.jsx)("div",{className:"-mt-[20px]",children:Object(S.jsx)(Hd,{editor:n,submit:r,close:o,submitText:a,submitSize:s,reduced:e,isOpen:!0})})}function dp(e){var r=e.comment,o=e.parent,t=e.close,i=Object(U.useContext)(O).dispatchAction,n={placeholder:"Edit this comment",autofocus:!1,content:r.html},a=tc(p({},Ff(n)));Object(U.useEffect)(function(){a&&a.chain().focus().command(function(e){var t=e.tr;return e.commands.setTextSelection({from:t.doc.content.size,to:t.doc.content.size})}).run()},[a]);var s,e={submitText:"Salva",submitSize:"small",submit:Object(U.useCallback)((s=g(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.html,e.next=3,i("editComment",{comment:{id:r.id,html:n},parent:o});case 3:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),[o,r,i])},n=Object(U.useCallback)(function(){(null==a?void 0:a.getHTML())===r.html&&t()},[a,t,r.html]);return Object(S.jsx)(fp,p({editor:a,close:t,closeIfNotChanged:n},e))}var pp=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,up);return U.createElement("svg",lp({width:16,height:16,viewBox:"0 0 16 16",fill:"black",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,op=op||U.createElement("path",{d:"M3 12C3.82843 12 4.5 11.3284 4.5 10.5C4.5 9.67157 3.82843 9 3 9C2.17157 9 1.5 9.67157 1.5 10.5C1.5 11.3284 2.17157 12 3 12Z"}),ip=ip||U.createElement("path",{d:"M8 12C8.82843 12 9.5 11.3284 9.5 10.5C9.5 9.67157 8.82843 9 8 9C7.17157 9 6.5 9.67157 6.5 10.5C6.5 11.3284 7.17157 12 8 12Z"}),ap=ap||U.createElement("path",{d:"M13 12C13.8284 12 14.5 11.3284 14.5 10.5C14.5 9.67157 13.8284 9 13 9C12.1716 9 11.5 9.67157 11.5 10.5C11.5 11.3284 12.1716 12 13 12Z"}))}),hp=(n.p,function(e){var t=e.comment,n=e.toggleEdit,r=q(Object(U.useState)(!1),2),o=r[0],i=r[1],e=Object(U.useContext)(O),r=e.member,e=e.admin,e=!!r&&"published"===t.status||!!e;return r?Object(S.jsxs)("div",{className:"relative","data-testid":"more-button",children:[e?Object(S.jsx)("button",{type:"button",onClick:function(){i(function(e){return!e})},className:"outline-0",children:Object(S.jsx)(pp,{className:"duration-50 gh-comments-icon gh-comments-icon-more fill-[rgba(0,0,0,0.5)] outline-0 transition ease-linear hover:fill-[rgba(0,0,0,0.75)] dark:fill-[rgba(255,255,255,0.5)] dark:hover:fill-[rgba(255,255,255,0.25)]"})}):null,o?Object(S.jsx)(rp,{comment:t,close:function(){i(!1)},toggleEdit:n}):null]}):null}),mp=function(e){var t=e.comment,n=Object(U.useContext)(O).dispatchAction,e=t.count.replies-t.replies.length;return Object(S.jsxs)("div",{children:[t.replies.map(function(e){return Object(S.jsx)(_p,{comment:e,parent:t,isReply:!0},e.id)}),0<e&&Object(S.jsx)(cp,{count:e,loadMore:function(){n("loadMoreReplies",{comment:t})}})]})},vp=function(e){var t,n,r,o,i=e.parent,a=e.close,s=Object(U.useContext)(O),u=s.postId,l=s.dispatchAction,e=q((n=ee,r=Object(U.useRef)(null),o=Object(U.useCallback)(function(e){r.current,e&&n&&n(e),r.current=e},[n,void 0]),[r,o]),2)[1],c=tc(p({},Ff({placeholder:"Rispondi al commento",autofocus:!0}))),s=Object(U.useCallback)((t=g(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.html,e.next=3,l("addReply",{parent:i,reply:{post_id:u,status:"published",html:n}});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[i,u,l]),o={submitText:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"hidden sm:inline",children:"Rispondi "}),Object(S.jsx)("span",{className:"capitalize sm:normal-case",children:""})]}),submitSize:"medium",submit:s},s=Object(U.useCallback)(function(){null!=c&&c.isEmpty&&a()},[c,a]);return Object(S.jsx)("div",{ref:e,children:Object(S.jsx)(fp,p({close:a,closeIfNotChanged:s,editor:c},o))})};function gp(e){var t=e.comment,n=e.parent,r=q(Object(U.useState)(!1),2),e=r[0],o=r[1];return e?Object(S.jsx)(dp,{comment:t,close:function(){o(!1)},parent:n}):Object(S.jsx)(yp,{comment:t,openEditMode:function(){o(!0)},parent:n})}function yp(e){var t=e.comment,n=e.parent,e=e.openEditMode;return"published"===t.status?Object(S.jsx)(bp,{comment:t,parent:n,openEditMode:e}):Object(S.jsx)(kp,{comment:t,openEditMode:e})}function bp(e){var t,n=e.comment,r=e.parent,o=e.openEditMode,i=q(Object(U.useState)(!1),2),a=i[0],s=i[1],u=Object(U.useContext)(O).dispatchAction,l=(t=g(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return e.next=3,u("loadMoreReplies",{comment:n,limit:"all"});case 3:s(function(e){return!e});case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),e=a||n.replies&&0<n.replies.length,i=Object(S.jsx)(_d,{comment:n});return Object(S.jsxs)(Mp,{hasReplies:e,avatar:i,children:[Object(S.jsx)(Op,{comment:n}),Object(S.jsx)(Sp,{html:n.html}),Object(S.jsx)(Ap,{comment:n,parent:r,isInReplyMode:a,toggleReplyMode:l,openEditMode:o}),Object(S.jsx)(Dp,{comment:n}),Object(S.jsx)(Cp,{comment:n,isInReplyMode:a,closeReplyMode:function(){s(!1)}})]})}function kp(e){var t=e.comment,n=e.openEditMode,r=Object(U.useContext)(O).admin&&"hidden"===t.status?"Questo commento  stato nascosto.":"Questo commento  stato rimosso.",o=Object(S.jsx)(zd,{}),e=t.replies&&0<t.replies.length;return Object(S.jsxs)(Mp,{hasReplies:e,avatar:o,children:[Object(S.jsx)("div",{className:"-mt-[3px] mb-2 flex items-start",children:Object(S.jsxs)("div",{className:"flex h-12 flex-row items-center gap-4 pb-[8px] pr-4",children:[Object(S.jsx)("p",{className:"mt-[4px] font-sans text-[16px] italic leading-normal text-[rgba(0,0,0,0.2)] dark:text-[rgba(255,255,255,0.35)]",children:r}),Object(S.jsx)("div",{className:"mt-[4px]",children:Object(S.jsx)(hp,{comment:t,toggleEdit:n})})]})}),Object(S.jsx)(Dp,{comment:t})]})}function wp(e){var t=e.comment,e=Object(U.useContext)(O).member,n=e&&t.member&&t.member.uuid===e.uuid?e.expertise:null==t||null===(n=t.member)||void 0===n?void 0:n.expertise;return n?Object(S.jsxs)("span",{children:[n,Object(S.jsx)("span",{className:"mx-[0.3em]",children:""})]}):null}function xp(e){return e.comment.edited_at?Object(S.jsxs)("span",{children:[Object(S.jsx)("span",{className:"mx-[0.3em]",children:""}),"Modificato"]}):null}function Dp(e){e=e.comment;return e.replies&&0<e.replies.length?Object(S.jsx)("div",{className:"mt-10 mb-4 sm:mb-0",children:Object(S.jsx)(mp,{comment:e})}):null}function Cp(e){var t=e.comment,n=e.isInReplyMode,e=e.closeReplyMode;return n?Object(S.jsx)("div",{className:"my-10",children:Object(S.jsx)(vp,{parent:t,close:e})}):null}function Ep(e){e=e.comment,e=e.member?e.member.name||"Anonymous":"Deleted member";return Object(S.jsx)("h4",{className:"text-[rgb(23,23,23] font-sans text-[17px] font-bold tracking-tight dark:text-[rgba(255,255,255,0.85)]",children:e})}function Op(e){var r,t,n,o,i,a=e.comment,s=(r=a.created_at,Object(U.useMemo)(function(){var e=new Date(r),t=new Date,n=Math.round((t.getTime()-e.getTime())/1e3);if(n<5)return"Appena adesso";if(n<60)return"".concat(n," secondi fa");if((n/=60)<60)return 1===Math.floor(n)?"Un minuto fa":"".concat(Math.floor(n)," minuti fa");t=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()?"Ieri":(n/=60)<24?1===Math.floor(n)?"Un'ora fa":"".concat(Math.floor(n)," ore fa"):(n/=24)<7?1===Math.floor(n)?"Un giorno fa":"".concat(Math.floor(n)," giorni fa"):(n/=7,1===Math.floor(n)?"Una settimana fa":"".concat(Math.floor(n)," settimane fa"))},[r]));return Object(S.jsx)("div",{className:"-mt-[3px] mb-2 flex items-start",children:Object(S.jsxs)("div",{children:[Object(S.jsx)(Ep,{comment:a}),Object(S.jsx)("div",{className:"flex items-baseline pr-4 font-sans text-[14px] tracking-tight text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]",children:Object(S.jsxs)("span",{children:[Object(S.jsx)(wp,{comment:a}),Object(S.jsx)("span",{title:(t=a.created_at,n=(i=new Date(t)).toLocaleDateString("en-us",{day:"2-digit"}),o=i.toLocaleString("en-us",{month:"short"}),e=i.getFullYear(),t=(i.getHours()<10?"0":"")+i.getHours(),i=(i.getMinutes()<10?"0":"")+i.getMinutes(),"".concat(n," ").concat(o," ").concat(e," ").concat(t,":").concat(i)),children:s}),Object(S.jsx)(xp,{comment:a})]})})]})})}function Sp(e){e={__html:e.html};return Object(S.jsx)("div",{className:"mt mb-2 flex flex-row items-center gap-4 pr-4",children:Object(S.jsx)("p",{dangerouslySetInnerHTML:e,className:"gh-comment-content font-sans text-[16px] leading-normal text-neutral-900 dark:text-[rgba(255,255,255,0.85)]","data-testid":"comment-content"})})}function Ap(e){var t=e.comment,n=e.toggleReplyMode,r=e.isInReplyMode,o=e.openEditMode,i=e.parent,a=Object(U.useContext)(O),s=a.member,e="paid"===a.commentsEnabled,a=s&&!!s.paid,i=s&&(a||!e)&&!i;return Object(S.jsxs)("div",{className:"flex items-center gap-5",children:[Object(S.jsx)(Gd,{comment:t}),i&&Object(S.jsx)(sp,{comment:t,toggleReply:n,isReplying:r}),Object(S.jsx)(hp,{comment:t,toggleEdit:o})]})}function jp(e){return e.hasReplies?Object(S.jsx)("div",{className:"mb-2 h-full w-[3px] grow rounded bg-gradient-to-b from-[rgba(0,0,0,0.05)] via-[rgba(0,0,0,0.05)] to-transparent dark:from-[rgba(255,255,255,0.08)] dark:via-[rgba(255,255,255,0.08)]"}):null}function Mp(e){var t=e.children,n=e.avatar,e=e.hasReplies;return Object(S.jsxs)("div",{className:"flex w-full flex-row ".concat(!0===e?"mb-0":"mb-10"),"data-testid":"comment-component",children:[Object(S.jsxs)("div",{className:"mr-3 flex flex-col items-center justify-start",children:[Object(S.jsx)("div",{className:"flex-0 mb-4",children:n}),Object(S.jsx)(jp,{hasReplies:e})]}),Object(S.jsx)("div",{className:"grow",children:t})]})}function Np(){var e=Object(U.useContext)(O),t=e.pagination,n=e.dispatchAction;return!t||(t=t.total-t.page*t.limit)<=0?null:Object(S.jsx)("button",{"data-testid":"pagination-component",type:"button",className:"group mb-10 flex w-full items-center px-0 pt-0 pb-2 text-left font-sans text-md font-semibold text-neutral-700 dark:text-white",onClick:function(){n("loadMoreComments")},children:Object(S.jsxs)("span",{className:"flex h-[39px] w-full items-center justify-center whitespace-nowrap rounded-[6px] bg-[rgba(0,0,0,0.05)] py-2 px-3 text-center font-sans text-sm font-semibold text-neutral-700 outline-0 transition-[opacity,background] duration-150 hover:bg-[rgba(0,0,0,0.1)] dark:bg-[rgba(255,255,255,0.08)] dark:text-neutral-100 dark:hover:bg-[rgba(255,255,255,0.1)]",children:[" Mostra",t," precedente ",1==t?"commento":"commenti"]})})}function Tp(e){var t=e.showCount,e=e.count;return t?1===e?Object(S.jsx)("div",{className:"text-[1.6rem] text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]",children:"1 comment"}):Object(S.jsxs)("div",{className:"text-[1.6rem] text-[rgba(0,0,0,0.5)] dark:text-[rgba(255,255,255,0.5)]",children:[e," comments"]}):null}function Fp(e){return null===(e=e.title)?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"hidden sm:inline",children:"Member "}),Object(S.jsx)("span",{className:"capitalize sm:normal-case",children:"discussion"})]}):e}function Pp(e){var t=e.title,n=e.showCount,e=e.count;return t||n||null===t?Object(S.jsxs)("div",{className:"mb-8 flex w-full items-baseline justify-between font-sans",children:[Object(S.jsx)("h2",{className:"text-[2.8rem] font-bold tracking-tight dark:text-[rgba(255,255,255,0.85)]",children:Object(S.jsx)(Fp,{title:t})}),Object(S.jsx)(Tp,{count:e,showCount:n})]}):null}function Rp(){var e=(u=Object(U.useContext)(O)).pagination,t=u.member,n=u.comments,r=u.commentCount,o=u.commentsEnabled,i=u.title,a=u.showCount,s=u.secundaryFormCount,u=n.slice().reverse().map(function(e){return Object(S.jsx)(_p,{comment:e},e.id)}),n="paid"===o,o=t&&!!t.paid;return Object(U.useEffect)(function(){var e=document.getElementById(oe);e&&"#ghost-comments"===window.location.hash&&0===window.scrollY&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.scrollIntoView()})})},[]),s=0<s,Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Pp,{title:i,showCount:a,count:r}),Object(S.jsx)(Np,{}),Object(S.jsx)("div",{className:e?"":"mt-4","data-test":"comment-elements",children:u}),Object(S.jsx)("div",{children:s?null:!t||!o&&n?Object(S.jsx)(ne,{isFirst:0===(null==e?void 0:e.total),isPaid:n}):Object(S.jsx)(Ud,{commentsCount:r})})]})}function Bp(){return Object(S.jsx)("div",{className:"flex h-32 w-full items-center justify-center",children:Object(S.jsx)(Rd,{className:"mb-6 h-12 w-12 fill-[rgb(225,225,225,0.9)] dark:fill-[rgba(255,255,255,0.6)]"})})}function Ip(e){function n(e,t,n){return.2126*(n=[e,t,n].map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}))[0]+.7152*n[1]+.0722*n[2]}var t=e.done,e=(o=Object(U.useContext)(O)).accentColor,r=o.colorScheme,o=function(){if("light"!==r){if("dark"===r)return 1;var e=getComputedStyle(document.getElementById(oe).parentNode).getPropertyValue("color"),e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/);return function(e,t){e=n(e[0],e[1],e[2]),t=n(t[0],t[1],t[2]);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}([255,255,255],[e[0],e[1],e[2]])<5}}()?"dark":"",e={"--gh-accent-color":null!=e?e:"blue",paddingTop:0,paddingBottom:24};return Object(S.jsx)("section",{className:"ghost-display "+o,style:e,"data-testid":"content-box",children:t?Object(S.jsx)(Rp,{}):Object(S.jsx)(Bp,{})})}var Lp,zp,_p=function(e){var t=e.comment,e=e.parent;return Object(S.jsx)(Ed,{appear:!0,show:!0,enter:"transition-opacity duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(S.jsx)(gp,{comment:t,parent:e})})},Vp=["title","titleId"];function $p(){return($p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Hp,Up=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Vp);return U.createElement("svg",$p({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"gh-portal-closeicon",alt:"Close",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Lp=Lp||U.createElement("defs",null,U.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.2px !important;}")),zp=zp||U.createElement("path",{className:"a",d:"M.75 23.249l22.5-22.5M23.25 23.249L.75.749"}))}),Wp=(n.p,function(e){return Object(S.jsx)("button",{type:"button",className:"absolute top-6 right-6 opacity-20 transition-opacity duration-100 ease-out hover:opacity-40 sm:top-10 sm:right-8",onClick:e.close,children:Object(S.jsx)(Up,{className:"h-[20px] w-[20px]"})})}),qp=["title","titleId"];function Jp(){return(Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kp(e){function t(e){a("closePopup"),i&&i(!1)}var n=e.show,r=e.children,o=e.title,i=e.callback,a=Object(U.useContext)(O).dispatchAction;return Object(U.useEffect)(function(){function e(e){"Escape"===e.key&&t()}return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e,{passive:!0})}}),Object(S.jsx)(Ed,{show:n,appear:!0,children:Object(S.jsx)(E,{title:o,children:Object(S.jsx)("div",{children:Object(S.jsx)(Ed.Child,{enter:"transition duration-200 linear",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-200 linear",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(S.jsx)("div",{className:"to-rgba(0,0,0,0.1) fixed top-0 left-0 flex h-screen w-screen justify-center overflow-hidden bg-gradient-to-b from-[rgba(0,0,0,0.2)] pt-0 backdrop-blur-[2px] sm:pt-12",onMouseDown:t,children:Object(S.jsx)(Ed.Child,{enter:"transition duration-200 delay-150 linear",enterFrom:"translate-y-4 opacity-0",enterTo:"translate-y-0 opacity-100",leave:"transition duration-200 linear",leaveFrom:"translate-y-0 opacity-100",leaveTo:"translate-y-4 opacity-0",children:r})})})})})})}var Qp=U.forwardRef(function(e,t){var n=e.title,r=e.titleId,e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,qp);return U.createElement("svg",Jp({width:"26px",height:"26px",viewBox:"-1 -1 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},e),n?U.createElement("title",{id:r},n):null,Hp=Hp||U.createElement("g",{id:"check-circle",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},U.createElement("path",{className:"animated-check-circle",d:"M19.6004116,2.71490714 C17.5353801,1.0196018 14.8927356,0 12,0 C5.38938053,0 0,5.38938053 0,12 C0,18.6106195 5.38938053,24 12,24 C18.6106195,24 24,18.6106195 24,12 C24,9.71681416 23.3628319,7.59292035 22.2743363,5.78761062 L11.0442478,17.0442478 L5.49557522,11.4955752",id:"Shape",stroke:"#FFFFFF",strokeWidth:2})))}),Gp=(n.p,{addDetailsPopup:function(t){var n=Object(U.useRef)(null),r=Object(U.useRef)(null),e=Object(U.useContext)(O),o=e.dispatchAction,i=e.member,a=e.accentColor,e=q(Object(U.useState)(null!==(f=i.name)&&void 0!==f?f:""),2),s=e[0],u=e[1],e=q(Object(U.useState)(null!==(f=i.expertise)&&void 0!==f?f:""),2),l=e[0],c=e[1],f=50;i.expertise&&(f-=i.expertise.length);function d(e){o("closePopup"),t.callback(e)}var p,e=q(Object(U.useState)(f),2),i=e[0],h=e[1],f=q(Object(U.useState)({name:"",expertise:""}),2),e=f[0],m=f[1],v=(p=g(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==s.trim())return e.next=3,o("updateMember",{name:s,expertise:l});e.next=6;break;case 3:d(!0),e.next=9;break;case 6:m({name:"Enter your name"}),u(""),null===(t=n.current)||void 0===t||t.focus();case 9:case"end":return e.stop()}},e)})),function(){return p.apply(this,arguments)});return Object(U.useEffect)(function(){if(!Z()){var e=setTimeout(function(){var e;t.expertiseAutofocus?null===(e=r.current)||void 0===e||e.focus():null===(e=n.current)||void 0===e||e.focus()},200);return function(){clearTimeout(e)}}},[n,r,t.expertiseAutofocus]),Object(S.jsx)("div",{className:"rounded-none relative h-screen w-screen overflow-hidden bg-white p-[28px] text-center shadow-modal sm:h-auto sm:w-[720px] sm:rounded-xl sm:p-0",onMouseDown:function(e){e.stopPropagation()},children:Object(S.jsxs)("div",{className:"flex",children:[!Z()&&Object(S.jsx)("div",{className:"flex w-[40%] flex-col items-center justify-center bg-[#1C1C1C]",children:Object(S.jsx)("div",{className:"-mt-[1px] flex flex-col gap-9",children:function(){for(var e,t=[],n=[{avatar:"https://randomuser.me/api/portraits/men/32.jpg",name:"Francesco",expertise:"Pap Part Time"},{avatar:"https://randomuser.me/api/portraits/women/30.jpg",name:"Naomi ",expertise:"Social Media Manager"},{avatar:"https://randomuser.me/api/portraits/men/4.jpg",name:"Alessandro",expertise:"Software Developer"},{avatar:"https://randomuser.me/api/portraits/women/51.jpg",name:"Katrina",expertise:"Fotoreporter"}],r=0;r<n.length;r++)t.push((e=n[r],Object(S.jsx)(Ed,{appear:!0,enter:"transition duration-200 delay-[400ms] ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200 ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:Object(S.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 pr-4",children:[Object(S.jsx)("div",{className:"h-10 w-10 rounded-full border-2 border-white bg-cover bg-no-repeat",style:{backgroundImage:"url(".concat(e.avatar,")")}}),Object(S.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[Object(S.jsx)("div",{className:"text-base font-sans font-semibold tracking-tight text-white",children:e.name}),Object(S.jsx)("div",{className:"font-sans text-[14px] tracking-tight text-neutral-400",children:e.expertise})]})]})},e.name)));return t}()})}),Object(S.jsxs)("div",{className:"".concat(Z()?"w-full":"w-[60%]"," p-0 sm:p-8"),children:[Object(S.jsxs)("h1",{className:"mb-1 text-center font-sans text-[24px] font-bold tracking-tight text-black sm:text-left",children:["Aggiorna il tuo profilo",Object(S.jsx)("span",{className:"hidden sm:inline",children:"."})]}),Object(S.jsx)("p",{className:"text-base pr-0 text-center font-sans leading-9 text-neutral-500 sm:pr-10 sm:text-left",children:"Le qualifiche sono uno dei modi che puoi utilizzare per rappresentare la propria esperienza sull'argomento trattato."}),Object(S.jsxs)("section",{className:"mt-8 text-left",children:[Object(S.jsxs)("div",{className:"mb-2 flex flex-row justify-between",children:[Object(S.jsx)("label",{htmlFor:"comments-name",className:"font-sans text-[1.3rem] font-semibold",children:"Nome"}),Object(S.jsx)(Ed,{show:!!e.name,enter:"transition duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-100 ease-out",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(S.jsx)("div",{className:"font-sans text-sm text-red-500",children:e.name})})]}),Object(S.jsx)("input",{id:"comments-name",className:"flex h-[42px] w-full items-center rounded border border-neutral-200 px-3 font-sans text-[16px] outline-0 transition-[border-color] duration-200 focus:border-neutral-300 ".concat(e.name&&"border-red-500 focus:border-red-500"),type:"text",name:"name",ref:n,value:s,placeholder:"Jamie Larson",onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(u(e.target.value),v())},maxLength:"64"}),Object(S.jsxs)("div",{className:"mt-6 mb-2 flex flex-row justify-between",children:[Object(S.jsx)("label",{htmlFor:"comments-name",className:"font-sans text-[1.3rem] font-semibold",children:"Scegli la tua qualifica"}),Object(S.jsxs)("div",{className:"font-sans text-[1.3rem] text-neutral-400 ".concat(0===i&&"text-red-500"),children:[Object(S.jsx)("b",{children:i})," caratteri rimanenti"]})]}),Object(S.jsx)("input",{id:"comments-expertise",className:"flex h-[42px] w-full items-center rounded border border-neutral-200 px-3 font-sans text-[16px] outline-0 transition-[border-color] duration-200 focus:border-neutral-300 ".concat(0===i&&"border-red-500 focus:border-red-500"),type:"text",name:"expertise",ref:r,value:l,placeholder:"Es: Web Designer... ",onChange:function(e){e=e.target.value;h(50-e.length),c(e)},onKeyDown:function(e){"Enter"===e.key&&(c(e.target.value),v())},maxLength:50}),Object(S.jsx)("button",{type:"button",className:"mt-10 flex h-[42px] w-full items-center justify-center rounded-md px-8 font-sans text-[15px] font-semibold text-white opacity-100 transition-opacity duration-200 ease-linear hover:opacity-90",style:{backgroundColor:null!=a?a:"#000000"},onClick:v,children:"Salva"})]})]}),Object(S.jsx)(Wp,{close:function(){return d(!1)}})]})})},reportPopup:function(t){var n=Object(U.useContext)(O).dispatchAction,e=q(Object(U.useState)("default"),2),r=e[0],o=e[1],i="bg-red-600";"sent"===r&&(i="bg-green-600");var a="Segnala ora";"sending"===r?a="Invio":"sent"===r&&(a="Inviato");e=null;"sending"===r?e=Object(S.jsx)(Rd,{className:"mr-2 h-[24px] w-[24px] fill-white"}):"sent"===r&&(e=Object(S.jsx)(Qp,{className:"mr-2 h-[16px] w-[16px]"}));function s(e){n("closePopup")}return Object(S.jsxs)("div",{className:"rounded-none relative h-screen w-screen bg-white p-[28px] text-center shadow-modal sm:h-auto sm:w-[500px] sm:rounded-xl sm:p-8 sm:text-left",onMouseDown:function(e){e.stopPropagation()},children:[Object(S.jsxs)("h1",{className:"mb-1 font-sans text-[24px] font-bold tracking-tight text-black",children:["Vuoi segnalare",Object(S.jsx)("span",{className:"hidden sm:inline",children:" questo commento"}),"?"]}),Object(S.jsx)("p",{className:"text-base px-4 font-sans leading-9 text-neutral-500 sm:pr-4 sm:pl-0",children:"La tua richiesta sar inviata al proprietario di questo sito."}),Object(S.jsxs)("div",{className:"mt-10 flex flex-col items-center justify-start gap-4 sm:flex-row",children:[Object(S.jsxs)("button",{type:"button",className:"flex h-[44px] w-full items-center justify-center rounded-md px-4 font-sans text-[15px] font-semibold text-white transition duration-200 ease-linear sm:w-[200px] ".concat(i," opacity-100 hover:opacity-90"),onClick:function(e){e.stopPropagation(),o("sending"),setTimeout(function(){o("sent"),n("reportComment",t.comment),setTimeout(function(){s()},750)},1e3)},style:{backgroundColor:null!==i&&void 0!==i?i:"#000000"},children:[e,a]}),Object(S.jsx)("button",{type:"button",onClick:s,className:"font-sans text-sm font-medium text-neutral-500 dark:text-neutral-400",children:"Annulla"})]}),Object(S.jsx)(Wp,{close:function(){return s()}})]})}}),Yp=["type"];function Xp(){var t=Object(U.useContext)(O).popup,e=q(Object(U.useState)(t),2),n=e[0],r=e[1];if(Object(U.useEffect)(function(){if(null!==t&&r(t),null===t){var e=setTimeout(function(){r(null)},250);return function(){clearTimeout(e)}}},[t,r]),!n||!n.type)return null;var o=null!=t?t:n,i=o.type,e=H(o,Yp),o=Gp[i];if(!o)return console.warn("Unknown popup of type ",i),null;n=t===n;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(Kp,{show:n,callback:e.callback,title:i,children:Object(S.jsx)(o,p({},e))})})}function Zp(e){var t=e.adminUrl,e=e.onLoad;return t?Object(S.jsx)("iframe",{"data-frame":"admin-auth",src:t+"auth-frame/",style:{display:"none"},title:"auth-frame",onLoad:e}):null}function eh(e){e.dsn;e=e.children;return Object(S.jsx)(S.Fragment,{children:e})}var th=function(){m(a,W.a.Component);var e,t,n,r,o,i=b(a);function a(e){var t;return d(this,a),(t=i.call(this,e)).state={action:"init:running",initStatus:"running",member:null,admin:null,comments:null,pagination:null,popupNotification:null,customSiteUrl:e.customSiteUrl,postId:e.postId,popup:null,accentColor:e.accentColor,secundaryFormCount:0},t.adminApi=null,t.GhostApi=null,t.dispatchAction=t.dispatchAction.bind(c(t)),t.initAdminAuth=t.initAdminAuth.bind(c(t)),t}return h(a,[{key:"initSetup",value:(o=g(C().mark(function e(){var t,n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchApiData();case 3:return r=e.sent,t=r.member,e.next=7,this.fetchComments();case 7:o=e.sent,n=o.comments,r=o.pagination,o=o.count,o={member:t,action:"init:success",initStatus:"success",comments:n,pagination:r,commentCount:o},this.setState(o),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("[Comments] Failed to initialize:",e.t0),this.setState({action:"init:failed",initStatus:"failed"});case 19:case"end":return e.stop()}},e,this,[[0,15]])})),function(){return o.apply(this,arguments)})},{key:"initAdminAuth",value:(r=g(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.adminApi)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,this.adminApi=this.setupAdminAPI(),t=null,e.prev=5,e.next=8,this.adminApi.getUser();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.warn("[Comments] Failed to fetch current admin user:",e.t0);case 14:n={admin:t},this.setState(n),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(2),console.error("[Comments] Failed to initialize admin authentication:",e.t1);case 21:case"end":return e.stop()}},e,this,[[2,18],[5,11]])})),function(){return r.apply(this,arguments)})},{key:"dispatchAction",value:(n=g(C().mark(function e(c,f){var d,p=this;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K[c])return this.setState(function(e){return t={action:c,data:f,state:e,api:p.GhostApi,adminApi:p.adminApi},n=t.action,r=t.data,o=t.state,e=t.api,t=t.adminApi,(n=K[n])&&n({data:r,state:o,api:e,adminApi:t})||{};var t,n,r,o}),e.abrupt("return");e.next=3;break;case 3:return clearTimeout(this.timeoutId),this.setState({action:"".concat(c,":running")}),e.prev=5,e.next=8,function(){return G.apply(this,arguments)}({action:c,data:f,state:this.state,api:this.GhostApi,adminApi:this.adminApi});case 8:d=e.sent,this.setState(d),d&&d.action&&!d.action.includes(":failed")&&(this.timeoutId=setTimeout(function(){p.setState({action:""})},2e3)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0),t={type:"".concat(c,":failed"),autoHide:!0,closeable:!0,status:"error",state:this.state,meta:{error:e.t0}},i=i=l=u=s=a=i=o=r=n=void 0,n=t.type,r=t.status,o=t.autoHide,i=t.duration,a=void 0===i?2600:i,s=t.closeable,u=t.state,l=t.message,i=t.meta,t=void 0===i?{}:i,i=0,u&&u.popupNotification&&(i=(u.popupNotification.count||0)+1),d={type:n,status:r,autoHide:o,closeable:s,duration:a,meta:t,message:l,count:i},this.setState({action:"".concat(c,":failed"),popupNotification:d});case 18:case"end":return e.stop()}var t,n,r,o,i,a,s,u,l},e,this,[[5,13]])})),function(e,t){return n.apply(this,arguments)})},{key:"fetchApiData",value:(t=g(C().mark(function e(){var t,n,r,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props,t=o.siteUrl,n=o.customSiteUrl,r=o.apiUrl,o=o.apiKey,e.prev=1,this.GhostApi=this.props.api||te({siteUrl:t,apiUrl:r,apiKey:o}),e.next=5,this.GhostApi.init();case 5:return o=e.sent,o=o.member,this.setupSentry(),e.abrupt("return",{member:o});case 11:if(e.prev=11,e.t0=e.catch(1),function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e.some(function(e){e=re[e];return!(!e||!e(t))})}(["dev","test"],{customSiteUrl:n}))return e.abrupt("return",{});e.next=15;break;case 15:throw e.t0;case 16:case"end":return e.stop()}},e,this,[[1,11]])})),function(){return t.apply(this,arguments)})},{key:"fetchComments",value:(e=g(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.GhostApi.comments.browse({page:1,postId:this.state.postId}),n=this.GhostApi.comments.count({postId:this.state.postId}),e.next=4,Promise.all([t,n]);case 4:return t=e.sent,n=q(t,2),t=n[0],n=n[1],e.abrupt("return",{comments:t.comments,pagination:t.meta.pagination,count:n});case 9:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setupAdminAPI",value:function(){var o=document.querySelector('iframe[data-frame="admin-auth"]'),i=1,a={},s=new URL(this.props.adminUrl).origin;function n(e,t){return new Promise(function(n,r){a[i+=1]=function(e,t){return e?r(e):n(t)},o.contentWindow.postMessage(JSON.stringify(p({uid:i,action:e},t)),s)})}return window.addEventListener("message",function(e){if(e.origin===s){var t=null;try{t=JSON.parse(e.data)}catch(e){return void console.error("Error parsing event data",e)}var n=a[t.uid];n&&(delete a[t.uid],n(t.error,t.result))}}),{getUser:function(){return g(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("getUser");case 2:if((t=e.sent)&&t.users){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",t.users[0]);case 6:case"end":return e.stop()}},e)}))()},hideComment:function(t){return g(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("hideComment",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))()},showComment:function(t){return g(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("showComment",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))()}}}},{key:"setupSentry",value:function(){}},{key:"getContextFromState",value:function(){var e=this.state,t=e.action,n=e.popupNotification,r=e.customSiteUrl,o=e.member,i=e.comments,a=e.pagination,s=e.commentCount,u=e.postId,l=e.admin,c=e.popup,e=e.secundaryFormCount;return{action:t,popupNotification:n,customSiteUrl:r,member:o,admin:l,comments:i,pagination:a,commentCount:s,postId:u,title:this.props.title,showCount:this.props.showCount,colorScheme:this.props.colorScheme,avatarSaturation:this.props.avatarSaturation,accentColor:this.props.accentColor,commentsEnabled:this.props.commentsEnabled,appVersion:this.props.appVersion,stylesUrl:this.props.stylesUrl,publication:this.props.publication,secundaryFormCount:e,popup:c,dispatchAction:this.dispatchAction}}},{key:"componentDidMount",value:function(){this.initSetup()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e="success"===this.state.initStatus;return Object(S.jsx)(eh,{dsn:this.props.sentryDsn,children:Object(S.jsxs)(O.Provider,{value:this.getContextFromState(),children:[Object(S.jsx)(x,{children:Object(S.jsx)(Ip,{done:e})}),Object(S.jsx)(Zp,{adminUrl:this.props.adminUrl,onLoad:this.initAdminAuth}),Object(S.jsx)(Xp,{})]})})}}]),a}(),nh=["siteUrl"];!function(){var e,t,n=function(){var e=document.querySelector("script[data-ghost-comments]"),t=null==e?void 0:e.dataset;if(!e)return{};var n=t.ghostComments,r=t.key,o=t.api,i=t.admin,a=t.sentryDsn,s=t.postId,u=t.colorScheme,l=t.avatarSaturation,c=t.accentColor,f=t.appVersion,e=t.commentsEnabled;return{siteUrl:n,stylesUrl:t.styles,apiKey:r,apiUrl:o,sentryDsn:a,postId:s,adminUrl:i,colorScheme:u,avatarSaturation:l,accentColor:c,appVersion:f,commentsEnabled:e,title:"null"===t.title?null:t.title,showCount:"true"===t.count,publication:null!==(t=t.publication)&&void 0!==t?t:""}}(),r=n.siteUrl,o=H(n,nh),i=r||window.location.origin;try{(e={siteUrl:i}).siteUrl,(t=document.querySelector("script[data-ghost-comments]"))?((e=document.createElement("div")).id=oe,t.parentElement.insertBefore(e,t)):console.warn("[Comments] Comment box location was not found: could not load comments box."),(t=new URL(window.location.href)).searchParams.get("token")&&(t.searchParams.delete("token"),window.history.replaceState({},document.title,t.href)),a.a.render(Object(S.jsx)(W.a.StrictMode,{children:Object(S.jsx)(th,p({siteUrl:i,customSiteUrl:r},o))}),document.getElementById(oe))}catch(e){console.error(e)}}()}]);